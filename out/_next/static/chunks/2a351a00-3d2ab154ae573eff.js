"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47],{6294:function(i,s,f){f.d(s,{$j:function(){return connect},a7:function(){return iF}});var p,g,m,_,w,E,I,B,O,R,U,N,F,z=f(2601),V=f(7133).lW,K=Object.create,Y=Object.defineProperty,ee=Object.getOwnPropertyDescriptor,et=Object.getOwnPropertyNames,er=Object.getPrototypeOf,en=Object.prototype.hasOwnProperty,__commonJS=(i,s)=>function(){return s||(0,i[et(i)[0]])((s={exports:{}}).exports,s),s.exports},__export=(i,s)=>{for(var f in s)Y(i,f,{get:s[f],enumerable:!0})},__copyProps=(i,s,f,p)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let g of et(s))en.call(i,g)||g===f||Y(i,g,{get:()=>s[g],enumerable:!(p=ee(s,g))||p.enumerable});return i},__toESM=(i,s,f)=>(f=null!=i?K(er(i)):{},__copyProps(!s&&i&&i.__esModule?f:Y(f,"default",{value:i,enumerable:!0}),i)),ei=__commonJS({"node_modules/obliterator/iterator.js"(i,s){function Iterator(i){if("function"!=typeof i)throw Error("obliterator/iterator: expecting a function!");this.next=i}"undefined"!=typeof Symbol&&(Iterator.prototype[Symbol.iterator]=function(){return this}),Iterator.of=function(){var i=arguments,s=i.length,f=0;return new Iterator(function(){return f>=s?{done:!0}:{done:!1,value:i[f++]}})},Iterator.empty=function(){return new Iterator(function(){return{done:!0}})},Iterator.fromSequence=function(i){var s=0,f=i.length;return new Iterator(function(){return s>=f?{done:!0}:{done:!1,value:i[s++]}})},Iterator.is=function(i){return i instanceof Iterator||"object"==typeof i&&null!==i&&"function"==typeof i.next},s.exports=Iterator}}),ea=__commonJS({"node_modules/obliterator/support.js"(i){i.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,i.SYMBOL_SUPPORT="undefined"!=typeof Symbol}}),es=__commonJS({"node_modules/obliterator/foreach.js"(i,s){var f=ea(),p=f.ARRAY_BUFFER_SUPPORT,g=f.SYMBOL_SUPPORT;s.exports=function(i,s){var f,m,_,w,E;if(!i)throw Error("obliterator/forEach: invalid iterable.");if("function"!=typeof s)throw Error("obliterator/forEach: expecting a callback.");if(Array.isArray(i)||p&&ArrayBuffer.isView(i)||"string"==typeof i||"[object Arguments]"===i.toString()){for(_=0,w=i.length;_<w;_++)s(i[_],_);return}if("function"==typeof i.forEach){i.forEach(s);return}if(g&&Symbol.iterator in i&&"function"!=typeof i.next&&(i=i[Symbol.iterator]()),"function"==typeof i.next){for(f=i,_=0;!0!==(E=f.next()).done;)s(E.value,_),_++;return}for(m in i)i.hasOwnProperty(m)&&s(i[m],m)}}}),eo=__commonJS({"node_modules/mnemonist/utils/typed-arrays.js"(i){i.getPointerArray=function(i){var s=i-1;if(s<=255)return Uint8Array;if(s<=65535)return Uint16Array;if(s<=4294967295)return Uint32Array;throw Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},i.getSignedPointerArray=function(i){var s=i-1;return s<=127?Int8Array:s<=32767?Int16Array:s<=2147483647?Int32Array:Float64Array},i.getNumberType=function(i){return i===(0|i)?-1===Math.sign(i)?i<=127&&i>=-128?Int8Array:i<=32767&&i>=-32768?Int16Array:Int32Array:i<=255?Uint8Array:i<=65535?Uint16Array:Uint32Array:Float64Array};var s={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};i.getMinimalRepresentation=function(f,p){var g,m,_,w,E,I=null,B=0;for(w=0,E=f.length;w<E;w++)_=p?p(f[w]):f[w],(g=s[(m=i.getNumberType(_)).name])>B&&(B=g,I=m);return I},i.isTypedArray=function(i){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(i)},i.concat=function(){var i,s,f,p=0;for(i=0,f=arguments.length;i<f;i++)p+=arguments[i].length;var g=new arguments[0].constructor(p);for(i=0,s=0;i<f;i++)g.set(arguments[i],s),s+=arguments[i].length;return g},i.indices=function(s){for(var f=new(i.getPointerArray(s))(s),p=0;p<s;p++)f[p]=p;return f}}}),eu=__commonJS({"node_modules/mnemonist/utils/iterables.js"(i){var s=es(),f=eo();function isArrayLike2(i){return Array.isArray(i)||f.isTypedArray(i)}function guessLength(i){return"number"==typeof i.length?i.length:"number"==typeof i.size?i.size:void 0}function toArray(i){var f=guessLength(i),p="number"==typeof f?Array(f):[],g=0;return s(i,function(i){p[g++]=i}),p}function toArrayWithIndices(i){var p=guessLength(i),g="number"==typeof p?f.getPointerArray(p):Array,m="number"==typeof p?Array(p):[],_="number"==typeof p?new g(p):[],w=0;return s(i,function(i){m[w]=i,_[w]=w++}),[m,_]}i.isArrayLike=isArrayLike2,i.guessLength=guessLength,i.toArray=toArray,i.toArrayWithIndices=toArrayWithIndices}}),ec=__commonJS({"node_modules/mnemonist/lru-cache.js"(i,s){var f=ei(),p=es(),g=eo(),m=eu();function LRUCache(i,s,f){if(arguments.length<2&&(f=i,i=null,s=null),this.capacity=f,"number"!=typeof this.capacity||this.capacity<=0)throw Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var p=g.getPointerArray(f);this.forward=new p(f),this.backward=new p(f),this.K="function"==typeof i?new i(f):Array(f),this.V="function"==typeof s?new s(f):Array(f),this.size=0,this.head=0,this.tail=0,this.items={}}LRUCache.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}},LRUCache.prototype.splayOnTop=function(i){var s=this.head;if(this.head===i)return this;var f=this.backward[i],p=this.forward[i];return this.tail===i?this.tail=f:this.backward[p]=f,this.forward[f]=p,this.backward[s]=i,this.head=i,this.forward[i]=s,this},LRUCache.prototype.set=function(i,s){var f=this.items[i];if(void 0!==f){this.splayOnTop(f),this.V[f]=s;return}this.size<this.capacity?f=this.size++:(f=this.tail,this.tail=this.backward[f],delete this.items[this.K[f]]),this.items[i]=f,this.K[f]=i,this.V[f]=s,this.forward[f]=this.head,this.backward[this.head]=f,this.head=f},LRUCache.prototype.setpop=function(i,s){var f=null,p=null,g=this.items[i];return void 0!==g?(this.splayOnTop(g),f=this.V[g],this.V[g]=s,{evicted:!1,key:i,value:f}):(this.size<this.capacity?g=this.size++:(g=this.tail,this.tail=this.backward[g],f=this.V[g],p=this.K[g],delete this.items[p]),this.items[i]=g,this.K[g]=i,this.V[g]=s,this.forward[g]=this.head,this.backward[this.head]=g,this.head=g,p)?{evicted:!0,key:p,value:f}:null},LRUCache.prototype.has=function(i){return i in this.items},LRUCache.prototype.get=function(i){var s=this.items[i];if(void 0!==s)return this.splayOnTop(s),this.V[s]},LRUCache.prototype.peek=function(i){var s=this.items[i];if(void 0!==s)return this.V[s]},LRUCache.prototype.forEach=function(i,s){s=arguments.length>1?s:this;for(var f=0,p=this.size,g=this.head,m=this.K,_=this.V,w=this.forward;f<p;)i.call(s,_[g],m[g],this),g=w[g],f++},LRUCache.prototype.keys=function(){var i=0,s=this.size,p=this.head,g=this.K,m=this.forward;return new f(function(){if(i>=s)return{done:!0};var f=g[p];return++i<s&&(p=m[p]),{done:!1,value:f}})},LRUCache.prototype.values=function(){var i=0,s=this.size,p=this.head,g=this.V,m=this.forward;return new f(function(){if(i>=s)return{done:!0};var f=g[p];return++i<s&&(p=m[p]),{done:!1,value:f}})},LRUCache.prototype.entries=function(){var i=0,s=this.size,p=this.head,g=this.K,m=this.V,_=this.forward;return new f(function(){if(i>=s)return{done:!0};var f=g[p],w=m[p];return++i<s&&(p=_[p]),{done:!1,value:[f,w]}})},"undefined"!=typeof Symbol&&(LRUCache.prototype[Symbol.iterator]=LRUCache.prototype.entries),LRUCache.prototype.inspect=function(){for(var i,s=new Map,f=this.entries();!(i=f.next()).done;)s.set(i.value[0],i.value[1]);return Object.defineProperty(s,"constructor",{value:LRUCache,enumerable:!1}),s},"undefined"!=typeof Symbol&&(LRUCache.prototype[Symbol.for("nodejs.util.inspect.custom")]=LRUCache.prototype.inspect),LRUCache.from=function(i,s,f,g){if(arguments.length<2){if("number"!=typeof(g=m.guessLength(i)))throw Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else 2==arguments.length&&(g=s,s=null,f=null);var _=new LRUCache(s,f,g);return p(i,function(i,s){_.set(s,i)}),_},s.exports=LRUCache}}),el=__commonJS({"node_modules/mnemonist/lru-map.js"(i,s){var f=ec(),p=es(),g=eo(),m=eu();function LRUMap(i,s,f){if(arguments.length<2&&(f=i,i=null,s=null),this.capacity=f,"number"!=typeof this.capacity||this.capacity<=0)throw Error("mnemonist/lru-map: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw Error("mnemonist/lru-map: capacity should be a finite positive integer.");var p=g.getPointerArray(f);this.forward=new p(f),this.backward=new p(f),this.K="function"==typeof i?new i(f):Array(f),this.V="function"==typeof s?new s(f):Array(f),this.size=0,this.head=0,this.tail=0,this.items=new Map}LRUMap.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items.clear()},LRUMap.prototype.set=function(i,s){var f=this.items.get(i);if(void 0!==f){this.splayOnTop(f),this.V[f]=s;return}this.size<this.capacity?f=this.size++:(f=this.tail,this.tail=this.backward[f],this.items.delete(this.K[f])),this.items.set(i,f),this.K[f]=i,this.V[f]=s,this.forward[f]=this.head,this.backward[this.head]=f,this.head=f},LRUMap.prototype.setpop=function(i,s){var f=null,p=null,g=this.items.get(i);return void 0!==g?(this.splayOnTop(g),f=this.V[g],this.V[g]=s,{evicted:!1,key:i,value:f}):(this.size<this.capacity?g=this.size++:(g=this.tail,this.tail=this.backward[g],f=this.V[g],p=this.K[g],this.items.delete(p)),this.items.set(i,g),this.K[g]=i,this.V[g]=s,this.forward[g]=this.head,this.backward[this.head]=g,this.head=g,p)?{evicted:!0,key:p,value:f}:null},LRUMap.prototype.has=function(i){return this.items.has(i)},LRUMap.prototype.get=function(i){var s=this.items.get(i);if(void 0!==s)return this.splayOnTop(s),this.V[s]},LRUMap.prototype.peek=function(i){var s=this.items.get(i);if(void 0!==s)return this.V[s]},LRUMap.prototype.splayOnTop=f.prototype.splayOnTop,LRUMap.prototype.forEach=f.prototype.forEach,LRUMap.prototype.keys=f.prototype.keys,LRUMap.prototype.values=f.prototype.values,LRUMap.prototype.entries=f.prototype.entries,"undefined"!=typeof Symbol&&(LRUMap.prototype[Symbol.iterator]=LRUMap.prototype.entries),LRUMap.prototype.inspect=f.prototype.inspect,LRUMap.from=function(i,s,f,g){if(arguments.length<2){if("number"!=typeof(g=m.guessLength(i)))throw Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else 2==arguments.length&&(g=s,s=null,f=null);var _=new LRUMap(s,f,g);return p(i,function(i,s){_.set(s,i)}),_},s.exports=LRUMap}}),ef=__commonJS({"node_modules/ms/index.js"(i,s){function parse(i){if(!((i=String(i)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(s){var f=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*f;case"weeks":case"week":case"w":return 6048e5*f;case"days":case"day":case"d":return 864e5*f;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*f;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*f;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*f;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function fmtShort(i){var s=Math.abs(i);return s>=864e5?Math.round(i/864e5)+"d":s>=36e5?Math.round(i/36e5)+"h":s>=6e4?Math.round(i/6e4)+"m":s>=1e3?Math.round(i/1e3)+"s":i+"ms"}function fmtLong(i){var s=Math.abs(i);return s>=864e5?plural(i,s,864e5,"day"):s>=36e5?plural(i,s,36e5,"hour"):s>=6e4?plural(i,s,6e4,"minute"):s>=1e3?plural(i,s,1e3,"second"):i+" ms"}function plural(i,s,f,p){return Math.round(i/f)+" "+p+(s>=1.5*f?"s":"")}s.exports=function(i,s){s=s||{};var f=typeof i;if("string"===f&&i.length>0)return parse(i);if("number"===f&&isFinite(i))return s.long?fmtLong(i):fmtShort(i);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))}}}),eh=__commonJS({"node_modules/debug/src/common.js"(i,s){function setup(i){function selectColor(i){let s=0;for(let f=0;f<i.length;f++)s=(s<<5)-s+i.charCodeAt(f)|0;return createDebug.colors[Math.abs(s)%createDebug.colors.length]}function createDebug(i){let s,f,p;let g=null;function debug2(...i){if(!debug2.enabled)return;let f=debug2,p=Number(new Date),g=p-(s||p);f.diff=g,f.prev=s,f.curr=p,s=p,i[0]=createDebug.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");let m=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(s,p)=>{if("%%"===s)return"%";m++;let g=createDebug.formatters[p];if("function"==typeof g){let p=i[m];s=g.call(f,p),i.splice(m,1),m--}return s}),createDebug.formatArgs.call(f,i);let _=f.log||createDebug.log;_.apply(f,i)}return debug2.namespace=i,debug2.useColors=createDebug.useColors(),debug2.color=createDebug.selectColor(i),debug2.extend=extend,debug2.destroy=createDebug.destroy,Object.defineProperty(debug2,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==g?g:(f!==createDebug.namespaces&&(f=createDebug.namespaces,p=createDebug.enabled(i)),p),set:i=>{g=i}}),"function"==typeof createDebug.init&&createDebug.init(debug2),debug2}function extend(i,s){let f=createDebug(this.namespace+(void 0===s?":":s)+i);return f.log=this.log,f}function enable(i){let s;createDebug.save(i),createDebug.namespaces=i,createDebug.names=[],createDebug.skips=[];let f=("string"==typeof i?i:"").split(/[\s,]+/),p=f.length;for(s=0;s<p;s++)f[s]&&("-"===(i=f[s].replace(/\*/g,".*?"))[0]?createDebug.skips.push(RegExp("^"+i.slice(1)+"$")):createDebug.names.push(RegExp("^"+i+"$")))}function disable(){let i=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map(i=>"-"+i)].join(",");return createDebug.enable(""),i}function enabled(i){let s,f;if("*"===i[i.length-1])return!0;for(s=0,f=createDebug.skips.length;s<f;s++)if(createDebug.skips[s].test(i))return!1;for(s=0,f=createDebug.names.length;s<f;s++)if(createDebug.names[s].test(i))return!0;return!1}function toNamespace(i){return i.toString().substring(2,i.toString().length-2).replace(/\.\*\?$/,"*")}function coerce2(i){return i instanceof Error?i.stack||i.message:i}function destroy(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=coerce2,createDebug.disable=disable,createDebug.enable=enable,createDebug.enabled=enabled,createDebug.humanize=ef(),createDebug.destroy=destroy,Object.keys(i).forEach(s=>{createDebug[s]=i[s]}),createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}s.exports=setup}}),ed=__commonJS({"node_modules/debug/src/browser.js"(i,s){let f;function useColors(){return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function formatArgs(i){if(i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;let f="color: "+this.color;i.splice(1,0,f,"color: inherit");let p=0,g=0;i[0].replace(/%[a-zA-Z%]/g,i=>{"%%"!==i&&(p++,"%c"===i&&(g=p))}),i.splice(g,0,f)}function save(s){try{s?i.storage.setItem("debug",s):i.storage.removeItem("debug")}catch(i){}}function load(){let s;try{s=i.storage.getItem("debug")}catch(i){}return!s&&void 0!==z&&"env"in z&&(s=z.env.DEBUG),s}function localstorage(){try{return localStorage}catch(i){}}i.formatArgs=formatArgs,i.save=save,i.load=load,i.useColors=useColors,i.storage=localstorage(),i.destroy=(f=!1,()=>{f||(f=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],i.log=console.debug||console.log||(()=>{}),s.exports=eh()(i);var{formatters:p}=s.exports;p.j=function(i){try{return JSON.stringify(i)}catch(i){return"[UnexpectedJSONParseError]: "+i.message}}}}),ep=__commonJS({"node_modules/base64-js/index.js"(i){i.byteLength=byteLength,i.toByteArray=toByteArray,i.fromByteArray=fromByteArray;var s,f,p=[],g=[],m="undefined"!=typeof Uint8Array?Uint8Array:Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,f=_.length;s<f;++s)p[s]=_[s],g[_.charCodeAt(s)]=s;function getLens(i){var s=i.length;if(s%4>0)throw Error("Invalid string. Length must be a multiple of 4");var f=i.indexOf("=");-1===f&&(f=s);var p=f===s?0:4-f%4;return[f,p]}function byteLength(i){var s=getLens(i),f=s[0],p=s[1];return(f+p)*3/4-p}function _byteLength(i,s,f){return(s+f)*3/4-f}function toByteArray(i){var s,f,p=getLens(i),_=p[0],w=p[1],E=new m(_byteLength(i,_,w)),I=0,B=w>0?_-4:_;for(f=0;f<B;f+=4)s=g[i.charCodeAt(f)]<<18|g[i.charCodeAt(f+1)]<<12|g[i.charCodeAt(f+2)]<<6|g[i.charCodeAt(f+3)],E[I++]=s>>16&255,E[I++]=s>>8&255,E[I++]=255&s;return 2===w&&(s=g[i.charCodeAt(f)]<<2|g[i.charCodeAt(f+1)]>>4,E[I++]=255&s),1===w&&(s=g[i.charCodeAt(f)]<<10|g[i.charCodeAt(f+1)]<<4|g[i.charCodeAt(f+2)]>>2,E[I++]=s>>8&255,E[I++]=255&s),E}function tripletToBase64(i){return p[i>>18&63]+p[i>>12&63]+p[i>>6&63]+p[63&i]}function encodeChunk(i,s,f){for(var p=[],g=s;g<f;g+=3)p.push(tripletToBase64((i[g]<<16&16711680)+(i[g+1]<<8&65280)+(255&i[g+2])));return p.join("")}function fromByteArray(i){for(var s,f=i.length,g=f%3,m=[],_=0,w=f-g;_<w;_+=16383)m.push(encodeChunk(i,_,_+16383>w?w:_+16383));return 1===g?m.push(p[(s=i[f-1])>>2]+p[s<<4&63]+"=="):2===g&&m.push(p[(s=(i[f-2]<<8)+i[f-1])>>10]+p[s>>4&63]+p[s<<2&63]+"="),m.join("")}g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63}}),eg=__commonJS({"node_modules/ieee754/index.js"(i){i.read=function(i,s,f,p,g){var m,_,w=8*g-p-1,E=(1<<w)-1,I=E>>1,B=-7,O=f?g-1:0,R=f?-1:1,U=i[s+O];for(O+=R,m=U&(1<<-B)-1,U>>=-B,B+=w;B>0;m=256*m+i[s+O],O+=R,B-=8);for(_=m&(1<<-B)-1,m>>=-B,B+=p;B>0;_=256*_+i[s+O],O+=R,B-=8);if(0===m)m=1-I;else{if(m===E)return _?NaN:(U?-1:1)*(1/0);_+=Math.pow(2,p),m-=I}return(U?-1:1)*_*Math.pow(2,m-p)},i.write=function(i,s,f,p,g,m){var _,w,E,I=8*m-g-1,B=(1<<I)-1,O=B>>1,R=23===g?5960464477539062e-23:0,U=p?0:m-1,N=p?1:-1,F=s<0||0===s&&1/s<0?1:0;for(isNaN(s=Math.abs(s))||s===1/0?(w=isNaN(s)?1:0,_=B):(_=Math.floor(Math.log(s)/Math.LN2),s*(E=Math.pow(2,-_))<1&&(_--,E*=2),_+O>=1?s+=R/E:s+=R*Math.pow(2,1-O),s*E>=2&&(_++,E/=2),_+O>=B?(w=0,_=B):_+O>=1?(w=(s*E-1)*Math.pow(2,g),_+=O):(w=s*Math.pow(2,O-1)*Math.pow(2,g),_=0));g>=8;i[f+U]=255&w,U+=N,w/=256,g-=8);for(_=_<<g|w,I+=g;I>0;i[f+U]=255&_,U+=N,_/=256,I-=8);i[f+U-N]|=128*F}}}),ey=__commonJS({"node_modules/buffer/index.js"(i){var s=ep(),f=eg(),p="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function typedArraySupport(){try{let i=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(i,s),42===i.foo()}catch(i){return!1}}function createBuffer(i){if(i>2147483647)throw RangeError('The value "'+i+'" is invalid for option "size"');let s=new Uint8Array(i);return Object.setPrototypeOf(s,Buffer3.prototype),s}function Buffer3(i,s,f){if("number"==typeof i){if("string"==typeof s)throw TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(i)}return from(i,s,f)}function from(i,s,f){if("string"==typeof i)return fromString(i,s);if(ArrayBuffer.isView(i))return fromArrayView(i);if(null==i)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(isInstance(i,ArrayBuffer)||i&&isInstance(i.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(isInstance(i,SharedArrayBuffer)||i&&isInstance(i.buffer,SharedArrayBuffer)))return fromArrayBuffer(i,s,f);if("number"==typeof i)throw TypeError('The "value" argument must not be of type number. Received type number');let p=i.valueOf&&i.valueOf();if(null!=p&&p!==i)return Buffer3.from(p,s,f);let g=fromObject(i);if(g)return g;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof i[Symbol.toPrimitive])return Buffer3.from(i[Symbol.toPrimitive]("string"),s,f);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}function assertSize(i){if("number"!=typeof i)throw TypeError('"size" argument must be of type number');if(i<0)throw RangeError('The value "'+i+'" is invalid for option "size"')}function alloc(i,s,f){return(assertSize(i),i<=0)?createBuffer(i):void 0!==s?"string"==typeof f?createBuffer(i).fill(s,f):createBuffer(i).fill(s):createBuffer(i)}function allocUnsafe(i){return assertSize(i),createBuffer(i<0?0:0|checked(i))}function fromString(i,s){if(("string"!=typeof s||""===s)&&(s="utf8"),!Buffer3.isEncoding(s))throw TypeError("Unknown encoding: "+s);let f=0|byteLength(i,s),p=createBuffer(f),g=p.write(i,s);return g!==f&&(p=p.slice(0,g)),p}function fromArrayLike(i){let s=i.length<0?0:0|checked(i.length),f=createBuffer(s);for(let p=0;p<s;p+=1)f[p]=255&i[p];return f}function fromArrayView(i){if(isInstance(i,Uint8Array)){let s=new Uint8Array(i);return fromArrayBuffer(s.buffer,s.byteOffset,s.byteLength)}return fromArrayLike(i)}function fromArrayBuffer(i,s,f){let p;if(s<0||i.byteLength<s)throw RangeError('"offset" is outside of buffer bounds');if(i.byteLength<s+(f||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(p=void 0===s&&void 0===f?new Uint8Array(i):void 0===f?new Uint8Array(i,s):new Uint8Array(i,s,f),Buffer3.prototype),p}function fromObject(i){if(Buffer3.isBuffer(i)){let s=0|checked(i.length),f=createBuffer(s);return 0===f.length||i.copy(f,0,0,s),f}if(void 0!==i.length){var s;return"number"!=typeof i.length||(s=i.length)!=s?createBuffer(0):fromArrayLike(i)}if("Buffer"===i.type&&Array.isArray(i.data))return fromArrayLike(i.data)}function checked(i){if(i>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|i}function SlowBuffer(i){return+i!=i&&(i=0),Buffer3.alloc(+i)}function byteLength(i,s){if(Buffer3.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||isInstance(i,ArrayBuffer))return i.byteLength;if("string"!=typeof i)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let f=i.length,p=arguments.length>2&&!0===arguments[2];if(!p&&0===f)return 0;let g=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return utf8ToBytes(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*f;case"hex":return f>>>1;case"base64":return base64ToBytes(i).length;default:if(g)return p?-1:utf8ToBytes(i).length;s=(""+s).toLowerCase(),g=!0}}function slowToString(i,s,f){let p=!1;if((void 0===s||s<0)&&(s=0),s>this.length||((void 0===f||f>this.length)&&(f=this.length),f<=0||(f>>>=0)<=(s>>>=0)))return"";for(i||(i="utf8");;)switch(i){case"hex":return hexSlice(this,s,f);case"utf8":case"utf-8":return utf8Slice(this,s,f);case"ascii":return asciiSlice(this,s,f);case"latin1":case"binary":return latin1Slice(this,s,f);case"base64":return base64Slice(this,s,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,s,f);default:if(p)throw TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),p=!0}}function swap(i,s,f){let p=i[s];i[s]=i[f],i[f]=p}function bidirectionalIndexOf(i,s,f,p,g){var m;if(0===i.length)return -1;if("string"==typeof f?(p=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),(m=f=+f)!=m&&(f=g?0:i.length-1),f<0&&(f=i.length+f),f>=i.length){if(g)return -1;f=i.length-1}else if(f<0){if(!g)return -1;f=0}if("string"==typeof s&&(s=Buffer3.from(s,p)),Buffer3.isBuffer(s))return 0===s.length?-1:arrayIndexOf(i,s,f,p,g);if("number"==typeof s)return(s&=255,"function"==typeof Uint8Array.prototype.indexOf)?g?Uint8Array.prototype.indexOf.call(i,s,f):Uint8Array.prototype.lastIndexOf.call(i,s,f):arrayIndexOf(i,[s],f,p,g);throw TypeError("val must be string, number or Buffer")}function arrayIndexOf(i,s,f,p,g){let m,_=1,w=i.length,E=s.length;if(void 0!==p&&("ucs2"===(p=String(p).toLowerCase())||"ucs-2"===p||"utf16le"===p||"utf-16le"===p)){if(i.length<2||s.length<2)return -1;_=2,w/=2,E/=2,f/=2}function read(i,s){return 1===_?i[s]:i.readUInt16BE(s*_)}if(g){let p=-1;for(m=f;m<w;m++)if(read(i,m)===read(s,-1===p?0:m-p)){if(-1===p&&(p=m),m-p+1===E)return p*_}else -1!==p&&(m-=m-p),p=-1}else for(f+E>w&&(f=w-E),m=f;m>=0;m--){let f=!0;for(let p=0;p<E;p++)if(read(i,m+p)!==read(s,p)){f=!1;break}if(f)return m}return -1}function hexWrite(i,s,f,p){let g;f=Number(f)||0;let m=i.length-f;p?(p=Number(p))>m&&(p=m):p=m;let _=s.length;for(p>_/2&&(p=_/2),g=0;g<p;++g){let p=parseInt(s.substr(2*g,2),16);if(p!=p)break;i[f+g]=p}return g}function utf8Write(i,s,f,p){return blitBuffer(utf8ToBytes(s,i.length-f),i,f,p)}function asciiWrite(i,s,f,p){return blitBuffer(asciiToBytes(s),i,f,p)}function base64Write(i,s,f,p){return blitBuffer(base64ToBytes(s),i,f,p)}function ucs2Write(i,s,f,p){return blitBuffer(utf16leToBytes(s,i.length-f),i,f,p)}function base64Slice(i,f,p){return 0===f&&p===i.length?s.fromByteArray(i):s.fromByteArray(i.slice(f,p))}function utf8Slice(i,s,f){f=Math.min(i.length,f);let p=[],g=s;for(;g<f;){let s=i[g],m=null,_=s>239?4:s>223?3:s>191?2:1;if(g+_<=f){let f,p,w,E;switch(_){case 1:s<128&&(m=s);break;case 2:(192&(f=i[g+1]))==128&&(E=(31&s)<<6|63&f)>127&&(m=E);break;case 3:f=i[g+1],p=i[g+2],(192&f)==128&&(192&p)==128&&(E=(15&s)<<12|(63&f)<<6|63&p)>2047&&(E<55296||E>57343)&&(m=E);break;case 4:f=i[g+1],p=i[g+2],w=i[g+3],(192&f)==128&&(192&p)==128&&(192&w)==128&&(E=(15&s)<<18|(63&f)<<12|(63&p)<<6|63&w)>65535&&E<1114112&&(m=E)}}null===m?(m=65533,_=1):m>65535&&(m-=65536,p.push(m>>>10&1023|55296),m=56320|1023&m),p.push(m),g+=_}return decodeCodePointsArray(p)}function decodeCodePointsArray(i){let s=i.length;if(s<=4096)return String.fromCharCode.apply(String,i);let f="",p=0;for(;p<s;)f+=String.fromCharCode.apply(String,i.slice(p,p+=4096));return f}function asciiSlice(i,s,f){let p="";f=Math.min(i.length,f);for(let g=s;g<f;++g)p+=String.fromCharCode(127&i[g]);return p}function latin1Slice(i,s,f){let p="";f=Math.min(i.length,f);for(let g=s;g<f;++g)p+=String.fromCharCode(i[g]);return p}function hexSlice(i,s,f){let p=i.length;(!s||s<0)&&(s=0),(!f||f<0||f>p)&&(f=p);let g="";for(let p=s;p<f;++p)g+=_[i[p]];return g}function utf16leSlice(i,s,f){let p=i.slice(s,f),g="";for(let i=0;i<p.length-1;i+=2)g+=String.fromCharCode(p[i]+256*p[i+1]);return g}function checkOffset(i,s,f){if(i%1!=0||i<0)throw RangeError("offset is not uint");if(i+s>f)throw RangeError("Trying to access beyond buffer length")}function checkInt(i,s,f,p,g,m){if(!Buffer3.isBuffer(i))throw TypeError('"buffer" argument must be a Buffer instance');if(s>g||s<m)throw RangeError('"value" argument is out of bounds');if(f+p>i.length)throw RangeError("Index out of range")}function wrtBigUInt64LE(i,s,f,p,g){checkIntBI(s,p,g,i,f,7);let m=Number(s&BigInt(4294967295));i[f++]=m,m>>=8,i[f++]=m,m>>=8,i[f++]=m,m>>=8,i[f++]=m;let _=Number(s>>BigInt(32)&BigInt(4294967295));return i[f++]=_,_>>=8,i[f++]=_,_>>=8,i[f++]=_,_>>=8,i[f++]=_,f}function wrtBigUInt64BE(i,s,f,p,g){checkIntBI(s,p,g,i,f,7);let m=Number(s&BigInt(4294967295));i[f+7]=m,m>>=8,i[f+6]=m,m>>=8,i[f+5]=m,m>>=8,i[f+4]=m;let _=Number(s>>BigInt(32)&BigInt(4294967295));return i[f+3]=_,_>>=8,i[f+2]=_,_>>=8,i[f+1]=_,_>>=8,i[f]=_,f+8}function checkIEEE754(i,s,f,p,g,m){if(f+p>i.length||f<0)throw RangeError("Index out of range")}function writeFloat(i,s,p,g,m){return s=+s,p>>>=0,m||checkIEEE754(i,s,p,4,34028234663852886e22,-34028234663852886e22),f.write(i,s,p,g,23,4),p+4}function writeDouble(i,s,p,g,m){return s=+s,p>>>=0,m||checkIEEE754(i,s,p,8,17976931348623157e292,-17976931348623157e292),f.write(i,s,p,g,52,8),p+8}i.Buffer=Buffer3,i.SlowBuffer=SlowBuffer,i.INSPECT_MAX_BYTES=50,i.kMaxLength=2147483647,Buffer3.TYPED_ARRAY_SUPPORT=typedArraySupport(),Buffer3.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer3.prototype,"parent",{enumerable:!0,get:function(){if(Buffer3.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer3.prototype,"offset",{enumerable:!0,get:function(){if(Buffer3.isBuffer(this))return this.byteOffset}}),Buffer3.poolSize=8192,Buffer3.from=function(i,s,f){return from(i,s,f)},Object.setPrototypeOf(Buffer3.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer3,Uint8Array),Buffer3.alloc=function(i,s,f){return alloc(i,s,f)},Buffer3.allocUnsafe=function(i){return allocUnsafe(i)},Buffer3.allocUnsafeSlow=function(i){return allocUnsafe(i)},Buffer3.isBuffer=function(i){return null!=i&&!0===i._isBuffer&&i!==Buffer3.prototype},Buffer3.compare=function(i,s){if(isInstance(i,Uint8Array)&&(i=Buffer3.from(i,i.offset,i.byteLength)),isInstance(s,Uint8Array)&&(s=Buffer3.from(s,s.offset,s.byteLength)),!Buffer3.isBuffer(i)||!Buffer3.isBuffer(s))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===s)return 0;let f=i.length,p=s.length;for(let g=0,m=Math.min(f,p);g<m;++g)if(i[g]!==s[g]){f=i[g],p=s[g];break}return f<p?-1:p<f?1:0},Buffer3.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer3.concat=function(i,s){let f;if(!Array.isArray(i))throw TypeError('"list" argument must be an Array of Buffers');if(0===i.length)return Buffer3.alloc(0);if(void 0===s)for(f=0,s=0;f<i.length;++f)s+=i[f].length;let p=Buffer3.allocUnsafe(s),g=0;for(f=0;f<i.length;++f){let s=i[f];if(isInstance(s,Uint8Array))g+s.length>p.length?(Buffer3.isBuffer(s)||(s=Buffer3.from(s)),s.copy(p,g)):Uint8Array.prototype.set.call(p,s,g);else if(Buffer3.isBuffer(s))s.copy(p,g);else throw TypeError('"list" argument must be an Array of Buffers');g+=s.length}return p},Buffer3.byteLength=byteLength,Buffer3.prototype._isBuffer=!0,Buffer3.prototype.swap16=function(){let i=this.length;if(i%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<i;s+=2)swap(this,s,s+1);return this},Buffer3.prototype.swap32=function(){let i=this.length;if(i%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<i;s+=4)swap(this,s,s+3),swap(this,s+1,s+2);return this},Buffer3.prototype.swap64=function(){let i=this.length;if(i%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<i;s+=8)swap(this,s,s+7),swap(this,s+1,s+6),swap(this,s+2,s+5),swap(this,s+3,s+4);return this},Buffer3.prototype.toString=function(){let i=this.length;return 0===i?"":0==arguments.length?utf8Slice(this,0,i):slowToString.apply(this,arguments)},Buffer3.prototype.toLocaleString=Buffer3.prototype.toString,Buffer3.prototype.equals=function(i){if(!Buffer3.isBuffer(i))throw TypeError("Argument must be a Buffer");return this===i||0===Buffer3.compare(this,i)},Buffer3.prototype.inspect=function(){let s="",f=i.INSPECT_MAX_BYTES;return s=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(s+=" ... "),"<Buffer "+s+">"},p&&(Buffer3.prototype[p]=Buffer3.prototype.inspect),Buffer3.prototype.compare=function(i,s,f,p,g){if(isInstance(i,Uint8Array)&&(i=Buffer3.from(i,i.offset,i.byteLength)),!Buffer3.isBuffer(i))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(void 0===s&&(s=0),void 0===f&&(f=i?i.length:0),void 0===p&&(p=0),void 0===g&&(g=this.length),s<0||f>i.length||p<0||g>this.length)throw RangeError("out of range index");if(p>=g&&s>=f)return 0;if(p>=g)return -1;if(s>=f)return 1;if(s>>>=0,f>>>=0,p>>>=0,g>>>=0,this===i)return 0;let m=g-p,_=f-s,w=Math.min(m,_),E=this.slice(p,g),I=i.slice(s,f);for(let i=0;i<w;++i)if(E[i]!==I[i]){m=E[i],_=I[i];break}return m<_?-1:_<m?1:0},Buffer3.prototype.includes=function(i,s,f){return -1!==this.indexOf(i,s,f)},Buffer3.prototype.indexOf=function(i,s,f){return bidirectionalIndexOf(this,i,s,f,!0)},Buffer3.prototype.lastIndexOf=function(i,s,f){return bidirectionalIndexOf(this,i,s,f,!1)},Buffer3.prototype.write=function(i,s,f,p){if(void 0===s)p="utf8",f=this.length,s=0;else if(void 0===f&&"string"==typeof s)p=s,f=this.length,s=0;else if(isFinite(s))s>>>=0,isFinite(f)?(f>>>=0,void 0===p&&(p="utf8")):(p=f,f=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let g=this.length-s;if((void 0===f||f>g)&&(f=g),i.length>0&&(f<0||s<0)||s>this.length)throw RangeError("Attempt to write outside buffer bounds");p||(p="utf8");let m=!1;for(;;)switch(p){case"hex":return hexWrite(this,i,s,f);case"utf8":case"utf-8":return utf8Write(this,i,s,f);case"ascii":case"latin1":case"binary":return asciiWrite(this,i,s,f);case"base64":return base64Write(this,i,s,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,i,s,f);default:if(m)throw TypeError("Unknown encoding: "+p);p=(""+p).toLowerCase(),m=!0}},Buffer3.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer3.prototype.slice=function(i,s){let f=this.length;i=~~i,s=void 0===s?f:~~s,i<0?(i+=f)<0&&(i=0):i>f&&(i=f),s<0?(s+=f)<0&&(s=0):s>f&&(s=f),s<i&&(s=i);let p=this.subarray(i,s);return Object.setPrototypeOf(p,Buffer3.prototype),p},Buffer3.prototype.readUintLE=Buffer3.prototype.readUIntLE=function(i,s,f){i>>>=0,s>>>=0,f||checkOffset(i,s,this.length);let p=this[i],g=1,m=0;for(;++m<s&&(g*=256);)p+=this[i+m]*g;return p},Buffer3.prototype.readUintBE=Buffer3.prototype.readUIntBE=function(i,s,f){i>>>=0,s>>>=0,f||checkOffset(i,s,this.length);let p=this[i+--s],g=1;for(;s>0&&(g*=256);)p+=this[i+--s]*g;return p},Buffer3.prototype.readUint8=Buffer3.prototype.readUInt8=function(i,s){return i>>>=0,s||checkOffset(i,1,this.length),this[i]},Buffer3.prototype.readUint16LE=Buffer3.prototype.readUInt16LE=function(i,s){return i>>>=0,s||checkOffset(i,2,this.length),this[i]|this[i+1]<<8},Buffer3.prototype.readUint16BE=Buffer3.prototype.readUInt16BE=function(i,s){return i>>>=0,s||checkOffset(i,2,this.length),this[i]<<8|this[i+1]},Buffer3.prototype.readUint32LE=Buffer3.prototype.readUInt32LE=function(i,s){return i>>>=0,s||checkOffset(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+16777216*this[i+3]},Buffer3.prototype.readUint32BE=Buffer3.prototype.readUInt32BE=function(i,s){return i>>>=0,s||checkOffset(i,4,this.length),16777216*this[i]+(this[i+1]<<16|this[i+2]<<8|this[i+3])},Buffer3.prototype.readBigUInt64LE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");let s=this[i],f=this[i+7];(void 0===s||void 0===f)&&boundsError(i,this.length-8);let p=s+256*this[++i]+65536*this[++i]+16777216*this[++i],g=this[++i]+256*this[++i]+65536*this[++i]+16777216*f;return BigInt(p)+(BigInt(g)<<BigInt(32))}),Buffer3.prototype.readBigUInt64BE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");let s=this[i],f=this[i+7];(void 0===s||void 0===f)&&boundsError(i,this.length-8);let p=16777216*s+65536*this[++i]+256*this[++i]+this[++i],g=16777216*this[++i]+65536*this[++i]+256*this[++i]+f;return(BigInt(p)<<BigInt(32))+BigInt(g)}),Buffer3.prototype.readIntLE=function(i,s,f){i>>>=0,s>>>=0,f||checkOffset(i,s,this.length);let p=this[i],g=1,m=0;for(;++m<s&&(g*=256);)p+=this[i+m]*g;return p>=(g*=128)&&(p-=Math.pow(2,8*s)),p},Buffer3.prototype.readIntBE=function(i,s,f){i>>>=0,s>>>=0,f||checkOffset(i,s,this.length);let p=s,g=1,m=this[i+--p];for(;p>0&&(g*=256);)m+=this[i+--p]*g;return m>=(g*=128)&&(m-=Math.pow(2,8*s)),m},Buffer3.prototype.readInt8=function(i,s){return(i>>>=0,s||checkOffset(i,1,this.length),128&this[i])?-((255-this[i]+1)*1):this[i]},Buffer3.prototype.readInt16LE=function(i,s){i>>>=0,s||checkOffset(i,2,this.length);let f=this[i]|this[i+1]<<8;return 32768&f?4294901760|f:f},Buffer3.prototype.readInt16BE=function(i,s){i>>>=0,s||checkOffset(i,2,this.length);let f=this[i+1]|this[i]<<8;return 32768&f?4294901760|f:f},Buffer3.prototype.readInt32LE=function(i,s){return i>>>=0,s||checkOffset(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},Buffer3.prototype.readInt32BE=function(i,s){return i>>>=0,s||checkOffset(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},Buffer3.prototype.readBigInt64LE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");let s=this[i],f=this[i+7];(void 0===s||void 0===f)&&boundsError(i,this.length-8);let p=this[i+4]+256*this[i+5]+65536*this[i+6]+(f<<24);return(BigInt(p)<<BigInt(32))+BigInt(s+256*this[++i]+65536*this[++i]+16777216*this[++i])}),Buffer3.prototype.readBigInt64BE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");let s=this[i],f=this[i+7];(void 0===s||void 0===f)&&boundsError(i,this.length-8);let p=(s<<24)+65536*this[++i]+256*this[++i]+this[++i];return(BigInt(p)<<BigInt(32))+BigInt(16777216*this[++i]+65536*this[++i]+256*this[++i]+f)}),Buffer3.prototype.readFloatLE=function(i,s){return i>>>=0,s||checkOffset(i,4,this.length),f.read(this,i,!0,23,4)},Buffer3.prototype.readFloatBE=function(i,s){return i>>>=0,s||checkOffset(i,4,this.length),f.read(this,i,!1,23,4)},Buffer3.prototype.readDoubleLE=function(i,s){return i>>>=0,s||checkOffset(i,8,this.length),f.read(this,i,!0,52,8)},Buffer3.prototype.readDoubleBE=function(i,s){return i>>>=0,s||checkOffset(i,8,this.length),f.read(this,i,!1,52,8)},Buffer3.prototype.writeUintLE=Buffer3.prototype.writeUIntLE=function(i,s,f,p){if(i=+i,s>>>=0,f>>>=0,!p){let p=Math.pow(2,8*f)-1;checkInt(this,i,s,f,p,0)}let g=1,m=0;for(this[s]=255&i;++m<f&&(g*=256);)this[s+m]=i/g&255;return s+f},Buffer3.prototype.writeUintBE=Buffer3.prototype.writeUIntBE=function(i,s,f,p){if(i=+i,s>>>=0,f>>>=0,!p){let p=Math.pow(2,8*f)-1;checkInt(this,i,s,f,p,0)}let g=f-1,m=1;for(this[s+g]=255&i;--g>=0&&(m*=256);)this[s+g]=i/m&255;return s+f},Buffer3.prototype.writeUint8=Buffer3.prototype.writeUInt8=function(i,s,f){return i=+i,s>>>=0,f||checkInt(this,i,s,1,255,0),this[s]=255&i,s+1},Buffer3.prototype.writeUint16LE=Buffer3.prototype.writeUInt16LE=function(i,s,f){return i=+i,s>>>=0,f||checkInt(this,i,s,2,65535,0),this[s]=255&i,this[s+1]=i>>>8,s+2},Buffer3.prototype.writeUint16BE=Buffer3.prototype.writeUInt16BE=function(i,s,f){return i=+i,s>>>=0,f||checkInt(this,i,s,2,65535,0),this[s]=i>>>8,this[s+1]=255&i,s+2},Buffer3.prototype.writeUint32LE=Buffer3.prototype.writeUInt32LE=function(i,s,f){return i=+i,s>>>=0,f||checkInt(this,i,s,4,4294967295,0),this[s+3]=i>>>24,this[s+2]=i>>>16,this[s+1]=i>>>8,this[s]=255&i,s+4},Buffer3.prototype.writeUint32BE=Buffer3.prototype.writeUInt32BE=function(i,s,f){return i=+i,s>>>=0,f||checkInt(this,i,s,4,4294967295,0),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=255&i,s+4},Buffer3.prototype.writeBigUInt64LE=defineBigIntMethod(function(i,s=0){return wrtBigUInt64LE(this,i,s,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer3.prototype.writeBigUInt64BE=defineBigIntMethod(function(i,s=0){return wrtBigUInt64BE(this,i,s,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer3.prototype.writeIntLE=function(i,s,f,p){if(i=+i,s>>>=0,!p){let p=Math.pow(2,8*f-1);checkInt(this,i,s,f,p-1,-p)}let g=0,m=1,_=0;for(this[s]=255&i;++g<f&&(m*=256);)i<0&&0===_&&0!==this[s+g-1]&&(_=1),this[s+g]=(i/m>>0)-_&255;return s+f},Buffer3.prototype.writeIntBE=function(i,s,f,p){if(i=+i,s>>>=0,!p){let p=Math.pow(2,8*f-1);checkInt(this,i,s,f,p-1,-p)}let g=f-1,m=1,_=0;for(this[s+g]=255&i;--g>=0&&(m*=256);)i<0&&0===_&&0!==this[s+g+1]&&(_=1),this[s+g]=(i/m>>0)-_&255;return s+f},Buffer3.prototype.writeInt8=function(i,s,f){return i=+i,s>>>=0,f||checkInt(this,i,s,1,127,-128),i<0&&(i=255+i+1),this[s]=255&i,s+1},Buffer3.prototype.writeInt16LE=function(i,s,f){return i=+i,s>>>=0,f||checkInt(this,i,s,2,32767,-32768),this[s]=255&i,this[s+1]=i>>>8,s+2},Buffer3.prototype.writeInt16BE=function(i,s,f){return i=+i,s>>>=0,f||checkInt(this,i,s,2,32767,-32768),this[s]=i>>>8,this[s+1]=255&i,s+2},Buffer3.prototype.writeInt32LE=function(i,s,f){return i=+i,s>>>=0,f||checkInt(this,i,s,4,2147483647,-2147483648),this[s]=255&i,this[s+1]=i>>>8,this[s+2]=i>>>16,this[s+3]=i>>>24,s+4},Buffer3.prototype.writeInt32BE=function(i,s,f){return i=+i,s>>>=0,f||checkInt(this,i,s,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=255&i,s+4},Buffer3.prototype.writeBigInt64LE=defineBigIntMethod(function(i,s=0){return wrtBigUInt64LE(this,i,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer3.prototype.writeBigInt64BE=defineBigIntMethod(function(i,s=0){return wrtBigUInt64BE(this,i,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer3.prototype.writeFloatLE=function(i,s,f){return writeFloat(this,i,s,!0,f)},Buffer3.prototype.writeFloatBE=function(i,s,f){return writeFloat(this,i,s,!1,f)},Buffer3.prototype.writeDoubleLE=function(i,s,f){return writeDouble(this,i,s,!0,f)},Buffer3.prototype.writeDoubleBE=function(i,s,f){return writeDouble(this,i,s,!1,f)},Buffer3.prototype.copy=function(i,s,f,p){if(!Buffer3.isBuffer(i))throw TypeError("argument should be a Buffer");if(f||(f=0),p||0===p||(p=this.length),s>=i.length&&(s=i.length),s||(s=0),p>0&&p<f&&(p=f),p===f||0===i.length||0===this.length)return 0;if(s<0)throw RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw RangeError("Index out of range");if(p<0)throw RangeError("sourceEnd out of bounds");p>this.length&&(p=this.length),i.length-s<p-f&&(p=i.length-s+f);let g=p-f;return this===i&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(s,f,p):Uint8Array.prototype.set.call(i,this.subarray(f,p),s),g},Buffer3.prototype.fill=function(i,s,f,p){let g;if("string"==typeof i){if("string"==typeof s?(p=s,s=0,f=this.length):"string"==typeof f&&(p=f,f=this.length),void 0!==p&&"string"!=typeof p)throw TypeError("encoding must be a string");if("string"==typeof p&&!Buffer3.isEncoding(p))throw TypeError("Unknown encoding: "+p);if(1===i.length){let s=i.charCodeAt(0);("utf8"===p&&s<128||"latin1"===p)&&(i=s)}}else"number"==typeof i?i&=255:"boolean"==typeof i&&(i=Number(i));if(s<0||this.length<s||this.length<f)throw RangeError("Out of range index");if(f<=s)return this;if(s>>>=0,f=void 0===f?this.length:f>>>0,i||(i=0),"number"==typeof i)for(g=s;g<f;++g)this[g]=i;else{let m=Buffer3.isBuffer(i)?i:Buffer3.from(i,p),_=m.length;if(0===_)throw TypeError('The value "'+i+'" is invalid for argument "value"');for(g=0;g<f-s;++g)this[g+s]=m[g%_]}return this};var g={};function E3(i,s,f){g[i]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}function addNumericalSeparator(i){let s="",f=i.length,p="-"===i[0]?1:0;for(;f>=p+4;f-=3)s=`_${i.slice(f-3,f)}${s}`;return`${i.slice(0,f)}${s}`}function checkBounds(i,s,f){validateNumber(s,"offset"),(void 0===i[s]||void 0===i[s+f])&&boundsError(s,i.length-(f+1))}function checkIntBI(i,s,f,p,m,_){if(i>f||i<s){let p;let m="bigint"==typeof s?"n":"";throw p=_>3?0===s||s===BigInt(0)?`>= 0${m} and < 2${m} ** ${(_+1)*8}${m}`:`>= -(2${m} ** ${(_+1)*8-1}${m}) and < 2 ** ${(_+1)*8-1}${m}`:`>= ${s}${m} and <= ${f}${m}`,new g.ERR_OUT_OF_RANGE("value",p,i)}checkBounds(p,m,_)}function validateNumber(i,s){if("number"!=typeof i)throw new g.ERR_INVALID_ARG_TYPE(s,"number",i)}function boundsError(i,s,f){if(Math.floor(i)!==i)throw validateNumber(i,f),new g.ERR_OUT_OF_RANGE(f||"offset","an integer",i);if(s<0)throw new g.ERR_BUFFER_OUT_OF_BOUNDS;throw new g.ERR_OUT_OF_RANGE(f||"offset",`>= ${f?1:0} and <= ${s}`,i)}E3("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),E3("ERR_INVALID_ARG_TYPE",function(i,s){return`The "${i}" argument must be of type number. Received type ${typeof s}`},TypeError),E3("ERR_OUT_OF_RANGE",function(i,s,f){let p=`The value of "${i}" is out of range.`,g=f;return Number.isInteger(f)&&Math.abs(f)>4294967296?g=addNumericalSeparator(String(f)):"bigint"==typeof f&&(g=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(g=addNumericalSeparator(g)),g+="n"),p+=` It must be ${s}. Received ${g}`},RangeError);var m=/[^+/0-9A-Za-z-_]/g;function base64clean(i){if((i=(i=i.split("=")[0]).trim().replace(m,"")).length<2)return"";for(;i.length%4!=0;)i+="=";return i}function utf8ToBytes(i,s){let f;s=s||1/0;let p=i.length,g=null,m=[];for(let _=0;_<p;++_){if((f=i.charCodeAt(_))>55295&&f<57344){if(!g){if(f>56319||_+1===p){(s-=3)>-1&&m.push(239,191,189);continue}g=f;continue}if(f<56320){(s-=3)>-1&&m.push(239,191,189),g=f;continue}f=(g-55296<<10|f-56320)+65536}else g&&(s-=3)>-1&&m.push(239,191,189);if(g=null,f<128){if((s-=1)<0)break;m.push(f)}else if(f<2048){if((s-=2)<0)break;m.push(f>>6|192,63&f|128)}else if(f<65536){if((s-=3)<0)break;m.push(f>>12|224,f>>6&63|128,63&f|128)}else if(f<1114112){if((s-=4)<0)break;m.push(f>>18|240,f>>12&63|128,f>>6&63|128,63&f|128)}else throw Error("Invalid code point")}return m}function asciiToBytes(i){let s=[];for(let f=0;f<i.length;++f)s.push(255&i.charCodeAt(f));return s}function utf16leToBytes(i,s){let f,p;let g=[];for(let m=0;m<i.length&&!((s-=2)<0);++m)p=(f=i.charCodeAt(m))>>8,g.push(f%256),g.push(p);return g}function base64ToBytes(i){return s.toByteArray(base64clean(i))}function blitBuffer(i,s,f,p){let g;for(g=0;g<p&&!(g+f>=s.length)&&!(g>=i.length);++g)s[g+f]=i[g];return g}function isInstance(i,s){return i instanceof s||null!=i&&null!=i.constructor&&null!=i.constructor.name&&i.constructor.name===s.name}var _=function(){let i="0123456789abcdef",s=Array(256);for(let f=0;f<16;++f){let p=16*f;for(let g=0;g<16;++g)s[p+g]=i[f]+i[g]}return s}();function defineBigIntMethod(i){return"undefined"==typeof BigInt?BufferBigIntNotDefined:i}function BufferBigIntNotDefined(){throw Error("BigInt not supported")}}});function c(i){return null!=i&&"object"==typeof i&&!0===i["@@functional/placeholder"]}function h(i){return function t(s){return 0==arguments.length||c(s)?t:i.apply(this,arguments)}}function u(i){return function t(s,f){switch(arguments.length){case 0:return t;case 1:return c(s)?t:h(function(f){return i(s,f)});default:return c(s)&&c(f)?t:c(s)?h(function(s){return i(s,f)}):c(f)?h(function(f){return i(s,f)}):i(s,f)}}}function b(i,s){switch(i){case 0:return function(){return s.apply(this,arguments)};case 1:return function(i){return s.apply(this,arguments)};case 2:return function(i,f){return s.apply(this,arguments)};case 3:return function(i,f,p){return s.apply(this,arguments)};case 4:return function(i,f,p,g){return s.apply(this,arguments)};case 5:return function(i,f,p,g,m){return s.apply(this,arguments)};case 6:return function(i,f,p,g,m,_){return s.apply(this,arguments)};case 7:return function(i,f,p,g,m,_,w){return s.apply(this,arguments)};case 8:return function(i,f,p,g,m,_,w,E){return s.apply(this,arguments)};case 9:return function(i,f,p,g,m,_,w,E,I){return s.apply(this,arguments)};case 10:return function(i,f,p,g,m,_,w,E,I,B){return s.apply(this,arguments)};default:throw Error("First argument to _arity must be a non-negative integer no greater than ten")}}function J(i,s,f){return function(){for(var p,g=[],m=0,_=i,w=0,E=!1;w<s.length||m<arguments.length;)w<s.length&&(!c(s[w])||m>=arguments.length)?p=s[w]:(p=arguments[m],m+=1),g[w]=p,c(p)?E=!0:_-=1,w+=1;return!E&&_<=0?f.apply(this,g):b(Math.max(0,_),J(i,g,f))}}var em=u(function(i,s){return 1===i?h(s):b(i,J(i,[],s))});function P(i){return function t(s,f,p){switch(arguments.length){case 0:return t;case 1:return c(s)?t:u(function(f,p){return i(s,f,p)});case 2:return c(s)&&c(f)?t:c(s)?u(function(s,p){return i(s,f,p)}):c(f)?u(function(f,p){return i(s,f,p)}):h(function(p){return i(s,f,p)});default:return c(s)&&c(f)&&c(p)?t:c(s)&&c(f)?u(function(s,f){return i(s,f,p)}):c(s)&&c(p)?u(function(s,p){return i(s,f,p)}):c(f)&&c(p)?u(function(f,p){return i(s,f,p)}):c(s)?h(function(s){return i(s,f,p)}):c(f)?h(function(f){return i(s,f,p)}):c(p)?h(function(p){return i(s,f,p)}):i(s,f,p)}}}var ev=Array.isArray||function(i){return null!=i&&i.length>=0&&"[object Array]"===Object.prototype.toString.call(i)};function ct(i){return null!=i&&"function"==typeof i["@@transducer/step"]}function D(i,s,f){return function(){if(0==arguments.length)return f();var p=arguments[arguments.length-1];if(!ev(p)){for(var g=0;g<i.length;){if("function"==typeof p[i[g]])return p[i[g]].apply(p,Array.prototype.slice.call(arguments,0,-1));g+=1}if(ct(p)){var m=s.apply(null,Array.prototype.slice.call(arguments,0,-1));return m(p)}}return f.apply(this,arguments)}}function pt(i){return i&&i["@@transducer/reduced"]?i:{"@@transducer/value":i,"@@transducer/reduced":!0}}var eb={init:function(){return this.xf["@@transducer/init"]()},result:function(i){return this.xf["@@transducer/result"](i)}};function Q(i){for(var s,f=[];!(s=i.next()).done;)f.push(s.value);return f}function Z(i,s,f){for(var p=0,g=f.length;p<g;){if(i(s,f[p]))return!0;p+=1}return!1}function ht(i){var s=String(i).match(/^function (\w*)/);return null==s?"":s[1]}function C(i,s){return Object.prototype.hasOwnProperty.call(s,i)}function Se(i,s){return i===s?0!==i||1/i==1/s:i!=i&&s!=s}var e_="function"==typeof Object.is?Object.is:Se,ew=Object.prototype.toString,eT=function(){return"[object Arguments]"===ew.call(arguments)?function(i){return"[object Arguments]"===ew.call(i)}:function(i){return C("callee",i)}}(),eS=!({toString:null}).propertyIsEnumerable("toString"),eA=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],eE=function(){return arguments.propertyIsEnumerable("length")}(),Ae=function(i,s){for(var f=0;f<i.length;){if(i[f]===s)return!0;f+=1}return!1},eC="function"!=typeof Object.keys||eE?h(function(i){if(Object(i)!==i)return[];var s,f,p=[],g=eE&&eT(i);for(s in i)C(s,i)&&(!g||"length"!==s)&&(p[p.length]=s);if(eS)for(f=eA.length-1;f>=0;)C(s=eA[f],i)&&!Ae(p,s)&&(p[p.length]=s),f-=1;return p}):h(function(i){return Object(i)!==i?[]:Object.keys(i)}),ex=h(function(i){return null===i?"Null":void 0===i?"Undefined":Object.prototype.toString.call(i).slice(8,-1)});function Bt(i,s,f,p){var g=Q(i);function a(i,s){return q(i,s,f.slice(),p.slice())}return!Z(function(i,s){return!Z(a,s,i)},Q(s),g)}function q(i,s,f,p){if(e_(i,s))return!0;var g=ex(i);if(g!==ex(s))return!1;if("function"==typeof i["fantasy-land/equals"]||"function"==typeof s["fantasy-land/equals"])return"function"==typeof i["fantasy-land/equals"]&&i["fantasy-land/equals"](s)&&"function"==typeof s["fantasy-land/equals"]&&s["fantasy-land/equals"](i);if("function"==typeof i.equals||"function"==typeof s.equals)return"function"==typeof i.equals&&i.equals(s)&&"function"==typeof s.equals&&s.equals(i);switch(g){case"Arguments":case"Array":case"Object":if("function"==typeof i.constructor&&"Promise"===ht(i.constructor))return i===s;break;case"Boolean":case"Number":case"String":if(!(typeof i==typeof s&&e_(i.valueOf(),s.valueOf())))return!1;break;case"Date":if(!e_(i.valueOf(),s.valueOf()))return!1;break;case"Error":return i.name===s.name&&i.message===s.message;case"RegExp":if(!(i.source===s.source&&i.global===s.global&&i.ignoreCase===s.ignoreCase&&i.multiline===s.multiline&&i.sticky===s.sticky&&i.unicode===s.unicode))return!1}for(var m=f.length-1;m>=0;){if(f[m]===i)return p[m]===s;m-=1}switch(g){case"Map":return i.size===s.size&&Bt(i.entries(),s.entries(),f.concat([i]),p.concat([s]));case"Set":return i.size===s.size&&Bt(i.values(),s.values(),f.concat([i]),p.concat([s]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var _=eC(i);if(_.length!==eC(s).length)return!1;var w=f.concat([i]),E=p.concat([s]);for(m=_.length-1;m>=0;){var I=_[m];if(!(C(I,s)&&q(s[I],i[I],w,E)))return!1;m-=1}return!0}var eI=u(function(i,s){return q(i,s,[],[])});function mt(i,s,f){var p,g;if("function"==typeof i.indexOf)switch(typeof s){case"number":if(0===s){for(p=1/s;f<i.length;){if(0===(g=i[f])&&1/g===p)return f;f+=1}return -1}if(s!=s){for(;f<i.length;){if("number"==typeof(g=i[f])&&g!=g)return f;f+=1}return -1}return i.indexOf(s,f);case"string":case"boolean":case"function":case"undefined":return i.indexOf(s,f);case"object":if(null===s)return i.indexOf(s,f)}for(;f<i.length;){if(eI(i[f],s))return f;f+=1}return -1}function gt(i,s){return mt(s,i,0)>=0}function T(i,s){for(var f=0,p=s.length,g=Array(p);f<p;)g[f]=i(s[f]),f+=1;return g}function k(i){return'"'+i.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var M=function(i){return(i<10?"0":"")+i},eB="function"==typeof Date.prototype.toISOString?function(i){return i.toISOString()}:function(i){return i.getUTCFullYear()+"-"+M(i.getUTCMonth()+1)+"-"+M(i.getUTCDate())+"T"+M(i.getUTCHours())+":"+M(i.getUTCMinutes())+":"+M(i.getUTCSeconds())+"."+(i.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function xt(i){return function(){return!i.apply(this,arguments)}}function G(i,s,f){for(var p=0,g=f.length;p<g;)s=i(s,f[p]),p+=1;return s}function yt(i,s){for(var f=0,p=s.length,g=[];f<p;)i(s[f])&&(g[g.length]=s[f]),f+=1;return g}function _t(i){return"[object Object]"===Object.prototype.toString.call(i)}var eO=function(){function r3(i,s){this.xf=s,this.f=i}return r3.prototype["@@transducer/init"]=eb.init,r3.prototype["@@transducer/result"]=eb.result,r3.prototype["@@transducer/step"]=function(i,s){return this.f(s)?this.xf["@@transducer/step"](i,s):i},r3}(),ek=u(D(["fantasy-land/filter","filter"],function(i){return function(s){return new eO(i,s)}},function(i,s){return _t(s)?G(function(f,p){return i(s[p])&&(f[p]=s[p]),f},{},eC(s)):yt(i,s)})),eR=u(function(i,s){return ek(xt(i),s)});function rt(i,s){var e=function(f){var p=s.concat([i]);return gt(f,p)?"<Circular>":rt(f,p)},o=function(i,s){return T(function(s){return k(s)+": "+e(i[s])},s.slice().sort())};switch(Object.prototype.toString.call(i)){case"[object Arguments]":return"(function() { return arguments; }("+T(e,i).join(", ")+"))";case"[object Array]":return"["+T(e,i).concat(o(i,eR(function(i){return/^\d+$/.test(i)},eC(i)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof i?"new Boolean("+e(i.valueOf())+")":i.toString();case"[object Date]":return"new Date("+(isNaN(i.valueOf())?e(NaN):k(eB(i)))+")";case"[object Map]":return"new Map("+e(Array.from(i))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof i?"new Number("+e(i.valueOf())+")":1/i==-1/0?"-0":i.toString(10);case"[object Set]":return"new Set("+e(Array.from(i).sort())+")";case"[object String]":return"object"==typeof i?"new String("+e(i.valueOf())+")":k(i);case"[object Undefined]":return"undefined";default:if("function"==typeof i.toString){var f=i.toString();if("[object Object]"!==f)return f}return"{"+o(i,eC(i)).join(", ")+"}"}}var eU=h(function(i){return rt(i,[])}),eL=u(function(i,s){if(i===s)return s;function o(i,s){if(i>s!=s>i)return s>i?s:i}var f=o(i,s);if(void 0!==f)return f;var p=o(typeof i,typeof s);if(void 0!==p)return p===typeof i?i:s;var g=eU(i),m=o(g,eU(s));return void 0!==m&&m===g?i:s}),eP=function(){function r3(i,s){this.xf=s,this.f=i}return r3.prototype["@@transducer/init"]=eb.init,r3.prototype["@@transducer/result"]=eb.result,r3.prototype["@@transducer/step"]=function(i,s){return this.xf["@@transducer/step"](i,this.f(s))},r3}(),ej=u(D(["fantasy-land/map","map"],function(i){return function(s){return new eP(i,s)}},function(i,s){switch(Object.prototype.toString.call(s)){case"[object Function]":return em(s.length,function(){return i.call(this,s.apply(this,arguments))});case"[object Object]":return G(function(f,p){return f[p]=i(s[p]),f},{},eC(s));default:return T(i,s)}})),eM=Number.isInteger||function(i){return i<<0===i};function H(i){return"[object String]"===Object.prototype.toString.call(i)}var eN=u(function(i,s){var f=i<0?s.length+i:i;return H(s)?s.charAt(f):s[f]}),eF=u(function(i,s){if(null!=s)return eM(i)?eN(i,s):s[i]}),eD=u(function(i,s){return ej(eF(i),s)}),eZ=h(function(i){return!!ev(i)||!(!i||"object"!=typeof i||H(i))&&(0===i.length||i.length>0&&i.hasOwnProperty(0)&&i.hasOwnProperty(i.length-1))}),e$="u">typeof Symbol?Symbol.iterator:"@@iterator";function vt(i,s,f){return function(p,g,m){if(eZ(m))return i(p,g,m);if(null==m)return g;if("function"==typeof m["fantasy-land/reduce"])return s(p,g,m,"fantasy-land/reduce");if(null!=m[e$])return f(p,g,m[e$]());if("function"==typeof m.next)return f(p,g,m);if("function"==typeof m.reduce)return s(p,g,m,"reduce");throw TypeError("reduce: list must be array or iterable")}}function Ot(i,s,f){for(var p=0,g=f.length;p<g;){if((s=i["@@transducer/step"](s,f[p]))&&s["@@transducer/reduced"]){s=s["@@transducer/value"];break}p+=1}return i["@@transducer/result"](s)}var eW=u(function(i,s){return b(i.length,function(){return i.apply(s,arguments)})}),ez=vt(Ot,function(i,s,f,p){return i["@@transducer/result"](f[p](eW(i["@@transducer/step"],i),s))},function(i,s,f){for(var p=f.next();!p.done;){if((s=i["@@transducer/step"](s,p.value))&&s["@@transducer/reduced"]){s=s["@@transducer/value"];break}p=f.next()}return i["@@transducer/result"](s)}),eV=function(){function r3(i){this.f=i}return r3.prototype["@@transducer/init"]=function(){throw Error("init not implemented on XWrap")},r3.prototype["@@transducer/result"]=function(i){return i},r3.prototype["@@transducer/step"]=function(i,s){return this.f(i,s)},r3}();function At(i){return new eV(i)}var eK=P(function(i,s,f){return ez("function"==typeof i?At(i):i,s,f)});function bt(i,s){return function(){return s.call(this,i.apply(this,arguments))}}function $(i,s){return function(){var f=arguments.length;if(0===f)return s();var p=arguments[f-1];return ev(p)||"function"!=typeof p[i]?s.apply(this,arguments):p[i].apply(p,Array.prototype.slice.call(arguments,0,f-1))}}var eG=P($("slice",function(i,s,f){return Array.prototype.slice.call(f,i,s)})),eH=h($("tail",eG(1,1/0)));function X(){if(0==arguments.length)throw Error("pipe requires at least one argument");return b(arguments[0].length,eK(bt,arguments[0],eH(arguments)))}var eX=u(function(i,s){return em(eK(eL,0,eD("length",s)),function(){var f=arguments,p=this;return i.apply(p,T(function(i){return i.apply(p,f)},s))})}),eJ=u(function(i,s){return null==s||s!=s?i:s}),eY=function(){function r3(i,s){this.xf=s,this.f=i,this.found=!1}return r3.prototype["@@transducer/init"]=eb.init,r3.prototype["@@transducer/result"]=function(i){return this.found||(i=this.xf["@@transducer/step"](i,void 0)),this.xf["@@transducer/result"](i)},r3.prototype["@@transducer/step"]=function(i,s){return this.f(s)&&(this.found=!0,i=pt(this.xf["@@transducer/step"](i,s))),i},r3}(),eQ=u(D(["find"],function(i){return function(s){return new eY(i,s)}},function(i,s){for(var f=0,p=s.length;f<p;){if(i(s[f]))return s[f];f+=1}})),e0=h(function(i){return eX(function(){return Array.prototype.slice.call(arguments,0)},i)}),e2=u(function(i,s){return i.map(function(i){for(var f,p=s,g=0;g<i.length;){if(null==p)return;p=eM(f=i[g])?eN(f,p):p[f],g+=1}return p})}),e1=u(function(i,s){return e2([i],s)[0]}),e3=P(function(i,s,f){return eI(i,eF(s,f))}),e6=class extends Error{name="InvalidSchedulerLocation"},e8=class extends Error{name="SchedulerTagNotFound"},e5=class extends Error{name="TransactionNotFound"},Ct=i=>X(eJ([]),eQ(e3(i,"name")),eJ({}),eF("value")),re=i=>X(s=>{if(!s)throw new e5(i);return s},eF("tags"),eJ([]));function oe({fetch:i,GRAPHQL_URL:s}){return async({query:f,variables:p})=>i(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:f,variables:p})}).then(i=>i.json())}function ne({fetch:i,GRAPHQL_URL:s}){let f=oe({fetch:i,GRAPHQL_URL:s}),p=It({fetch:i,GRAPHQL_URL:s}),g=`
    query GetTransactions ($transactionIds: [ID!]!) {
      transactions(ids: $transactionIds) {
        edges {
          node {
            tags {
              name
              value
            }
          }
        }
      }
    }
  `;return async i=>f({query:g,variables:{transactionIds:[i]}}).then(e1(["data","transactions","edges","0","node"])).then(re(`Process ${i} was not found on gateway`)).then(Ct("Scheduler")).then(i=>{if(!i)throw new e8('No "Scheduler" tag found on process');return p(i)})}function It({fetch:i,GRAPHQL_URL:s}){let f=oe({fetch:i,GRAPHQL_URL:s}),p=`
    query GetSchedulerLocation ($owner: String!) {
      transactions (
        owners: [$owner]
        tags: [
          { name: "Data-Protocol", values: ["ao"] },
          { name: "Type", values: ["Scheduler-Location"] }
        ]
        # Only need the most recent Scheduler-Location
        sort: HEIGHT_DESC
        first: 1
      ) {
        edges {
          node {
            tags {
              name
              value
            }
          }
        }
      }
    }
  `;return async i=>f({query:p,variables:{owner:i}}).then(e1(["data","transactions","edges","0","node"])).then(re(`Could not find 'Scheduler-Location' owner by wallet ${i}`)).then(e0([Ct("Url"),Ct("Time-To-Live")])).then(([s,f])=>{if(!s)throw new e6('No "Url" tag found on Scheduler-Location');if(!f)throw new e6('No "Time-To-Live" tag found on Scheduler-Location');return{url:s,ttl:f,owner:i}})}var e4="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,e9=new Set,e7="object"==typeof z&&z?z:{},se=(i,s,f,p)=>{"function"==typeof e7.emitWarning?e7.emitWarning(i,s,f,p):console.error(`[${f}] ${s}: ${i}`)},te=globalThis.AbortController,tt=globalThis.AbortSignal;if(typeof te>"u"){tt=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(i,s){this._onabort.push(s)}},te=class{constructor(){t()}signal=new tt;abort(i){if(!this.signal.aborted){for(let s of(this.signal.reason=i,this.signal.aborted=!0,this.signal._onabort))s(i);this.signal.onabort?.(i)}}};let i=e7.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{i&&(i=!1,se("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var sr=i=>!e9.has(i);Symbol("type");var j=i=>i&&i===Math.floor(i)&&i>0&&isFinite(i),fe=i=>j(i)?i<=256?Uint8Array:i<=65536?Uint16Array:i<=4294967296?Uint32Array:i<=Number.MAX_SAFE_INTEGER?tr:null:null,tr=class extends Array{constructor(i){super(i),this.fill(0)}},tn=class r{heap;length;static #e=!1;static create(i){let s=fe(i);if(!s)return[];r.#e=!0;let f=new r(i,s);return r.#e=!1,f}constructor(i,s){if(!r.#e)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new s(i),this.length=0}push(i){this.heap[this.length++]=i}pop(){return this.heap[--this.length]}},ti=class r2{#e;#t;#r;#n;#i;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#a;#s;#o;#u;#c;#l;#f;#h;#d;#p;#g;#y;#m;#v;#b;#_;#w;static unsafeExposeInternals(i){return{starts:i.#m,ttls:i.#v,sizes:i.#y,keyMap:i.#o,keyList:i.#u,valList:i.#c,next:i.#l,prev:i.#f,get head(){return i.#h},get tail(){return i.#d},free:i.#p,isBackgroundFetch:s=>i.#T(s),backgroundFetch:(s,f,p,g)=>i.#S(s,f,p,g),moveToTail:s=>i.#A(s),indexes:s=>i.#E(s),rindexes:s=>i.#C(s),isStale:s=>i.#x(s)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#s}get size(){return this.#a}get fetchMethod(){return this.#i}get dispose(){return this.#r}get disposeAfter(){return this.#n}constructor(i){let{max:s=0,ttl:f,ttlResolution:p=1,ttlAutopurge:g,updateAgeOnGet:m,updateAgeOnHas:_,allowStale:w,dispose:E,disposeAfter:I,noDisposeOnSet:B,noUpdateTTL:O,maxSize:R=0,maxEntrySize:U=0,sizeCalculation:N,fetchMethod:F,noDeleteOnFetchRejection:z,noDeleteOnStaleGet:V,allowStaleOnFetchRejection:K,allowStaleOnFetchAbort:Y,ignoreFetchAbort:ee}=i;if(0!==s&&!j(s))throw TypeError("max option must be a nonnegative integer");let et=s?fe(s):Array;if(!et)throw Error("invalid max value: "+s);if(this.#e=s,this.#t=R,this.maxEntrySize=U||this.#t,this.sizeCalculation=N,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw TypeError("sizeCalculation set to non-function")}if(void 0!==F&&"function"!=typeof F)throw TypeError("fetchMethod must be a function if specified");if(this.#i=F,this.#_=!!F,this.#o=new Map,this.#u=Array(s).fill(void 0),this.#c=Array(s).fill(void 0),this.#l=new et(s),this.#f=new et(s),this.#h=0,this.#d=0,this.#p=tn.create(s),this.#a=0,this.#s=0,"function"==typeof E&&(this.#r=E),"function"==typeof I?(this.#n=I,this.#g=[]):(this.#n=void 0,this.#g=void 0),this.#b=!!this.#r,this.#w=!!this.#n,this.noDisposeOnSet=!!B,this.noUpdateTTL=!!O,this.noDeleteOnFetchRejection=!!z,this.allowStaleOnFetchRejection=!!K,this.allowStaleOnFetchAbort=!!Y,this.ignoreFetchAbort=!!ee,0!==this.maxEntrySize){if(0!==this.#t&&!j(this.#t))throw TypeError("maxSize must be a positive integer if specified");if(!j(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#I()}if(this.allowStale=!!w,this.noDeleteOnStaleGet=!!V,this.updateAgeOnGet=!!m,this.updateAgeOnHas=!!_,this.ttlResolution=j(p)||0===p?p:1,this.ttlAutopurge=!!g,this.ttl=f||0,this.ttl){if(!j(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#B()}if(0===this.#e&&0===this.ttl&&0===this.#t)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let i="LRU_CACHE_UNBOUNDED";sr(i)&&(e9.add(i),se("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",i,r2))}}getRemainingTTL(i){return this.#o.has(i)?1/0:0}#B(){let i=new tr(this.#e),s=new tr(this.#e);this.#v=i,this.#m=s,this.#O=(f,p,g=e4.now())=>{if(s[f]=0!==p?g:0,i[f]=p,0!==p&&this.ttlAutopurge){let i=setTimeout(()=>{this.#x(f)&&this.delete(this.#u[f])},p+1);i.unref&&i.unref()}},this.#k=f=>{s[f]=0!==i[f]?e4.now():0},this.#R=(p,g)=>{if(i[g]){let m=i[g],_=s[g];if(!m||!_)return;p.ttl=m,p.start=_,p.now=f||n();let w=p.now-_;p.remainingTTL=m-w}};let f=0,n=()=>{let i=e4.now();if(this.ttlResolution>0){f=i;let s=setTimeout(()=>f=0,this.ttlResolution);s.unref&&s.unref()}return i};this.getRemainingTTL=p=>{let g=this.#o.get(p);if(void 0===g)return 0;let m=i[g],_=s[g];return m&&_?m-((f||n())-_):1/0},this.#x=p=>{let g=s[p],m=i[p];return!!m&&!!g&&(f||n())-g>m}}#k=()=>{};#R=()=>{};#O=()=>{};#x=()=>!1;#I(){let i=new tr(this.#e);this.#s=0,this.#y=i,this.#U=s=>{this.#s-=i[s],i[s]=0},this.#L=(i,s,f,p)=>{if(this.#T(s))return 0;if(!j(f)){if(p){if("function"!=typeof p)throw TypeError("sizeCalculation must be a function");if(!j(f=p(s,i)))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.")}return f},this.#P=(s,f,p)=>{if(i[s]=f,this.#t){let f=this.#t-i[s];for(;this.#s>f;)this.#j(!0)}this.#s+=i[s],p&&(p.entrySize=f,p.totalCalculatedSize=this.#s)}}#U=i=>{};#P=(i,s,f)=>{};#L=(i,s,f,p)=>{if(f||p)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:i=this.allowStale}={}){if(this.#a)for(let s=this.#d;!(!this.#M(s)||((i||!this.#x(s))&&(yield s),s===this.#h));)s=this.#f[s]}*#C({allowStale:i=this.allowStale}={}){if(this.#a)for(let s=this.#h;!(!this.#M(s)||((i||!this.#x(s))&&(yield s),s===this.#d));)s=this.#l[s]}#M(i){return void 0!==i&&this.#o.get(this.#u[i])===i}*entries(){for(let i of this.#E())void 0===this.#c[i]||void 0===this.#u[i]||this.#T(this.#c[i])||(yield[this.#u[i],this.#c[i]])}*rentries(){for(let i of this.#C())void 0===this.#c[i]||void 0===this.#u[i]||this.#T(this.#c[i])||(yield[this.#u[i],this.#c[i]])}*keys(){for(let i of this.#E()){let s=this.#u[i];void 0===s||this.#T(this.#c[i])||(yield s)}}*rkeys(){for(let i of this.#C()){let s=this.#u[i];void 0===s||this.#T(this.#c[i])||(yield s)}}*values(){for(let i of this.#E())void 0===this.#c[i]||this.#T(this.#c[i])||(yield this.#c[i])}*rvalues(){for(let i of this.#C())void 0===this.#c[i]||this.#T(this.#c[i])||(yield this.#c[i])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(i,s={}){for(let f of this.#E()){let p=this.#c[f],g=this.#T(p)?p.__staleWhileFetching:p;if(void 0!==g&&i(g,this.#u[f],this))return this.get(this.#u[f],s)}}forEach(i,s=this){for(let f of this.#E()){let p=this.#c[f],g=this.#T(p)?p.__staleWhileFetching:p;void 0!==g&&i.call(s,g,this.#u[f],this)}}rforEach(i,s=this){for(let f of this.#C()){let p=this.#c[f],g=this.#T(p)?p.__staleWhileFetching:p;void 0!==g&&i.call(s,g,this.#u[f],this)}}purgeStale(){let i=!1;for(let s of this.#C({allowStale:!0}))this.#x(s)&&(this.delete(this.#u[s]),i=!0);return i}info(i){let s=this.#o.get(i);if(void 0===s)return;let f=this.#c[s],p=this.#T(f)?f.__staleWhileFetching:f;if(void 0===p)return;let g={value:p};if(this.#v&&this.#m){let i=this.#v[s],f=this.#m[s];if(i&&f){let s=i-(e4.now()-f);g.ttl=s,g.start=Date.now()}}return this.#y&&(g.size=this.#y[s]),g}dump(){let i=[];for(let s of this.#E({allowStale:!0})){let f=this.#u[s],p=this.#c[s],g=this.#T(p)?p.__staleWhileFetching:p;if(void 0===g||void 0===f)continue;let m={value:g};if(this.#v&&this.#m){m.ttl=this.#v[s];let i=e4.now()-this.#m[s];m.start=Math.floor(Date.now()-i)}this.#y&&(m.size=this.#y[s]),i.unshift([f,m])}return i}load(i){for(let[s,f]of(this.clear(),i)){if(f.start){let i=Date.now()-f.start;f.start=e4.now()-i}this.set(s,f.value,f)}}set(i,s,f={}){if(void 0===s)return this.delete(i),this;let{ttl:p=this.ttl,start:g,noDisposeOnSet:m=this.noDisposeOnSet,sizeCalculation:_=this.sizeCalculation,status:w}=f,{noUpdateTTL:E=this.noUpdateTTL}=f,I=this.#L(i,s,f.size||0,_);if(this.maxEntrySize&&I>this.maxEntrySize)return w&&(w.set="miss",w.maxEntrySizeExceeded=!0),this.delete(i),this;let B=0===this.#a?void 0:this.#o.get(i);if(void 0===B)B=0===this.#a?this.#d:0!==this.#p.length?this.#p.pop():this.#a===this.#e?this.#j(!1):this.#a,this.#u[B]=i,this.#c[B]=s,this.#o.set(i,B),this.#l[this.#d]=B,this.#f[B]=this.#d,this.#d=B,this.#a++,this.#P(B,I,w),w&&(w.set="add"),E=!1;else{this.#A(B);let f=this.#c[B];if(s!==f){if(this.#_&&this.#T(f)){f.__abortController.abort(Error("replaced"));let{__staleWhileFetching:s}=f;void 0!==s&&!m&&(this.#b&&this.#r?.(s,i,"set"),this.#w&&this.#g?.push([s,i,"set"]))}else m||(this.#b&&this.#r?.(f,i,"set"),this.#w&&this.#g?.push([f,i,"set"]));if(this.#U(B),this.#P(B,I,w),this.#c[B]=s,w){w.set="replace";let i=f&&this.#T(f)?f.__staleWhileFetching:f;void 0!==i&&(w.oldValue=i)}}else w&&(w.set="update")}if(0===p||this.#v||this.#B(),this.#v&&(E||this.#O(B,p,g),w&&this.#R(w,B)),!m&&this.#w&&this.#g){let i=this.#g,s;for(;s=i?.shift();)this.#n?.(...s)}return this}pop(){try{for(;this.#a;){let i=this.#c[this.#h];if(this.#j(!0),this.#T(i)){if(i.__staleWhileFetching)return i.__staleWhileFetching}else if(void 0!==i)return i}}finally{if(this.#w&&this.#g){let i=this.#g,s;for(;s=i?.shift();)this.#n?.(...s)}}}#j(i){let s=this.#h,f=this.#u[s],p=this.#c[s];return this.#_&&this.#T(p)?p.__abortController.abort(Error("evicted")):(this.#b||this.#w)&&(this.#b&&this.#r?.(p,f,"evict"),this.#w&&this.#g?.push([p,f,"evict"])),this.#U(s),i&&(this.#u[s]=void 0,this.#c[s]=void 0,this.#p.push(s)),1===this.#a?(this.#h=this.#d=0,this.#p.length=0):this.#h=this.#l[s],this.#o.delete(f),this.#a--,s}has(i,s={}){let{updateAgeOnHas:f=this.updateAgeOnHas,status:p}=s,g=this.#o.get(i);if(void 0!==g){let i=this.#c[g];if(this.#T(i)&&void 0===i.__staleWhileFetching)return!1;if(!this.#x(g))return f&&this.#k(g),p&&(p.has="hit",this.#R(p,g)),!0;p&&(p.has="stale",this.#R(p,g))}else p&&(p.has="miss");return!1}peek(i,s={}){let{allowStale:f=this.allowStale}=s,p=this.#o.get(i);if(void 0===p||!f&&this.#x(p))return;let g=this.#c[p];return this.#T(g)?g.__staleWhileFetching:g}#S(i,s,f,p){let g=void 0===s?void 0:this.#c[s];if(this.#T(g))return g;let m=new te,{signal:_}=f;_?.addEventListener("abort",()=>m.abort(_.reason),{signal:m.signal});let w={signal:m.signal,options:f,context:p},l=(p,g=!1)=>{let{aborted:_}=m.signal,I=f.ignoreFetchAbort&&void 0!==p;return(f.status&&(_&&!g?(f.status.fetchAborted=!0,f.status.fetchError=m.signal.reason,I&&(f.status.fetchAbortIgnored=!0)):f.status.fetchResolved=!0),!_||I||g)?(this.#c[s]===E&&(void 0===p?E.__staleWhileFetching?this.#c[s]=E.__staleWhileFetching:this.delete(i):(f.status&&(f.status.fetchUpdated=!0),this.set(i,p,w.options))),p):d(m.signal.reason)},d=p=>{let{aborted:g}=m.signal,_=g&&f.allowStaleOnFetchAbort,w=_||f.allowStaleOnFetchRejection,I=w||f.noDeleteOnFetchRejection;if(this.#c[s]===E&&(I&&void 0!==E.__staleWhileFetching?_||(this.#c[s]=E.__staleWhileFetching):this.delete(i)),w)return f.status&&void 0!==E.__staleWhileFetching&&(f.status.returnedStale=!0),E.__staleWhileFetching;if(E.__returned===E)throw p};f.status&&(f.status.fetchDispatched=!0);let E=new Promise((s,p)=>{let _=this.#i?.(i,g,w);_&&_ instanceof Promise&&_.then(i=>s(void 0===i?void 0:i),p),m.signal.addEventListener("abort",()=>{(!f.ignoreFetchAbort||f.allowStaleOnFetchAbort)&&(s(void 0),f.allowStaleOnFetchAbort&&(s=i=>l(i,!0)))})}).then(l,i=>(f.status&&(f.status.fetchRejected=!0,f.status.fetchError=i),d(i))),I=Object.assign(E,{__abortController:m,__staleWhileFetching:g,__returned:void 0});return void 0===s?(this.set(i,I,{...w.options,status:void 0}),s=this.#o.get(i)):this.#c[s]=I,I}#T(i){return!!this.#_&&!!i&&i instanceof Promise&&i.hasOwnProperty("__staleWhileFetching")&&i.__abortController instanceof te}async fetch(i,s={}){let{allowStale:f=this.allowStale,updateAgeOnGet:p=this.updateAgeOnGet,noDeleteOnStaleGet:g=this.noDeleteOnStaleGet,ttl:m=this.ttl,noDisposeOnSet:_=this.noDisposeOnSet,size:w=0,sizeCalculation:E=this.sizeCalculation,noUpdateTTL:I=this.noUpdateTTL,noDeleteOnFetchRejection:B=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:O=this.allowStaleOnFetchRejection,ignoreFetchAbort:R=this.ignoreFetchAbort,allowStaleOnFetchAbort:U=this.allowStaleOnFetchAbort,context:N,forceRefresh:F=!1,status:z,signal:V}=s;if(!this.#_)return z&&(z.fetch="get"),this.get(i,{allowStale:f,updateAgeOnGet:p,noDeleteOnStaleGet:g,status:z});let K={allowStale:f,updateAgeOnGet:p,noDeleteOnStaleGet:g,ttl:m,noDisposeOnSet:_,size:w,sizeCalculation:E,noUpdateTTL:I,noDeleteOnFetchRejection:B,allowStaleOnFetchRejection:O,allowStaleOnFetchAbort:U,ignoreFetchAbort:R,status:z,signal:V},Y=this.#o.get(i);if(void 0===Y){z&&(z.fetch="miss");let s=this.#S(i,Y,K,N);return s.__returned=s}{let s=this.#c[Y];if(this.#T(s)){let i=f&&void 0!==s.__staleWhileFetching;return z&&(z.fetch="inflight",i&&(z.returnedStale=!0)),i?s.__staleWhileFetching:s.__returned=s}let g=this.#x(Y);if(!F&&!g)return z&&(z.fetch="hit"),this.#A(Y),p&&this.#k(Y),z&&this.#R(z,Y),s;let m=this.#S(i,Y,K,N),_=void 0!==m.__staleWhileFetching&&f;return z&&(z.fetch=g?"stale":"refresh",_&&g&&(z.returnedStale=!0)),_?m.__staleWhileFetching:m.__returned=m}}get(i,s={}){let{allowStale:f=this.allowStale,updateAgeOnGet:p=this.updateAgeOnGet,noDeleteOnStaleGet:g=this.noDeleteOnStaleGet,status:m}=s,_=this.#o.get(i);if(void 0!==_){let s=this.#c[_],w=this.#T(s);return m&&this.#R(m,_),this.#x(_)?(m&&(m.get="stale"),w?(m&&f&&void 0!==s.__staleWhileFetching&&(m.returnedStale=!0),f?s.__staleWhileFetching:void 0):(g||this.delete(i),m&&f&&(m.returnedStale=!0),f?s:void 0)):(m&&(m.get="hit"),w?s.__staleWhileFetching:(this.#A(_),p&&this.#k(_),s))}m&&(m.get="miss")}#N(i,s){this.#f[s]=i,this.#l[i]=s}#A(i){i!==this.#d&&(i===this.#h?this.#h=this.#l[i]:this.#N(this.#f[i],this.#l[i]),this.#N(this.#d,i),this.#d=i)}delete(i){let s=!1;if(0!==this.#a){let f=this.#o.get(i);if(void 0!==f){if(s=!0,1===this.#a)this.clear();else{this.#U(f);let s=this.#c[f];if(this.#T(s)?s.__abortController.abort(Error("deleted")):(this.#b||this.#w)&&(this.#b&&this.#r?.(s,i,"delete"),this.#w&&this.#g?.push([s,i,"delete"])),this.#o.delete(i),this.#u[f]=void 0,this.#c[f]=void 0,f===this.#d)this.#d=this.#f[f];else if(f===this.#h)this.#h=this.#l[f];else{let i=this.#f[f];this.#l[i]=this.#l[f];let s=this.#l[f];this.#f[s]=this.#f[f]}this.#a--,this.#p.push(f)}}}if(this.#w&&this.#g?.length){let i=this.#g,s;for(;s=i?.shift();)this.#n?.(...s)}return s}clear(){for(let i of this.#C({allowStale:!0})){let s=this.#c[i];if(this.#T(s))s.__abortController.abort(Error("deleted"));else{let f=this.#u[i];this.#b&&this.#r?.(s,f,"delete"),this.#w&&this.#g?.push([s,f,"delete"])}}if(this.#o.clear(),this.#c.fill(void 0),this.#u.fill(void 0),this.#v&&this.#m&&(this.#v.fill(0),this.#m.fill(0)),this.#y&&this.#y.fill(0),this.#h=0,this.#d=0,this.#p.length=0,this.#s=0,this.#a=0,this.#w&&this.#g){let i=this.#g,s;for(;s=i?.shift();)this.#n?.(...s)}}};function ue({size:i}){return _||(w=i,_=new ti({max:i,maxSize:1e6*5,sizeCalculation:i=>JSON.stringify(i).length,allowStale:!0}))}function le({cache:i=_}){return async s=>{if(w)return i.get(s)}}function ce({cache:i=_}){return async(s,{url:f,address:p},g)=>{if(w)return i.set(s,{url:f,address:p},{ttl:g})}}function pe({cache:i=_}){return async s=>{if(w)return i.get(s)}}function he({cache:i=_}){return async(s,f,p)=>{if(w)return i.set(s,{url:f,address:s},{ttl:p})}}function de({fetch:i}){return async(s,f)=>{let p=await i(`${s}?process-id=${f}`,{method:"GET",redirect:"manual"});return[301,302,307,308].includes(p.status)?new URL(p.headers.get("Location")).origin:s}}function me({loadProcessScheduler:i,loadScheduler:s,cache:f,followRedirects:p,checkForRedirect:g}){return(m,_)=>f.getByProcess(m).then(async w=>w||Promise.resolve().then(async()=>_?await f.getByOwner(_)||s(_).then(i=>(f.setByOwner(i.owner,i.url,i.ttl),i)):i(m)).then(async i=>{let s=i.url;p&&(s=await g(i.url,m));let _={url:s,address:i.owner};return await f.setByProcess(m,_,i.ttl),_}))}function ge({loadScheduler:i,cache:s}){return f=>s.getByOwner(f).then(p=>p?{url:p.url}:i(f).then(i=>s.setByOwner(f,i.url,i.ttl).then(()=>({url:i.url}))).catch(i=>{if(!(i instanceof e6))throw i}))}function xe({loadScheduler:i,cache:s}){return f=>s.getByOwner(f).then(p=>!!p||i(f).then(i=>s.setByOwner(f,i.url,i.ttl)).then(()=>!0).catch(i=>{if(i instanceof e6)return!1;throw i}))}function ye({cacheSize:i=100,GRAPHQL_URL:s="https://arweave.net/graphql",followRedirects:f=!1}={}){let p=ue({size:i}),g=It({fetch,GRAPHQL_URL:s}),m={getByProcess:le({cache:p}),getByOwner:pe({cache:p}),setByProcess:ce({cache:p}),setByOwner:he({cache:p})};return{locate:me({loadProcessScheduler:ne({fetch,GRAPHQL_URL:s}),loadScheduler:g,cache:m,followRedirects:f,checkForRedirect:de({fetch})}),validate:xe({loadScheduler:g,cache:m}),raw:ge({loadScheduler:g,cache:m})}}var{locate:ta,validate:ts,raw:to}=ye({GRAPHQL_URL:globalThis.GRAPHQL_URL||void 0,cacheSize:globalThis.SCHEDULER_UTILS_CACHE_SIZE||void 0,followRedirects:"true"===globalThis.SCHEDULER_UTILS_FOLLOW_REDIRECTS||void 0}),Async=i=>({fork:i,toPromise:()=>new Promise((s,f)=>i(f,s)),map:s=>Async((f,p)=>i(f,i=>p(s(i)))),bimap:(s,f)=>Async((p,g)=>i(i=>p(s(i)),i=>g(f(i)))),chain:s=>Async((f,p)=>i(f,i=>s(i).fork(f,p))),bichain:(s,f)=>Async((p,g)=>i(i=>s(i).fork(p,g),i=>f(i).fork(p,g))),fold:(s,f)=>Async((p,g)=>i(i=>s(i).fork(p,g),i=>f(i).fork(p,g)))}),of=i=>Async((s,f)=>f(i)),Resolved=i=>Async((s,f)=>f(i)),Rejected=i=>Async((s,f)=>s(i)),fromPromise=i=>(...s)=>Async((f,p)=>i(...s).then(p).catch(f));function deployMessageWith({fetch:i,MU_URL:s,logger:f}){let p=f.child("deployMessage");return f=>of(f).chain(fromPromise(({processId:i,data:s,tags:f,anchor:p,signer:g})=>g({data:s,tags:f,target:i,anchor:p}))).chain(f=>of(f).chain(fromPromise(async f=>i(s,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},redirect:"follow",body:f.raw}))).bichain(i=>Rejected(Error(`Error while communicating with MU: ${JSON.stringify(i)}`)),fromPromise(async i=>{if(i.ok)return i.json();throw Error(`${i.status}: ${await i.text()}`)})).bimap(p.tap("Error encountered when writing message via MU"),p.tap("Successfully wrote message via MU")).map(i=>({res:i,messageId:f.id}))).toPromise()}function deployProcessWith({fetch:i,MU_URL:s,logger:f}){let p=f.child("deployProcess");return f=>of(f).chain(fromPromise(({data:i,tags:s,signer:f})=>f({data:i,tags:s}))).chain(f=>of(f).chain(fromPromise(async f=>i(s,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},redirect:"follow",body:f.raw}))).bichain(i=>Rejected(Error(`Error while communicating with MU: ${JSON.stringify(i)}`)),fromPromise(async i=>{if(i.ok)return i.json();throw Error(`${i.status}: ${await i.text()}`)})).bimap(p.tap("Error encountered when deploying process via MU"),p.tap("Successfully deployed process via MU")).map(i=>({res:i,processId:f.id}))).toPromise()}function deployMonitorWith({fetch:i,MU_URL:s,logger:f}){let p=f.child("deployMonitor");return f=>of(f).chain(fromPromise(({processId:i,data:s,tags:f,anchor:p,signer:g})=>g({data:s,tags:f,target:i,anchor:p}))).chain(g=>of(g).chain(fromPromise(async p=>i(s+"/monitor/"+f.processId,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},redirect:"follow",body:p.raw}))).bichain(i=>Rejected(Error(`Error while communicating with MU: ${JSON.stringify(i)}`)),fromPromise(async i=>{if(i.ok)return{ok:!0};throw Error(`${i.status}: ${await i.text()}`)})).bimap(p.tap("Error encountered when subscribing to process via MU"),p.tap("Successfully subscribed to process via MU")).map(i=>({res:i,messageId:g.id}))).toPromise()}function deployUnmonitorWith({fetch:i,MU_URL:s,logger:f}){let p=f.child("deployUnmonitor");return f=>of(f).chain(fromPromise(({processId:i,data:s,tags:f,anchor:p,signer:g})=>g({data:s,tags:f,target:i,anchor:p}))).chain(g=>of(g).chain(fromPromise(async p=>i(s+"/monitor/"+f.processId,{method:"DELETE",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},redirect:"follow",body:p.raw}))).bichain(i=>Rejected(Error(`Error while communicating with MU: ${JSON.stringify(i)}`)),fromPromise(async i=>{if(i.ok)return{ok:!0};throw Error(`${i.status}: ${await i.text()}`)})).bimap(p.tap("Error encountered when unsubscribing to process via MU"),p.tap("Successfully unsubscribed to process via MU")).map(i=>({res:i,messageId:g.id}))).toPromise()}function deployAssignWith({fetch:i,MU_URL:s,logger:f}){let p=f.child("deployAssign");return f=>of(f).chain(fromPromise(async({process:f,message:p,baseLayer:g,exclude:m})=>i(`${s}?process-id=${f}&assign=${p}${g?"&base-layer":""}${m?"&exclude="+m.join(","):""}`,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"}}))).bichain(i=>Rejected(Error(`Error while communicating with MU: ${JSON.stringify(i)}`)),fromPromise(async i=>{if(i.ok)return i.json();throw Error(`${i.status}: ${await i.text()}`)})).bimap(p.tap("Error encountered when writing assignment via MU"),p.tap("Successfully wrote assignment via MU")).map(i=>({res:i,assignmentId:i.id})).toPromise()}function dryrunFetchWith({fetch:i,CU_URL:s,logger:f}){return p=>of(p).map(f.tap("posting dryrun request to CU")).chain(fromPromise(f=>i(`${s}/dry-run?process-id=${f.Target}`,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"follow",body:JSON.stringify(f)}).then(i=>i.json()))).toPromise()}function loadResultWith({fetch:i,CU_URL:s,logger:f}){return({id:p,processId:g})=>of(`${s}/result/${p}?process-id=${g}`).map(f.tap("fetching message result from CU")).chain(fromPromise(async s=>i(s,{method:"GET",headers:{Accept:"application/json"},redirect:"follow"}).then(i=>i.json()))).toPromise()}function queryResultsWith({fetch:i,CU_URL:s,logger:f}){return({process:p,from:g,to:m,sort:_,limit:w})=>{let E=new URL(`${s}/results/${p}`),I=new URLSearchParams(E.search);return g&&I.append("from",g),m&&I.append("to",m),_&&I.append("sort",_),w&&I.append("limit",w),E.search=I,of(E.toString()).map(f.tap("fetching message result from CU")).chain(fromPromise(async s=>i(s,{method:"GET",headers:{Accept:"application/json"},redirect:"follow"}).then(i=>i.json()))).toPromise()}}var tu=__toESM(el(),1),createProcessMetaCache=({MAX_SIZE:i})=>E||(E=new tu.default(i)),loadProcessMetaWith=({logger:i,fetch:s,cache:f=E})=>async({suUrl:p,processId:g})=>f.has(g)?f.get(g):s(`${p}/processes/${g}`,{method:"GET",redirect:"follow"}).then(async s=>{if(s.ok)return s.json();throw i("Error Encountered when fetching process meta from SU '%s' for process '%s'",p,g),Error(`Encountered Error fetching scheduled messages from Scheduler Unit: ${s.status}: ${await s.text()}`)}).then(s=>(i("Caching process meta for process '%s'",g),f.set(g,{tags:s.tags}),s)),F_default=function(){return!1},T_default=function(){return!0},tc={"@@functional/placeholder":!0};function _isPlaceholder(i){return null!=i&&"object"==typeof i&&!0===i["@@functional/placeholder"]}function _curry1(i){return function f1(s){return 0==arguments.length||_isPlaceholder(s)?f1:i.apply(this,arguments)}}function _curry2(i){return function f2(s,f){switch(arguments.length){case 0:return f2;case 1:return _isPlaceholder(s)?f2:_curry1(function(f){return i(s,f)});default:return _isPlaceholder(s)&&_isPlaceholder(f)?f2:_isPlaceholder(s)?_curry1(function(s){return i(s,f)}):_isPlaceholder(f)?_curry1(function(f){return i(s,f)}):i(s,f)}}}function _concat(i,s){s=s||[];var f,p=(i=i||[]).length,g=s.length,m=[];for(f=0;f<p;)m[m.length]=i[f],f+=1;for(f=0;f<g;)m[m.length]=s[f],f+=1;return m}function _arity(i,s){switch(i){case 0:return function(){return s.apply(this,arguments)};case 1:return function(i){return s.apply(this,arguments)};case 2:return function(i,f){return s.apply(this,arguments)};case 3:return function(i,f,p){return s.apply(this,arguments)};case 4:return function(i,f,p,g){return s.apply(this,arguments)};case 5:return function(i,f,p,g,m){return s.apply(this,arguments)};case 6:return function(i,f,p,g,m,_){return s.apply(this,arguments)};case 7:return function(i,f,p,g,m,_,w){return s.apply(this,arguments)};case 8:return function(i,f,p,g,m,_,w,E){return s.apply(this,arguments)};case 9:return function(i,f,p,g,m,_,w,E,I){return s.apply(this,arguments)};case 10:return function(i,f,p,g,m,_,w,E,I,B){return s.apply(this,arguments)};default:throw Error("First argument to _arity must be a non-negative integer no greater than ten")}}function _curryN(i,s,f){return function(){for(var p,g=[],m=0,_=i,w=0,E=!1;w<s.length||m<arguments.length;)w<s.length&&(!_isPlaceholder(s[w])||m>=arguments.length)?p=s[w]:(p=arguments[m],m+=1),g[w]=p,_isPlaceholder(p)?E=!0:_-=1,w+=1;return!E&&_<=0?f.apply(this,g):_arity(Math.max(0,_),_curryN(i,g,f))}}var tl=_curry2(function(i,s){return 1===i?_curry1(s):_arity(i,_curryN(i,[],s))});function _curry3(i){return function f3(s,f,p){switch(arguments.length){case 0:return f3;case 1:return _isPlaceholder(s)?f3:_curry2(function(f,p){return i(s,f,p)});case 2:return _isPlaceholder(s)&&_isPlaceholder(f)?f3:_isPlaceholder(s)?_curry2(function(s,p){return i(s,f,p)}):_isPlaceholder(f)?_curry2(function(f,p){return i(s,f,p)}):_curry1(function(p){return i(s,f,p)});default:return _isPlaceholder(s)&&_isPlaceholder(f)&&_isPlaceholder(p)?f3:_isPlaceholder(s)&&_isPlaceholder(f)?_curry2(function(s,f){return i(s,f,p)}):_isPlaceholder(s)&&_isPlaceholder(p)?_curry2(function(s,p){return i(s,f,p)}):_isPlaceholder(f)&&_isPlaceholder(p)?_curry2(function(f,p){return i(s,f,p)}):_isPlaceholder(s)?_curry1(function(s){return i(s,f,p)}):_isPlaceholder(f)?_curry1(function(f){return i(s,f,p)}):_isPlaceholder(p)?_curry1(function(p){return i(s,f,p)}):i(s,f,p)}}}var tf=Array.isArray||function(i){return null!=i&&i.length>=0&&"[object Array]"===Object.prototype.toString.call(i)};function _isTransformer(i){return null!=i&&"function"==typeof i["@@transducer/step"]}function _dispatchable(i,s,f){return function(){if(0==arguments.length)return f();var p=arguments[arguments.length-1];if(!tf(p)){for(var g=0;g<i.length;){if("function"==typeof p[i[g]])return p[i[g]].apply(p,Array.prototype.slice.call(arguments,0,-1));g+=1}if(_isTransformer(p)){var m=s.apply(null,Array.prototype.slice.call(arguments,0,-1));return m(p)}}return f.apply(this,arguments)}}var th={init:function(){return this.xf["@@transducer/init"]()},result:function(i){return this.xf["@@transducer/result"](i)}};function _arrayFromIterator(i){for(var s,f=[];!(s=i.next()).done;)f.push(s.value);return f}function _includesWith(i,s,f){for(var p=0,g=f.length;p<g;){if(i(s,f[p]))return!0;p+=1}return!1}function _functionName(i){var s=String(i).match(/^function (\w*)/);return null==s?"":s[1]}function _has(i,s){return Object.prototype.hasOwnProperty.call(s,i)}function _objectIs(i,s){return i===s?0!==i||1/i==1/s:i!=i&&s!=s}var td="function"==typeof Object.is?Object.is:_objectIs,tp=Object.prototype.toString,tg=function(){return"[object Arguments]"===tp.call(arguments)?function(i){return"[object Arguments]"===tp.call(i)}:function(i){return _has("callee",i)}}(),ty=!({toString:null}).propertyIsEnumerable("toString"),tm=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],tv=function(){return arguments.propertyIsEnumerable("length")}(),contains=function(i,s){for(var f=0;f<i.length;){if(i[f]===s)return!0;f+=1}return!1},tb="function"!=typeof Object.keys||tv?_curry1(function(i){if(Object(i)!==i)return[];var s,f,p=[],g=tv&&tg(i);for(s in i)_has(s,i)&&(!g||"length"!==s)&&(p[p.length]=s);if(ty)for(f=tm.length-1;f>=0;)_has(s=tm[f],i)&&!contains(p,s)&&(p[p.length]=s),f-=1;return p}):_curry1(function(i){return Object(i)!==i?[]:Object.keys(i)}),t_=_curry1(function(i){return null===i?"Null":void 0===i?"Undefined":Object.prototype.toString.call(i).slice(8,-1)});function _uniqContentEquals(i,s,f,p){var g=_arrayFromIterator(i);function eq(i,s){return _equals(i,s,f.slice(),p.slice())}return!_includesWith(function(i,s){return!_includesWith(eq,s,i)},_arrayFromIterator(s),g)}function _equals(i,s,f,p){if(td(i,s))return!0;var g=t_(i);if(g!==t_(s))return!1;if("function"==typeof i["fantasy-land/equals"]||"function"==typeof s["fantasy-land/equals"])return"function"==typeof i["fantasy-land/equals"]&&i["fantasy-land/equals"](s)&&"function"==typeof s["fantasy-land/equals"]&&s["fantasy-land/equals"](i);if("function"==typeof i.equals||"function"==typeof s.equals)return"function"==typeof i.equals&&i.equals(s)&&"function"==typeof s.equals&&s.equals(i);switch(g){case"Arguments":case"Array":case"Object":if("function"==typeof i.constructor&&"Promise"===_functionName(i.constructor))return i===s;break;case"Boolean":case"Number":case"String":if(!(typeof i==typeof s&&td(i.valueOf(),s.valueOf())))return!1;break;case"Date":if(!td(i.valueOf(),s.valueOf()))return!1;break;case"Error":return i.name===s.name&&i.message===s.message;case"RegExp":if(!(i.source===s.source&&i.global===s.global&&i.ignoreCase===s.ignoreCase&&i.multiline===s.multiline&&i.sticky===s.sticky&&i.unicode===s.unicode))return!1}for(var m=f.length-1;m>=0;){if(f[m]===i)return p[m]===s;m-=1}switch(g){case"Map":if(i.size!==s.size)return!1;return _uniqContentEquals(i.entries(),s.entries(),f.concat([i]),p.concat([s]));case"Set":if(i.size!==s.size)return!1;return _uniqContentEquals(i.values(),s.values(),f.concat([i]),p.concat([s]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var _=tb(i);if(_.length!==tb(s).length)return!1;var w=f.concat([i]),E=p.concat([s]);for(m=_.length-1;m>=0;){var I=_[m];if(!(_has(I,s)&&_equals(s[I],i[I],w,E)))return!1;m-=1}return!0}var tw=_curry2(function(i,s){return _equals(i,s,[],[])});function _indexOf(i,s,f){var p,g;if("function"==typeof i.indexOf)switch(typeof s){case"number":if(0===s){for(p=1/s;f<i.length;){if(0===(g=i[f])&&1/g===p)return f;f+=1}return -1}if(s!=s){for(;f<i.length;){if("number"==typeof(g=i[f])&&g!=g)return f;f+=1}return -1}return i.indexOf(s,f);case"string":case"boolean":case"function":case"undefined":return i.indexOf(s,f);case"object":if(null===s)return i.indexOf(s,f)}for(;f<i.length;){if(tw(i[f],s))return f;f+=1}return -1}function _includes(i,s){return _indexOf(s,i,0)>=0}function _map(i,s){for(var f=0,p=s.length,g=Array(p);f<p;)g[f]=i(s[f]),f+=1;return g}function _quote(i){return'"'+i.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var pad=function(i){return(i<10?"0":"")+i},tT="function"==typeof Date.prototype.toISOString?function(i){return i.toISOString()}:function(i){return i.getUTCFullYear()+"-"+pad(i.getUTCMonth()+1)+"-"+pad(i.getUTCDate())+"T"+pad(i.getUTCHours())+":"+pad(i.getUTCMinutes())+":"+pad(i.getUTCSeconds())+"."+(i.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function _complement(i){return function(){return!i.apply(this,arguments)}}function _arrayReduce(i,s,f){for(var p=0,g=f.length;p<g;)s=i(s,f[p]),p+=1;return s}function _filter(i,s){for(var f=0,p=s.length,g=[];f<p;)i(s[f])&&(g[g.length]=s[f]),f+=1;return g}function _isObject(i){return"[object Object]"===Object.prototype.toString.call(i)}var tS=function(){function XFilter2(i,s){this.xf=s,this.f=i}return XFilter2.prototype["@@transducer/init"]=th.init,XFilter2.prototype["@@transducer/result"]=th.result,XFilter2.prototype["@@transducer/step"]=function(i,s){return this.f(s)?this.xf["@@transducer/step"](i,s):i},XFilter2}(),tA=_curry2(_dispatchable(["fantasy-land/filter","filter"],function(i){return function(s){return new tS(i,s)}},function(i,s){return _isObject(s)?_arrayReduce(function(f,p){return i(s[p])&&(f[p]=s[p]),f},{},tb(s)):_filter(i,s)})),tE=_curry2(function(i,s){return tA(_complement(i),s)});function _toString(i,s){var recur=function(f){var p=s.concat([i]);return _includes(f,p)?"<Circular>":_toString(f,p)},mapPairs=function(i,s){return _map(function(s){return _quote(s)+": "+recur(i[s])},s.slice().sort())};switch(Object.prototype.toString.call(i)){case"[object Arguments]":return"(function() { return arguments; }("+_map(recur,i).join(", ")+"))";case"[object Array]":return"["+_map(recur,i).concat(mapPairs(i,tE(function(i){return/^\d+$/.test(i)},tb(i)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof i?"new Boolean("+recur(i.valueOf())+")":i.toString();case"[object Date]":return"new Date("+(isNaN(i.valueOf())?recur(NaN):_quote(tT(i)))+")";case"[object Map]":return"new Map("+recur(Array.from(i))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof i?"new Number("+recur(i.valueOf())+")":1/i==-1/0?"-0":i.toString(10);case"[object Set]":return"new Set("+recur(Array.from(i).sort())+")";case"[object String]":return"object"==typeof i?"new String("+recur(i.valueOf())+")":_quote(i);case"[object Undefined]":return"undefined";default:if("function"==typeof i.toString){var f=i.toString();if("[object Object]"!==f)return f}return"{"+mapPairs(i,tb(i)).join(", ")+"}"}}var tC=_curry1(function(i){return _toString(i,[])}),tx=_curry2(function(i,s){if(i===s)return s;function safeMax(i,s){if(i>s!=s>i)return s>i?s:i}var f=safeMax(i,s);if(void 0!==f)return f;var p=safeMax(typeof i,typeof s);if(void 0!==p)return p===typeof i?i:s;var g=tC(i),m=safeMax(g,tC(s));return void 0!==m&&m===g?i:s}),tI=function(){function XMap2(i,s){this.xf=s,this.f=i}return XMap2.prototype["@@transducer/init"]=th.init,XMap2.prototype["@@transducer/result"]=th.result,XMap2.prototype["@@transducer/step"]=function(i,s){return this.xf["@@transducer/step"](i,this.f(s))},XMap2}(),xmap_default=function(i){return function(s){return new tI(i,s)}},tB=_curry2(_dispatchable(["fantasy-land/map","map"],xmap_default,function(i,s){switch(Object.prototype.toString.call(s)){case"[object Function]":return tl(s.length,function(){return i.call(this,s.apply(this,arguments))});case"[object Object]":return _arrayReduce(function(f,p){return f[p]=i(s[p]),f},{},tb(s));default:return _map(i,s)}})),tO=Number.isInteger||function(i){return i<<0===i};function _isString(i){return"[object String]"===Object.prototype.toString.call(i)}var tk=_curry2(function(i,s){var f=i<0?s.length+i:i;return _isString(s)?s.charAt(f):s[f]}),tR=_curry2(function(i,s){if(null!=s)return tO(i)?tk(i,s):s[i]}),tU=_curry2(function(i,s){return tB(tR(i),s)}),tL=_curry1(function(i){return!!tf(i)||!(!i||"object"!=typeof i||_isString(i))&&(0===i.length||i.length>0&&i.hasOwnProperty(0)&&i.hasOwnProperty(i.length-1))}),tP="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function _createReduce(i,s,f){return function(p,g,m){if(tL(m))return i(p,g,m);if(null==m)return g;if("function"==typeof m["fantasy-land/reduce"])return s(p,g,m,"fantasy-land/reduce");if(null!=m[tP])return f(p,g,m[tP]());if("function"==typeof m.next)return f(p,g,m);if("function"==typeof m.reduce)return s(p,g,m,"reduce");throw TypeError("reduce: list must be array or iterable")}}function _xArrayReduce(i,s,f){for(var p=0,g=f.length;p<g;){if((s=i["@@transducer/step"](s,f[p]))&&s["@@transducer/reduced"]){s=s["@@transducer/value"];break}p+=1}return i["@@transducer/result"](s)}var tj=_curry2(function(i,s){return _arity(i.length,function(){return i.apply(s,arguments)})}),tM=_createReduce(_xArrayReduce,function(i,s,f,p){return i["@@transducer/result"](f[p](tj(i["@@transducer/step"],i),s))},function(i,s,f){for(var p=f.next();!p.done;){if((s=i["@@transducer/step"](s,p.value))&&s["@@transducer/reduced"]){s=s["@@transducer/value"];break}p=f.next()}return i["@@transducer/result"](s)}),tN=function(){function XWrap2(i){this.f=i}return XWrap2.prototype["@@transducer/init"]=function(){throw Error("init not implemented on XWrap")},XWrap2.prototype["@@transducer/result"]=function(i){return i},XWrap2.prototype["@@transducer/step"]=function(i,s){return this.f(i,s)},XWrap2}();function _xwrap(i){return new tN(i)}var tF=_curry3(function(i,s,f){return tM("function"==typeof i?_xwrap(i):i,s,f)}),tD=_curry1(function(i){return tl(tF(tx,0,tU("length",i)),function(){for(var s=0,f=i.length;s<f;){if(!i[s].apply(this,arguments))return!1;s+=1}return!0})}),tZ=_curry1(function(i){return function(){return i}}),t$=_curry2(function(i,s){return _concat(s,[i])});function _assoc(i,s,f){if(tO(i)&&tf(f)){var p=[].concat(f);return p[i]=s,p}var g={};for(var m in f)g[m]=f[m];return g[i]=s,g}var tW=_curry1(function(i){return null==i}),tz=_curry3(function assocPath2(i,s,f){if(0===i.length)return s;var p=i[0];if(i.length>1){var g=!tW(f)&&_has(p,f)&&"object"==typeof f[p]?f[p]:tO(i[1])?[]:{};s=assocPath2(Array.prototype.slice.call(i,1),s,g)}return _assoc(p,s,f)}),tV=_curry3(function(i,s,f){return tz([i],s,f)});function _isFunction(i){var s=Object.prototype.toString.call(i);return"[object Function]"===s||"[object AsyncFunction]"===s||"[object GeneratorFunction]"===s||"[object AsyncGeneratorFunction]"===s}function _makeFlat(i){return function flatt(s){for(var f,p,g,m=[],_=0,w=s.length;_<w;){if(tL(s[_]))for(f=i?flatt(s[_]):s[_],g=0,p=f.length;g<p;)m[m.length]=f[g],g+=1;else m[m.length]=s[_];_+=1}return m}}function _forceReduced(i){return{"@@transducer/value":i,"@@transducer/reduced":!0}}var tq="@@transducer/init",tK="@@transducer/step",tG="@@transducer/result",tH=function(){function XPreservingReduced2(i){this.xf=i}return XPreservingReduced2.prototype[tq]=th.init,XPreservingReduced2.prototype[tG]=th.result,XPreservingReduced2.prototype[tK]=function(i,s){var f=this.xf[tK](i,s);return f["@@transducer/reduced"]?_forceReduced(f):f},XPreservingReduced2}(),tX=function(){function XFlatCat2(i){this.xf=new tH(i)}return XFlatCat2.prototype[tq]=th.init,XFlatCat2.prototype[tG]=th.result,XFlatCat2.prototype[tK]=function(i,s){return tL(s)?tM(this.xf,i,s):_xArrayReduce(this.xf,i,[s])},XFlatCat2}(),tJ=_curry2(_dispatchable(["fantasy-land/chain","chain"],function(i){return function(s){return xmap_default(i)(new tX(s))}},function(i,s){return"function"==typeof s?function(f){return i(s(f))(f)}:_makeFlat(!1)(tB(i,s))}));function _pipe(i,s){return function(){return s.call(this,i.apply(this,arguments))}}function _checkForMethod(i,s){return function(){var f=arguments.length;if(0===f)return s();var p=arguments[f-1];return tf(p)||"function"!=typeof p[i]?s.apply(this,arguments):p[i].apply(p,Array.prototype.slice.call(arguments,0,f-1))}}var tY=_curry3(_checkForMethod("slice",function(i,s,f){return Array.prototype.slice.call(f,i,s)})),tQ=_curry1(_checkForMethod("tail",tY(1,1/0)));function pipe(){if(0==arguments.length)throw Error("pipe requires at least one argument");return _arity(arguments[0].length,tF(_pipe,arguments[0],tQ(arguments)))}var t0=_curry1(function(i){return i}),t2=_curry2(function(i,s){if(tf(i)){if(tf(s))return i.concat(s);throw TypeError(tC(s)+" is not an array")}if(_isString(i)){if(_isString(s))return i+s;throw TypeError(tC(s)+" is not a string")}if(null!=i&&_isFunction(i["fantasy-land/concat"]))return i["fantasy-land/concat"](s);if(null!=i&&_isFunction(i.concat))return i.concat(s);throw TypeError(tC(i)+' does not have a method named "concat" or "fantasy-land/concat"')}),t1=_curry1(function(i){return _arity(tF(tx,0,tB(function(i){return i[0].length},i)),function(){for(var s=0;s<i.length;){if(i[s][0].apply(this,arguments))return i[s][1].apply(this,arguments);s+=1}})}),t3=_curry2(function(i,s){return null==s||s!=s?i:s}),t6=_curry2(function(i,s){if(0===i.length||tW(s))return!1;for(var f=s,p=0;p<i.length;){if(!(!tW(f)&&_has(i[p],f)))return!1;f=f[i[p]],p+=1}return!0}),t8=_curry2(function(i,s){return t6([i],s)}),t5=_curry3(function(i,s,f){return tl(Math.max(i.length,s.length,f.length),function(){return i.apply(this,arguments)?s.apply(this,arguments):f.apply(this,arguments)})}),t4=_curry2(_includes),t9=_curry2(function(i,s){return tl(i+1,function(){var f=arguments[i];if(null!=f&&_isFunction(f[s]))return f[s].apply(f,Array.prototype.slice.call(arguments,0,i));throw TypeError(tC(f)+' does not have a method named "'+s+'"')})}),t7=_curry2(function(i,s){return s instanceof i||null!=s&&(s.constructor===i||"Object"===i.name&&"object"==typeof s)}),rr=_curry1(function(i){return!tW(i)}),rn=t9(1,"join"),ri=_curry2(function(i,s){return i.map(function(i){for(var f,p=s,g=0;g<i.length;){if(null==p)return;p=tO(f=i[g])?tk(f,p):p[f],g+=1}return p})}),ra=_curry2(function(i,s){return ri([i],s)[0]}),rs=_curry3(function(i,s,f){return tw(i,tR(s,f))}),ro=_curry3(function(i,s,f){return t3(i,tR(s,f))}),ru=function(){function XTap2(i,s){this.xf=s,this.f=i}return XTap2.prototype["@@transducer/init"]=th.init,XTap2.prototype["@@transducer/result"]=th.result,XTap2.prototype["@@transducer/step"]=function(i,s){return this.f(s),this.xf["@@transducer/step"](i,s)},XTap2}(),rc=_curry2(_dispatchable([],function(i){return function(s){return new ru(i,s)}},function(i,s){return i(s),s}));!function(i){function assertIs(i){}function assertNever(i){throw Error()}function joinValues(i,s=" | "){return i.map(i=>"string"==typeof i?`'${i}'`:i).join(s)}i.assertEqual=i=>i,i.assertIs=assertIs,i.assertNever=assertNever,i.arrayToEnum=i=>{let s={};for(let f of i)s[f]=f;return s},i.getValidEnumValues=s=>{let f=i.objectKeys(s).filter(i=>"number"!=typeof s[s[i]]),p={};for(let i of f)p[i]=s[i];return i.objectValues(p)},i.objectValues=s=>i.objectKeys(s).map(function(i){return s[i]}),i.objectKeys="function"==typeof Object.keys?i=>Object.keys(i):i=>{let s=[];for(let f in i)Object.prototype.hasOwnProperty.call(i,f)&&s.push(f);return s},i.find=(i,s)=>{for(let f of i)if(s(f))return f},i.isInteger="function"==typeof Number.isInteger?i=>Number.isInteger(i):i=>"number"==typeof i&&isFinite(i)&&Math.floor(i)===i,i.joinValues=joinValues,i.jsonStringifyReplacer=(i,s)=>"bigint"==typeof s?s.toString():s}(I||(I={})),(B||(B={})).mergeShapes=(i,s)=>({...i,...s});var rl=I.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=i=>{let s=typeof i;switch(s){case"undefined":return rl.undefined;case"string":return rl.string;case"number":return isNaN(i)?rl.nan:rl.number;case"boolean":return rl.boolean;case"function":return rl.function;case"bigint":return rl.bigint;case"symbol":return rl.symbol;case"object":if(Array.isArray(i))return rl.array;if(null===i)return rl.null;if(i.then&&"function"==typeof i.then&&i.catch&&"function"==typeof i.catch)return rl.promise;if("undefined"!=typeof Map&&i instanceof Map)return rl.map;if("undefined"!=typeof Set&&i instanceof Set)return rl.set;if("undefined"!=typeof Date&&i instanceof Date)return rl.date;return rl.object;default:return rl.unknown}},rf=I.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),rh=class extends Error{constructor(i){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};let s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=i}get errors(){return this.issues}format(i){let s=i||function(i){return i.message},f={_errors:[]},processError=i=>{for(let p of i.issues)if("invalid_union"===p.code)p.unionErrors.map(processError);else if("invalid_return_type"===p.code)processError(p.returnTypeError);else if("invalid_arguments"===p.code)processError(p.argumentsError);else if(0===p.path.length)f._errors.push(s(p));else{let i=f,g=0;for(;g<p.path.length;){let f=p.path[g],m=g===p.path.length-1;m?(i[f]=i[f]||{_errors:[]},i[f]._errors.push(s(p))):i[f]=i[f]||{_errors:[]},i=i[f],g++}}};return processError(this),f}toString(){return this.message}get message(){return JSON.stringify(this.issues,I.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(i=i=>i.message){let s={},f=[];for(let p of this.issues)p.path.length>0?(s[p.path[0]]=s[p.path[0]]||[],s[p.path[0]].push(i(p))):f.push(i(p));return{formErrors:f,fieldErrors:s}}get formErrors(){return this.flatten()}};rh.create=i=>{let s=new rh(i);return s};var errorMap=(i,s)=>{let f;switch(i.code){case rf.invalid_type:f=i.received===rl.undefined?"Required":`Expected ${i.expected}, received ${i.received}`;break;case rf.invalid_literal:f=`Invalid literal value, expected ${JSON.stringify(i.expected,I.jsonStringifyReplacer)}`;break;case rf.unrecognized_keys:f=`Unrecognized key(s) in object: ${I.joinValues(i.keys,", ")}`;break;case rf.invalid_union:f="Invalid input";break;case rf.invalid_union_discriminator:f=`Invalid discriminator value. Expected ${I.joinValues(i.options)}`;break;case rf.invalid_enum_value:f=`Invalid enum value. Expected ${I.joinValues(i.options)}, received '${i.received}'`;break;case rf.invalid_arguments:f="Invalid function arguments";break;case rf.invalid_return_type:f="Invalid function return type";break;case rf.invalid_date:f="Invalid date";break;case rf.invalid_string:"object"==typeof i.validation?"includes"in i.validation?(f=`Invalid input: must include "${i.validation.includes}"`,"number"==typeof i.validation.position&&(f=`${f} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?f=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?f=`Invalid input: must end with "${i.validation.endsWith}"`:I.assertNever(i.validation):f="regex"!==i.validation?`Invalid ${i.validation}`:"Invalid";break;case rf.too_small:f="array"===i.type?`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:"string"===i.type?`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:"number"===i.type?`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:"date"===i.type?`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:"Invalid input";break;case rf.too_big:f="array"===i.type?`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:"string"===i.type?`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:"number"===i.type?`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:"bigint"===i.type?`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:"date"===i.type?`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:"Invalid input";break;case rf.custom:f="Invalid input";break;case rf.invalid_intersection_types:f="Intersection results could not be merged";break;case rf.not_multiple_of:f=`Number must be a multiple of ${i.multipleOf}`;break;case rf.not_finite:f="Number must be finite";break;default:f=s.defaultError,I.assertNever(i)}return{message:f}},rd=errorMap;function setErrorMap(i){rd=i}function getErrorMap(){return rd}var makeIssue=i=>{let{data:s,path:f,errorMaps:p,issueData:g}=i,m=[...f,...g.path||[]],_={...g,path:m},w="",E=p.filter(i=>!!i).slice().reverse();for(let i of E)w=i(_,{data:s,defaultError:w}).message;return{...g,path:m,message:g.message||w}};function addIssueToContext(i,s){let f=makeIssue({issueData:s,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,getErrorMap(),errorMap].filter(i=>!!i)});i.common.issues.push(f)}var rp=class _ParseStatus{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(i,s){let f=[];for(let p of s){if("aborted"===p.status)return rg;"dirty"===p.status&&i.dirty(),f.push(p.value)}return{status:i.value,value:f}}static async mergeObjectAsync(i,s){let f=[];for(let i of s)f.push({key:await i.key,value:await i.value});return _ParseStatus.mergeObjectSync(i,f)}static mergeObjectSync(i,s){let f={};for(let p of s){let{key:s,value:g}=p;if("aborted"===s.status||"aborted"===g.status)return rg;"dirty"===s.status&&i.dirty(),"dirty"===g.status&&i.dirty(),"__proto__"!==s.value&&(void 0!==g.value||p.alwaysSet)&&(f[s.value]=g.value)}return{status:i.value,value:f}}},rg=Object.freeze({status:"aborted"}),DIRTY=i=>({status:"dirty",value:i}),OK=i=>({status:"valid",value:i}),isAborted=i=>"aborted"===i.status,isDirty=i=>"dirty"===i.status,isValid=i=>"valid"===i.status,isAsync=i=>"undefined"!=typeof Promise&&i instanceof Promise;(p=O||(O={})).errToObj=i=>"string"==typeof i?{message:i}:i||{},p.toString=i=>"string"==typeof i?i:null==i?void 0:i.message;var ry=class{constructor(i,s,f,p){this._cachedPath=[],this.parent=i,this.data=s,this._path=f,this._key=p}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},handleResult=(i,s)=>{if(isValid(s))return{success:!0,data:s.value};if(!i.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let s=new rh(i.common.issues);return this._error=s,this._error}}};function processCreateParams(i){if(!i)return{};let{errorMap:s,invalid_type_error:f,required_error:p,description:g}=i;if(s&&(f||p))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return s?{errorMap:s,description:g}:{errorMap:(i,s)=>"invalid_type"!==i.code?{message:s.defaultError}:void 0===s.data?{message:null!=p?p:s.defaultError}:{message:null!=f?f:s.defaultError},description:g}}var rm=class{constructor(i){this.spa=this.safeParseAsync,this._def=i,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(i){return getParsedType(i.data)}_getOrReturnCtx(i,s){return s||{common:i.parent.common,data:i.data,parsedType:getParsedType(i.data),schemaErrorMap:this._def.errorMap,path:i.path,parent:i.parent}}_processInputParams(i){return{status:new rp,ctx:{common:i.parent.common,data:i.data,parsedType:getParsedType(i.data),schemaErrorMap:this._def.errorMap,path:i.path,parent:i.parent}}}_parseSync(i){let s=this._parse(i);if(isAsync(s))throw Error("Synchronous parse encountered promise.");return s}_parseAsync(i){let s=this._parse(i);return Promise.resolve(s)}parse(i,s){let f=this.safeParse(i,s);if(f.success)return f.data;throw f.error}safeParse(i,s){var f;let p={common:{issues:[],async:null!==(f=null==s?void 0:s.async)&&void 0!==f&&f,contextualErrorMap:null==s?void 0:s.errorMap},path:(null==s?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:i,parsedType:getParsedType(i)},g=this._parseSync({data:i,path:p.path,parent:p});return handleResult(p,g)}async parseAsync(i,s){let f=await this.safeParseAsync(i,s);if(f.success)return f.data;throw f.error}async safeParseAsync(i,s){let f={common:{issues:[],contextualErrorMap:null==s?void 0:s.errorMap,async:!0},path:(null==s?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:i,parsedType:getParsedType(i)},p=this._parse({data:i,path:f.path,parent:f}),g=await (isAsync(p)?p:Promise.resolve(p));return handleResult(f,g)}refine(i,s){let getIssueProperties=i=>"string"==typeof s||void 0===s?{message:s}:"function"==typeof s?s(i):s;return this._refinement((s,f)=>{let p=i(s),setError=()=>f.addIssue({code:rf.custom,...getIssueProperties(s)});return"undefined"!=typeof Promise&&p instanceof Promise?p.then(i=>!!i||(setError(),!1)):!!p||(setError(),!1)})}refinement(i,s){return this._refinement((f,p)=>!!i(f)||(p.addIssue("function"==typeof s?s(f,p):s),!1))}_refinement(i){return new rY({schema:this,typeName:U.ZodEffects,effect:{type:"refinement",refinement:i}})}superRefine(i){return this._refinement(i)}optional(){return rQ.create(this,this._def)}nullable(){return r0.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return rM.create(this,this._def)}promise(){return rJ.create(this,this._def)}or(i){return rF.create([this,i],this._def)}and(i){return rZ.create(this,i,this._def)}transform(i){return new rY({...processCreateParams(this._def),schema:this,typeName:U.ZodEffects,effect:{type:"transform",transform:i}})}default(i){return new r1({...processCreateParams(this._def),innerType:this,defaultValue:"function"==typeof i?i:()=>i,typeName:U.ZodDefault})}brand(){return new r4({typeName:U.ZodBranded,type:this,...processCreateParams(this._def)})}catch(i){return new r6({...processCreateParams(this._def),innerType:this,catchValue:"function"==typeof i?i:()=>i,typeName:U.ZodCatch})}describe(i){let s=this.constructor;return new s({...this._def,description:i})}pipe(i){return r9.create(this,i)}readonly(){return r7.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},rv=/^c[^\s-]{8,}$/i,rb=/^[a-z][a-z0-9]*$/,r_=/^[0-9A-HJKMNP-TV-Z]{26}$/,rw=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,rT=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,rS=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,rA=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,datetimeRegex=i=>i.precision?i.offset?RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${i.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${i.precision}}Z$`):0===i.precision?i.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):i.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function isValidIP(i,s){return!!(("v4"===s||!s)&&rS.test(i)||("v6"===s||!s)&&rA.test(i))}var rE=class _ZodString extends rm{_parse(i){let s;this._def.coerce&&(i.data=String(i.data));let f=this._getType(i);if(f!==rl.string){let s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:rf.invalid_type,expected:rl.string,received:s.parsedType}),rg}let p=new rp;for(let f of this._def.checks)if("min"===f.kind)i.data.length<f.value&&(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.too_small,minimum:f.value,type:"string",inclusive:!0,exact:!1,message:f.message}),p.dirty());else if("max"===f.kind)i.data.length>f.value&&(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.too_big,maximum:f.value,type:"string",inclusive:!0,exact:!1,message:f.message}),p.dirty());else if("length"===f.kind){let g=i.data.length>f.value,m=i.data.length<f.value;(g||m)&&(s=this._getOrReturnCtx(i,s),g?addIssueToContext(s,{code:rf.too_big,maximum:f.value,type:"string",inclusive:!0,exact:!0,message:f.message}):m&&addIssueToContext(s,{code:rf.too_small,minimum:f.value,type:"string",inclusive:!0,exact:!0,message:f.message}),p.dirty())}else if("email"===f.kind)rT.test(i.data)||(addIssueToContext(s=this._getOrReturnCtx(i,s),{validation:"email",code:rf.invalid_string,message:f.message}),p.dirty());else if("emoji"===f.kind)R||(R=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),R.test(i.data)||(addIssueToContext(s=this._getOrReturnCtx(i,s),{validation:"emoji",code:rf.invalid_string,message:f.message}),p.dirty());else if("uuid"===f.kind)rw.test(i.data)||(addIssueToContext(s=this._getOrReturnCtx(i,s),{validation:"uuid",code:rf.invalid_string,message:f.message}),p.dirty());else if("cuid"===f.kind)rv.test(i.data)||(addIssueToContext(s=this._getOrReturnCtx(i,s),{validation:"cuid",code:rf.invalid_string,message:f.message}),p.dirty());else if("cuid2"===f.kind)rb.test(i.data)||(addIssueToContext(s=this._getOrReturnCtx(i,s),{validation:"cuid2",code:rf.invalid_string,message:f.message}),p.dirty());else if("ulid"===f.kind)r_.test(i.data)||(addIssueToContext(s=this._getOrReturnCtx(i,s),{validation:"ulid",code:rf.invalid_string,message:f.message}),p.dirty());else if("url"===f.kind)try{new URL(i.data)}catch(g){addIssueToContext(s=this._getOrReturnCtx(i,s),{validation:"url",code:rf.invalid_string,message:f.message}),p.dirty()}else if("regex"===f.kind){f.regex.lastIndex=0;let g=f.regex.test(i.data);g||(addIssueToContext(s=this._getOrReturnCtx(i,s),{validation:"regex",code:rf.invalid_string,message:f.message}),p.dirty())}else if("trim"===f.kind)i.data=i.data.trim();else if("includes"===f.kind)i.data.includes(f.value,f.position)||(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.invalid_string,validation:{includes:f.value,position:f.position},message:f.message}),p.dirty());else if("toLowerCase"===f.kind)i.data=i.data.toLowerCase();else if("toUpperCase"===f.kind)i.data=i.data.toUpperCase();else if("startsWith"===f.kind)i.data.startsWith(f.value)||(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.invalid_string,validation:{startsWith:f.value},message:f.message}),p.dirty());else if("endsWith"===f.kind)i.data.endsWith(f.value)||(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.invalid_string,validation:{endsWith:f.value},message:f.message}),p.dirty());else if("datetime"===f.kind){let g=datetimeRegex(f);g.test(i.data)||(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.invalid_string,validation:"datetime",message:f.message}),p.dirty())}else"ip"===f.kind?isValidIP(i.data,f.version)||(addIssueToContext(s=this._getOrReturnCtx(i,s),{validation:"ip",code:rf.invalid_string,message:f.message}),p.dirty()):I.assertNever(f);return{status:p.value,value:i.data}}_regex(i,s,f){return this.refinement(s=>i.test(s),{validation:s,code:rf.invalid_string,...O.errToObj(f)})}_addCheck(i){return new _ZodString({...this._def,checks:[...this._def.checks,i]})}email(i){return this._addCheck({kind:"email",...O.errToObj(i)})}url(i){return this._addCheck({kind:"url",...O.errToObj(i)})}emoji(i){return this._addCheck({kind:"emoji",...O.errToObj(i)})}uuid(i){return this._addCheck({kind:"uuid",...O.errToObj(i)})}cuid(i){return this._addCheck({kind:"cuid",...O.errToObj(i)})}cuid2(i){return this._addCheck({kind:"cuid2",...O.errToObj(i)})}ulid(i){return this._addCheck({kind:"ulid",...O.errToObj(i)})}ip(i){return this._addCheck({kind:"ip",...O.errToObj(i)})}datetime(i){var s;return"string"==typeof i?this._addCheck({kind:"datetime",precision:null,offset:!1,message:i}):this._addCheck({kind:"datetime",precision:void 0===(null==i?void 0:i.precision)?null:null==i?void 0:i.precision,offset:null!==(s=null==i?void 0:i.offset)&&void 0!==s&&s,...O.errToObj(null==i?void 0:i.message)})}regex(i,s){return this._addCheck({kind:"regex",regex:i,...O.errToObj(s)})}includes(i,s){return this._addCheck({kind:"includes",value:i,position:null==s?void 0:s.position,...O.errToObj(null==s?void 0:s.message)})}startsWith(i,s){return this._addCheck({kind:"startsWith",value:i,...O.errToObj(s)})}endsWith(i,s){return this._addCheck({kind:"endsWith",value:i,...O.errToObj(s)})}min(i,s){return this._addCheck({kind:"min",value:i,...O.errToObj(s)})}max(i,s){return this._addCheck({kind:"max",value:i,...O.errToObj(s)})}length(i,s){return this._addCheck({kind:"length",value:i,...O.errToObj(s)})}nonempty(i){return this.min(1,O.errToObj(i))}trim(){return new _ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(i=>"datetime"===i.kind)}get isEmail(){return!!this._def.checks.find(i=>"email"===i.kind)}get isURL(){return!!this._def.checks.find(i=>"url"===i.kind)}get isEmoji(){return!!this._def.checks.find(i=>"emoji"===i.kind)}get isUUID(){return!!this._def.checks.find(i=>"uuid"===i.kind)}get isCUID(){return!!this._def.checks.find(i=>"cuid"===i.kind)}get isCUID2(){return!!this._def.checks.find(i=>"cuid2"===i.kind)}get isULID(){return!!this._def.checks.find(i=>"ulid"===i.kind)}get isIP(){return!!this._def.checks.find(i=>"ip"===i.kind)}get minLength(){let i=null;for(let s of this._def.checks)"min"===s.kind&&(null===i||s.value>i)&&(i=s.value);return i}get maxLength(){let i=null;for(let s of this._def.checks)"max"===s.kind&&(null===i||s.value<i)&&(i=s.value);return i}};function floatSafeRemainder(i,s){let f=(i.toString().split(".")[1]||"").length,p=(s.toString().split(".")[1]||"").length,g=f>p?f:p,m=parseInt(i.toFixed(g).replace(".","")),_=parseInt(s.toFixed(g).replace(".",""));return m%_/Math.pow(10,g)}rE.create=i=>{var s;return new rE({checks:[],typeName:U.ZodString,coerce:null!==(s=null==i?void 0:i.coerce)&&void 0!==s&&s,...processCreateParams(i)})};var rC=class _ZodNumber extends rm{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(i){let s;this._def.coerce&&(i.data=Number(i.data));let f=this._getType(i);if(f!==rl.number){let s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:rf.invalid_type,expected:rl.number,received:s.parsedType}),rg}let p=new rp;for(let f of this._def.checks)if("int"===f.kind)I.isInteger(i.data)||(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.invalid_type,expected:"integer",received:"float",message:f.message}),p.dirty());else if("min"===f.kind){let g=f.inclusive?i.data<f.value:i.data<=f.value;g&&(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.too_small,minimum:f.value,type:"number",inclusive:f.inclusive,exact:!1,message:f.message}),p.dirty())}else if("max"===f.kind){let g=f.inclusive?i.data>f.value:i.data>=f.value;g&&(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.too_big,maximum:f.value,type:"number",inclusive:f.inclusive,exact:!1,message:f.message}),p.dirty())}else"multipleOf"===f.kind?0!==floatSafeRemainder(i.data,f.value)&&(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.not_multiple_of,multipleOf:f.value,message:f.message}),p.dirty()):"finite"===f.kind?Number.isFinite(i.data)||(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.not_finite,message:f.message}),p.dirty()):I.assertNever(f);return{status:p.value,value:i.data}}gte(i,s){return this.setLimit("min",i,!0,O.toString(s))}gt(i,s){return this.setLimit("min",i,!1,O.toString(s))}lte(i,s){return this.setLimit("max",i,!0,O.toString(s))}lt(i,s){return this.setLimit("max",i,!1,O.toString(s))}setLimit(i,s,f,p){return new _ZodNumber({...this._def,checks:[...this._def.checks,{kind:i,value:s,inclusive:f,message:O.toString(p)}]})}_addCheck(i){return new _ZodNumber({...this._def,checks:[...this._def.checks,i]})}int(i){return this._addCheck({kind:"int",message:O.toString(i)})}positive(i){return this._addCheck({kind:"min",value:0,inclusive:!1,message:O.toString(i)})}negative(i){return this._addCheck({kind:"max",value:0,inclusive:!1,message:O.toString(i)})}nonpositive(i){return this._addCheck({kind:"max",value:0,inclusive:!0,message:O.toString(i)})}nonnegative(i){return this._addCheck({kind:"min",value:0,inclusive:!0,message:O.toString(i)})}multipleOf(i,s){return this._addCheck({kind:"multipleOf",value:i,message:O.toString(s)})}finite(i){return this._addCheck({kind:"finite",message:O.toString(i)})}safe(i){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:O.toString(i)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:O.toString(i)})}get minValue(){let i=null;for(let s of this._def.checks)"min"===s.kind&&(null===i||s.value>i)&&(i=s.value);return i}get maxValue(){let i=null;for(let s of this._def.checks)"max"===s.kind&&(null===i||s.value<i)&&(i=s.value);return i}get isInt(){return!!this._def.checks.find(i=>"int"===i.kind||"multipleOf"===i.kind&&I.isInteger(i.value))}get isFinite(){let i=null,s=null;for(let f of this._def.checks){if("finite"===f.kind||"int"===f.kind||"multipleOf"===f.kind)return!0;"min"===f.kind?(null===s||f.value>s)&&(s=f.value):"max"===f.kind&&(null===i||f.value<i)&&(i=f.value)}return Number.isFinite(s)&&Number.isFinite(i)}};rC.create=i=>new rC({checks:[],typeName:U.ZodNumber,coerce:(null==i?void 0:i.coerce)||!1,...processCreateParams(i)});var rx=class _ZodBigInt extends rm{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(i){let s;this._def.coerce&&(i.data=BigInt(i.data));let f=this._getType(i);if(f!==rl.bigint){let s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:rf.invalid_type,expected:rl.bigint,received:s.parsedType}),rg}let p=new rp;for(let f of this._def.checks)if("min"===f.kind){let g=f.inclusive?i.data<f.value:i.data<=f.value;g&&(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.too_small,type:"bigint",minimum:f.value,inclusive:f.inclusive,message:f.message}),p.dirty())}else if("max"===f.kind){let g=f.inclusive?i.data>f.value:i.data>=f.value;g&&(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.too_big,type:"bigint",maximum:f.value,inclusive:f.inclusive,message:f.message}),p.dirty())}else"multipleOf"===f.kind?i.data%f.value!==BigInt(0)&&(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.not_multiple_of,multipleOf:f.value,message:f.message}),p.dirty()):I.assertNever(f);return{status:p.value,value:i.data}}gte(i,s){return this.setLimit("min",i,!0,O.toString(s))}gt(i,s){return this.setLimit("min",i,!1,O.toString(s))}lte(i,s){return this.setLimit("max",i,!0,O.toString(s))}lt(i,s){return this.setLimit("max",i,!1,O.toString(s))}setLimit(i,s,f,p){return new _ZodBigInt({...this._def,checks:[...this._def.checks,{kind:i,value:s,inclusive:f,message:O.toString(p)}]})}_addCheck(i){return new _ZodBigInt({...this._def,checks:[...this._def.checks,i]})}positive(i){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:O.toString(i)})}negative(i){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:O.toString(i)})}nonpositive(i){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:O.toString(i)})}nonnegative(i){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:O.toString(i)})}multipleOf(i,s){return this._addCheck({kind:"multipleOf",value:i,message:O.toString(s)})}get minValue(){let i=null;for(let s of this._def.checks)"min"===s.kind&&(null===i||s.value>i)&&(i=s.value);return i}get maxValue(){let i=null;for(let s of this._def.checks)"max"===s.kind&&(null===i||s.value<i)&&(i=s.value);return i}};rx.create=i=>{var s;return new rx({checks:[],typeName:U.ZodBigInt,coerce:null!==(s=null==i?void 0:i.coerce)&&void 0!==s&&s,...processCreateParams(i)})};var rI=class extends rm{_parse(i){this._def.coerce&&(i.data=!!i.data);let s=this._getType(i);if(s!==rl.boolean){let s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:rf.invalid_type,expected:rl.boolean,received:s.parsedType}),rg}return OK(i.data)}};rI.create=i=>new rI({typeName:U.ZodBoolean,coerce:(null==i?void 0:i.coerce)||!1,...processCreateParams(i)});var rB=class _ZodDate extends rm{_parse(i){let s;this._def.coerce&&(i.data=new Date(i.data));let f=this._getType(i);if(f!==rl.date){let s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:rf.invalid_type,expected:rl.date,received:s.parsedType}),rg}if(isNaN(i.data.getTime())){let s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:rf.invalid_date}),rg}let p=new rp;for(let f of this._def.checks)"min"===f.kind?i.data.getTime()<f.value&&(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.too_small,message:f.message,inclusive:!0,exact:!1,minimum:f.value,type:"date"}),p.dirty()):"max"===f.kind?i.data.getTime()>f.value&&(addIssueToContext(s=this._getOrReturnCtx(i,s),{code:rf.too_big,message:f.message,inclusive:!0,exact:!1,maximum:f.value,type:"date"}),p.dirty()):I.assertNever(f);return{status:p.value,value:new Date(i.data.getTime())}}_addCheck(i){return new _ZodDate({...this._def,checks:[...this._def.checks,i]})}min(i,s){return this._addCheck({kind:"min",value:i.getTime(),message:O.toString(s)})}max(i,s){return this._addCheck({kind:"max",value:i.getTime(),message:O.toString(s)})}get minDate(){let i=null;for(let s of this._def.checks)"min"===s.kind&&(null===i||s.value>i)&&(i=s.value);return null!=i?new Date(i):null}get maxDate(){let i=null;for(let s of this._def.checks)"max"===s.kind&&(null===i||s.value<i)&&(i=s.value);return null!=i?new Date(i):null}};rB.create=i=>new rB({checks:[],coerce:(null==i?void 0:i.coerce)||!1,typeName:U.ZodDate,...processCreateParams(i)});var rO=class extends rm{_parse(i){let s=this._getType(i);if(s!==rl.symbol){let s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:rf.invalid_type,expected:rl.symbol,received:s.parsedType}),rg}return OK(i.data)}};rO.create=i=>new rO({typeName:U.ZodSymbol,...processCreateParams(i)});var rk=class extends rm{_parse(i){let s=this._getType(i);if(s!==rl.undefined){let s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:rf.invalid_type,expected:rl.undefined,received:s.parsedType}),rg}return OK(i.data)}};rk.create=i=>new rk({typeName:U.ZodUndefined,...processCreateParams(i)});var rR=class extends rm{_parse(i){let s=this._getType(i);if(s!==rl.null){let s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:rf.invalid_type,expected:rl.null,received:s.parsedType}),rg}return OK(i.data)}};rR.create=i=>new rR({typeName:U.ZodNull,...processCreateParams(i)});var rU=class extends rm{constructor(){super(...arguments),this._any=!0}_parse(i){return OK(i.data)}};rU.create=i=>new rU({typeName:U.ZodAny,...processCreateParams(i)});var rL=class extends rm{constructor(){super(...arguments),this._unknown=!0}_parse(i){return OK(i.data)}};rL.create=i=>new rL({typeName:U.ZodUnknown,...processCreateParams(i)});var rP=class extends rm{_parse(i){let s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:rf.invalid_type,expected:rl.never,received:s.parsedType}),rg}};rP.create=i=>new rP({typeName:U.ZodNever,...processCreateParams(i)});var rj=class extends rm{_parse(i){let s=this._getType(i);if(s!==rl.undefined){let s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:rf.invalid_type,expected:rl.void,received:s.parsedType}),rg}return OK(i.data)}};rj.create=i=>new rj({typeName:U.ZodVoid,...processCreateParams(i)});var rM=class _ZodArray extends rm{_parse(i){let{ctx:s,status:f}=this._processInputParams(i),p=this._def;if(s.parsedType!==rl.array)return addIssueToContext(s,{code:rf.invalid_type,expected:rl.array,received:s.parsedType}),rg;if(null!==p.exactLength){let i=s.data.length>p.exactLength.value,g=s.data.length<p.exactLength.value;(i||g)&&(addIssueToContext(s,{code:i?rf.too_big:rf.too_small,minimum:g?p.exactLength.value:void 0,maximum:i?p.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:p.exactLength.message}),f.dirty())}if(null!==p.minLength&&s.data.length<p.minLength.value&&(addIssueToContext(s,{code:rf.too_small,minimum:p.minLength.value,type:"array",inclusive:!0,exact:!1,message:p.minLength.message}),f.dirty()),null!==p.maxLength&&s.data.length>p.maxLength.value&&(addIssueToContext(s,{code:rf.too_big,maximum:p.maxLength.value,type:"array",inclusive:!0,exact:!1,message:p.maxLength.message}),f.dirty()),s.common.async)return Promise.all([...s.data].map((i,f)=>p.type._parseAsync(new ry(s,i,s.path,f)))).then(i=>rp.mergeArray(f,i));let g=[...s.data].map((i,f)=>p.type._parseSync(new ry(s,i,s.path,f)));return rp.mergeArray(f,g)}get element(){return this._def.type}min(i,s){return new _ZodArray({...this._def,minLength:{value:i,message:O.toString(s)}})}max(i,s){return new _ZodArray({...this._def,maxLength:{value:i,message:O.toString(s)}})}length(i,s){return new _ZodArray({...this._def,exactLength:{value:i,message:O.toString(s)}})}nonempty(i){return this.min(1,i)}};function deepPartialify(i){if(i instanceof rN){let s={};for(let f in i.shape){let p=i.shape[f];s[f]=rQ.create(deepPartialify(p))}return new rN({...i._def,shape:()=>s})}return i instanceof rM?new rM({...i._def,type:deepPartialify(i.element)}):i instanceof rQ?rQ.create(deepPartialify(i.unwrap())):i instanceof r0?r0.create(deepPartialify(i.unwrap())):i instanceof r$?r$.create(i.items.map(i=>deepPartialify(i))):i}rM.create=(i,s)=>new rM({type:i,minLength:null,maxLength:null,exactLength:null,typeName:U.ZodArray,...processCreateParams(s)});var rN=class _ZodObject extends rm{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let i=this._def.shape(),s=I.objectKeys(i);return this._cached={shape:i,keys:s}}_parse(i){let s=this._getType(i);if(s!==rl.object){let s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:rf.invalid_type,expected:rl.object,received:s.parsedType}),rg}let{status:f,ctx:p}=this._processInputParams(i),{shape:g,keys:m}=this._getCached(),_=[];if(!(this._def.catchall instanceof rP&&"strip"===this._def.unknownKeys))for(let i in p.data)m.includes(i)||_.push(i);let w=[];for(let i of m){let s=g[i],f=p.data[i];w.push({key:{status:"valid",value:i},value:s._parse(new ry(p,f,p.path,i)),alwaysSet:i in p.data})}if(this._def.catchall instanceof rP){let i=this._def.unknownKeys;if("passthrough"===i)for(let i of _)w.push({key:{status:"valid",value:i},value:{status:"valid",value:p.data[i]}});else if("strict"===i)_.length>0&&(addIssueToContext(p,{code:rf.unrecognized_keys,keys:_}),f.dirty());else if("strip"===i);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let i=this._def.catchall;for(let s of _){let f=p.data[s];w.push({key:{status:"valid",value:s},value:i._parse(new ry(p,f,p.path,s)),alwaysSet:s in p.data})}}return p.common.async?Promise.resolve().then(async()=>{let i=[];for(let s of w){let f=await s.key;i.push({key:f,value:await s.value,alwaysSet:s.alwaysSet})}return i}).then(i=>rp.mergeObjectSync(f,i)):rp.mergeObjectSync(f,w)}get shape(){return this._def.shape()}strict(i){return O.errToObj,new _ZodObject({...this._def,unknownKeys:"strict",...void 0!==i?{errorMap:(s,f)=>{var p,g,m,_;let w=null!==(m=null===(g=(p=this._def).errorMap)||void 0===g?void 0:g.call(p,s,f).message)&&void 0!==m?m:f.defaultError;return"unrecognized_keys"===s.code?{message:null!==(_=O.errToObj(i).message)&&void 0!==_?_:w}:{message:w}}}:{}})}strip(){return new _ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new _ZodObject({...this._def,unknownKeys:"passthrough"})}extend(i){return new _ZodObject({...this._def,shape:()=>({...this._def.shape(),...i})})}merge(i){let s=new _ZodObject({unknownKeys:i._def.unknownKeys,catchall:i._def.catchall,shape:()=>({...this._def.shape(),...i._def.shape()}),typeName:U.ZodObject});return s}setKey(i,s){return this.augment({[i]:s})}catchall(i){return new _ZodObject({...this._def,catchall:i})}pick(i){let s={};return I.objectKeys(i).forEach(f=>{i[f]&&this.shape[f]&&(s[f]=this.shape[f])}),new _ZodObject({...this._def,shape:()=>s})}omit(i){let s={};return I.objectKeys(this.shape).forEach(f=>{i[f]||(s[f]=this.shape[f])}),new _ZodObject({...this._def,shape:()=>s})}deepPartial(){return deepPartialify(this)}partial(i){let s={};return I.objectKeys(this.shape).forEach(f=>{let p=this.shape[f];i&&!i[f]?s[f]=p:s[f]=p.optional()}),new _ZodObject({...this._def,shape:()=>s})}required(i){let s={};return I.objectKeys(this.shape).forEach(f=>{if(i&&!i[f])s[f]=this.shape[f];else{let i=this.shape[f],p=i;for(;p instanceof rQ;)p=p._def.innerType;s[f]=p}}),new _ZodObject({...this._def,shape:()=>s})}keyof(){return createZodEnum(I.objectKeys(this.shape))}};rN.create=(i,s)=>new rN({shape:()=>i,unknownKeys:"strip",catchall:rP.create(),typeName:U.ZodObject,...processCreateParams(s)}),rN.strictCreate=(i,s)=>new rN({shape:()=>i,unknownKeys:"strict",catchall:rP.create(),typeName:U.ZodObject,...processCreateParams(s)}),rN.lazycreate=(i,s)=>new rN({shape:i,unknownKeys:"strip",catchall:rP.create(),typeName:U.ZodObject,...processCreateParams(s)});var rF=class extends rm{_parse(i){let{ctx:s}=this._processInputParams(i),f=this._def.options;function handleResults(i){for(let s of i)if("valid"===s.result.status)return s.result;for(let f of i)if("dirty"===f.result.status)return s.common.issues.push(...f.ctx.common.issues),f.result;let f=i.map(i=>new rh(i.ctx.common.issues));return addIssueToContext(s,{code:rf.invalid_union,unionErrors:f}),rg}if(s.common.async)return Promise.all(f.map(async i=>{let f={...s,common:{...s.common,issues:[]},parent:null};return{result:await i._parseAsync({data:s.data,path:s.path,parent:f}),ctx:f}})).then(handleResults);{let i;let p=[];for(let g of f){let f={...s,common:{...s.common,issues:[]},parent:null},m=g._parseSync({data:s.data,path:s.path,parent:f});if("valid"===m.status)return m;"dirty"!==m.status||i||(i={result:m,ctx:f}),f.common.issues.length&&p.push(f.common.issues)}if(i)return s.common.issues.push(...i.ctx.common.issues),i.result;let g=p.map(i=>new rh(i));return addIssueToContext(s,{code:rf.invalid_union,unionErrors:g}),rg}}get options(){return this._def.options}};rF.create=(i,s)=>new rF({options:i,typeName:U.ZodUnion,...processCreateParams(s)});var getDiscriminator=i=>{if(i instanceof rK)return getDiscriminator(i.schema);if(i instanceof rY)return getDiscriminator(i.innerType());if(i instanceof rG)return[i.value];if(i instanceof rH)return i.options;if(i instanceof rX)return Object.keys(i.enum);if(i instanceof r1)return getDiscriminator(i._def.innerType);if(i instanceof rk)return[void 0];else if(i instanceof rR)return[null];else return null},rD=class _ZodDiscriminatedUnion extends rm{_parse(i){let{ctx:s}=this._processInputParams(i);if(s.parsedType!==rl.object)return addIssueToContext(s,{code:rf.invalid_type,expected:rl.object,received:s.parsedType}),rg;let f=this.discriminator,p=s.data[f],g=this.optionsMap.get(p);return g?s.common.async?g._parseAsync({data:s.data,path:s.path,parent:s}):g._parseSync({data:s.data,path:s.path,parent:s}):(addIssueToContext(s,{code:rf.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[f]}),rg)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(i,s,f){let p=new Map;for(let f of s){let s=getDiscriminator(f.shape[i]);if(!s)throw Error(`A discriminator value for key \`${i}\` could not be extracted from all schema options`);for(let g of s){if(p.has(g))throw Error(`Discriminator property ${String(i)} has duplicate value ${String(g)}`);p.set(g,f)}}return new _ZodDiscriminatedUnion({typeName:U.ZodDiscriminatedUnion,discriminator:i,options:s,optionsMap:p,...processCreateParams(f)})}};function mergeValues(i,s){let f=getParsedType(i),p=getParsedType(s);if(i===s)return{valid:!0,data:i};if(f===rl.object&&p===rl.object){let f=I.objectKeys(s),p=I.objectKeys(i).filter(i=>-1!==f.indexOf(i)),g={...i,...s};for(let f of p){let p=mergeValues(i[f],s[f]);if(!p.valid)return{valid:!1};g[f]=p.data}return{valid:!0,data:g}}if(f===rl.array&&p===rl.array){if(i.length!==s.length)return{valid:!1};let f=[];for(let p=0;p<i.length;p++){let g=i[p],m=s[p],_=mergeValues(g,m);if(!_.valid)return{valid:!1};f.push(_.data)}return{valid:!0,data:f}}return f===rl.date&&p===rl.date&&+i==+s?{valid:!0,data:i}:{valid:!1}}var rZ=class extends rm{_parse(i){let{status:s,ctx:f}=this._processInputParams(i),handleParsed=(i,p)=>{if(isAborted(i)||isAborted(p))return rg;let g=mergeValues(i.value,p.value);return g.valid?((isDirty(i)||isDirty(p))&&s.dirty(),{status:s.value,value:g.data}):(addIssueToContext(f,{code:rf.invalid_intersection_types}),rg)};return f.common.async?Promise.all([this._def.left._parseAsync({data:f.data,path:f.path,parent:f}),this._def.right._parseAsync({data:f.data,path:f.path,parent:f})]).then(([i,s])=>handleParsed(i,s)):handleParsed(this._def.left._parseSync({data:f.data,path:f.path,parent:f}),this._def.right._parseSync({data:f.data,path:f.path,parent:f}))}};rZ.create=(i,s,f)=>new rZ({left:i,right:s,typeName:U.ZodIntersection,...processCreateParams(f)});var r$=class _ZodTuple extends rm{_parse(i){let{status:s,ctx:f}=this._processInputParams(i);if(f.parsedType!==rl.array)return addIssueToContext(f,{code:rf.invalid_type,expected:rl.array,received:f.parsedType}),rg;if(f.data.length<this._def.items.length)return addIssueToContext(f,{code:rf.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),rg;let p=this._def.rest;!p&&f.data.length>this._def.items.length&&(addIssueToContext(f,{code:rf.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());let g=[...f.data].map((i,s)=>{let p=this._def.items[s]||this._def.rest;return p?p._parse(new ry(f,i,f.path,s)):null}).filter(i=>!!i);return f.common.async?Promise.all(g).then(i=>rp.mergeArray(s,i)):rp.mergeArray(s,g)}get items(){return this._def.items}rest(i){return new _ZodTuple({...this._def,rest:i})}};r$.create=(i,s)=>{if(!Array.isArray(i))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new r$({items:i,typeName:U.ZodTuple,rest:null,...processCreateParams(s)})};var rW=class _ZodRecord extends rm{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(i){let{status:s,ctx:f}=this._processInputParams(i);if(f.parsedType!==rl.object)return addIssueToContext(f,{code:rf.invalid_type,expected:rl.object,received:f.parsedType}),rg;let p=[],g=this._def.keyType,m=this._def.valueType;for(let i in f.data)p.push({key:g._parse(new ry(f,i,f.path,i)),value:m._parse(new ry(f,f.data[i],f.path,i))});return f.common.async?rp.mergeObjectAsync(s,p):rp.mergeObjectSync(s,p)}get element(){return this._def.valueType}static create(i,s,f){return new _ZodRecord(s instanceof rm?{keyType:i,valueType:s,typeName:U.ZodRecord,...processCreateParams(f)}:{keyType:rE.create(),valueType:i,typeName:U.ZodRecord,...processCreateParams(s)})}},rz=class extends rm{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(i){let{status:s,ctx:f}=this._processInputParams(i);if(f.parsedType!==rl.map)return addIssueToContext(f,{code:rf.invalid_type,expected:rl.map,received:f.parsedType}),rg;let p=this._def.keyType,g=this._def.valueType,m=[...f.data.entries()].map(([i,s],m)=>({key:p._parse(new ry(f,i,f.path,[m,"key"])),value:g._parse(new ry(f,s,f.path,[m,"value"]))}));if(f.common.async){let i=new Map;return Promise.resolve().then(async()=>{for(let f of m){let p=await f.key,g=await f.value;if("aborted"===p.status||"aborted"===g.status)return rg;("dirty"===p.status||"dirty"===g.status)&&s.dirty(),i.set(p.value,g.value)}return{status:s.value,value:i}})}{let i=new Map;for(let f of m){let p=f.key,g=f.value;if("aborted"===p.status||"aborted"===g.status)return rg;("dirty"===p.status||"dirty"===g.status)&&s.dirty(),i.set(p.value,g.value)}return{status:s.value,value:i}}}};rz.create=(i,s,f)=>new rz({valueType:s,keyType:i,typeName:U.ZodMap,...processCreateParams(f)});var rV=class _ZodSet extends rm{_parse(i){let{status:s,ctx:f}=this._processInputParams(i);if(f.parsedType!==rl.set)return addIssueToContext(f,{code:rf.invalid_type,expected:rl.set,received:f.parsedType}),rg;let p=this._def;null!==p.minSize&&f.data.size<p.minSize.value&&(addIssueToContext(f,{code:rf.too_small,minimum:p.minSize.value,type:"set",inclusive:!0,exact:!1,message:p.minSize.message}),s.dirty()),null!==p.maxSize&&f.data.size>p.maxSize.value&&(addIssueToContext(f,{code:rf.too_big,maximum:p.maxSize.value,type:"set",inclusive:!0,exact:!1,message:p.maxSize.message}),s.dirty());let g=this._def.valueType;function finalizeSet(i){let f=new Set;for(let p of i){if("aborted"===p.status)return rg;"dirty"===p.status&&s.dirty(),f.add(p.value)}return{status:s.value,value:f}}let m=[...f.data.values()].map((i,s)=>g._parse(new ry(f,i,f.path,s)));return f.common.async?Promise.all(m).then(i=>finalizeSet(i)):finalizeSet(m)}min(i,s){return new _ZodSet({...this._def,minSize:{value:i,message:O.toString(s)}})}max(i,s){return new _ZodSet({...this._def,maxSize:{value:i,message:O.toString(s)}})}size(i,s){return this.min(i,s).max(i,s)}nonempty(i){return this.min(1,i)}};rV.create=(i,s)=>new rV({valueType:i,minSize:null,maxSize:null,typeName:U.ZodSet,...processCreateParams(s)});var rq=class _ZodFunction extends rm{constructor(){super(...arguments),this.validate=this.implement}_parse(i){let{ctx:s}=this._processInputParams(i);if(s.parsedType!==rl.function)return addIssueToContext(s,{code:rf.invalid_type,expected:rl.function,received:s.parsedType}),rg;function makeArgsIssue(i,f){return makeIssue({data:i,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,getErrorMap(),errorMap].filter(i=>!!i),issueData:{code:rf.invalid_arguments,argumentsError:f}})}function makeReturnsIssue(i,f){return makeIssue({data:i,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,getErrorMap(),errorMap].filter(i=>!!i),issueData:{code:rf.invalid_return_type,returnTypeError:f}})}let f={errorMap:s.common.contextualErrorMap},p=s.data;if(this._def.returns instanceof rJ){let i=this;return OK(async function(...s){let g=new rh([]),m=await i._def.args.parseAsync(s,f).catch(i=>{throw g.addIssue(makeArgsIssue(s,i)),g}),_=await Reflect.apply(p,this,m),w=await i._def.returns._def.type.parseAsync(_,f).catch(i=>{throw g.addIssue(makeReturnsIssue(_,i)),g});return w})}{let i=this;return OK(function(...s){let g=i._def.args.safeParse(s,f);if(!g.success)throw new rh([makeArgsIssue(s,g.error)]);let m=Reflect.apply(p,this,g.data),_=i._def.returns.safeParse(m,f);if(!_.success)throw new rh([makeReturnsIssue(m,_.error)]);return _.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...i){return new _ZodFunction({...this._def,args:r$.create(i).rest(rL.create())})}returns(i){return new _ZodFunction({...this._def,returns:i})}implement(i){let s=this.parse(i);return s}strictImplement(i){let s=this.parse(i);return s}static create(i,s,f){return new _ZodFunction({args:i||r$.create([]).rest(rL.create()),returns:s||rL.create(),typeName:U.ZodFunction,...processCreateParams(f)})}},rK=class extends rm{get schema(){return this._def.getter()}_parse(i){let{ctx:s}=this._processInputParams(i),f=this._def.getter();return f._parse({data:s.data,path:s.path,parent:s})}};rK.create=(i,s)=>new rK({getter:i,typeName:U.ZodLazy,...processCreateParams(s)});var rG=class extends rm{_parse(i){if(i.data!==this._def.value){let s=this._getOrReturnCtx(i);return addIssueToContext(s,{received:s.data,code:rf.invalid_literal,expected:this._def.value}),rg}return{status:"valid",value:i.data}}get value(){return this._def.value}};function createZodEnum(i,s){return new rH({values:i,typeName:U.ZodEnum,...processCreateParams(s)})}rG.create=(i,s)=>new rG({value:i,typeName:U.ZodLiteral,...processCreateParams(s)});var rH=class _ZodEnum extends rm{_parse(i){if("string"!=typeof i.data){let s=this._getOrReturnCtx(i),f=this._def.values;return addIssueToContext(s,{expected:I.joinValues(f),received:s.parsedType,code:rf.invalid_type}),rg}if(-1===this._def.values.indexOf(i.data)){let s=this._getOrReturnCtx(i),f=this._def.values;return addIssueToContext(s,{received:s.data,code:rf.invalid_enum_value,options:f}),rg}return OK(i.data)}get options(){return this._def.values}get enum(){let i={};for(let s of this._def.values)i[s]=s;return i}get Values(){let i={};for(let s of this._def.values)i[s]=s;return i}get Enum(){let i={};for(let s of this._def.values)i[s]=s;return i}extract(i){return _ZodEnum.create(i)}exclude(i){return _ZodEnum.create(this.options.filter(s=>!i.includes(s)))}};rH.create=createZodEnum;var rX=class extends rm{_parse(i){let s=I.getValidEnumValues(this._def.values),f=this._getOrReturnCtx(i);if(f.parsedType!==rl.string&&f.parsedType!==rl.number){let i=I.objectValues(s);return addIssueToContext(f,{expected:I.joinValues(i),received:f.parsedType,code:rf.invalid_type}),rg}if(-1===s.indexOf(i.data)){let i=I.objectValues(s);return addIssueToContext(f,{received:f.data,code:rf.invalid_enum_value,options:i}),rg}return OK(i.data)}get enum(){return this._def.values}};rX.create=(i,s)=>new rX({values:i,typeName:U.ZodNativeEnum,...processCreateParams(s)});var rJ=class extends rm{unwrap(){return this._def.type}_parse(i){let{ctx:s}=this._processInputParams(i);if(s.parsedType!==rl.promise&&!1===s.common.async)return addIssueToContext(s,{code:rf.invalid_type,expected:rl.promise,received:s.parsedType}),rg;let f=s.parsedType===rl.promise?s.data:Promise.resolve(s.data);return OK(f.then(i=>this._def.type.parseAsync(i,{path:s.path,errorMap:s.common.contextualErrorMap})))}};rJ.create=(i,s)=>new rJ({type:i,typeName:U.ZodPromise,...processCreateParams(s)});var rY=class extends rm{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===U.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(i){let{status:s,ctx:f}=this._processInputParams(i),p=this._def.effect||null,g={addIssue:i=>{addIssueToContext(f,i),i.fatal?s.abort():s.dirty()},get path(){return f.path}};if(g.addIssue=g.addIssue.bind(g),"preprocess"===p.type){let i=p.transform(f.data,g);return f.common.issues.length?{status:"dirty",value:f.data}:f.common.async?Promise.resolve(i).then(i=>this._def.schema._parseAsync({data:i,path:f.path,parent:f})):this._def.schema._parseSync({data:i,path:f.path,parent:f})}if("refinement"===p.type){let executeRefinement=i=>{let s=p.refinement(i,g);if(f.common.async)return Promise.resolve(s);if(s instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(!1!==f.common.async)return this._def.schema._parseAsync({data:f.data,path:f.path,parent:f}).then(i=>"aborted"===i.status?rg:("dirty"===i.status&&s.dirty(),executeRefinement(i.value).then(()=>({status:s.value,value:i.value}))));{let i=this._def.schema._parseSync({data:f.data,path:f.path,parent:f});return"aborted"===i.status?rg:("dirty"===i.status&&s.dirty(),executeRefinement(i.value),{status:s.value,value:i.value})}}if("transform"===p.type){if(!1!==f.common.async)return this._def.schema._parseAsync({data:f.data,path:f.path,parent:f}).then(i=>isValid(i)?Promise.resolve(p.transform(i.value,g)).then(i=>({status:s.value,value:i})):i);{let i=this._def.schema._parseSync({data:f.data,path:f.path,parent:f});if(!isValid(i))return i;let m=p.transform(i.value,g);if(m instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:m}}}I.assertNever(p)}};rY.create=(i,s,f)=>new rY({schema:i,typeName:U.ZodEffects,effect:s,...processCreateParams(f)}),rY.createWithPreprocess=(i,s,f)=>new rY({schema:s,effect:{type:"preprocess",transform:i},typeName:U.ZodEffects,...processCreateParams(f)});var rQ=class extends rm{_parse(i){let s=this._getType(i);return s===rl.undefined?OK(void 0):this._def.innerType._parse(i)}unwrap(){return this._def.innerType}};rQ.create=(i,s)=>new rQ({innerType:i,typeName:U.ZodOptional,...processCreateParams(s)});var r0=class extends rm{_parse(i){let s=this._getType(i);return s===rl.null?OK(null):this._def.innerType._parse(i)}unwrap(){return this._def.innerType}};r0.create=(i,s)=>new r0({innerType:i,typeName:U.ZodNullable,...processCreateParams(s)});var r1=class extends rm{_parse(i){let{ctx:s}=this._processInputParams(i),f=s.data;return s.parsedType===rl.undefined&&(f=this._def.defaultValue()),this._def.innerType._parse({data:f,path:s.path,parent:s})}removeDefault(){return this._def.innerType}};r1.create=(i,s)=>new r1({innerType:i,typeName:U.ZodDefault,defaultValue:"function"==typeof s.default?s.default:()=>s.default,...processCreateParams(s)});var r6=class extends rm{_parse(i){let{ctx:s}=this._processInputParams(i),f={...s,common:{...s.common,issues:[]}},p=this._def.innerType._parse({data:f.data,path:f.path,parent:{...f}});return isAsync(p)?p.then(i=>({status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new rh(f.common.issues)},input:f.data})})):{status:"valid",value:"valid"===p.status?p.value:this._def.catchValue({get error(){return new rh(f.common.issues)},input:f.data})}}removeCatch(){return this._def.innerType}};r6.create=(i,s)=>new r6({innerType:i,typeName:U.ZodCatch,catchValue:"function"==typeof s.catch?s.catch:()=>s.catch,...processCreateParams(s)});var r8=class extends rm{_parse(i){let s=this._getType(i);if(s!==rl.nan){let s=this._getOrReturnCtx(i);return addIssueToContext(s,{code:rf.invalid_type,expected:rl.nan,received:s.parsedType}),rg}return{status:"valid",value:i.data}}};r8.create=i=>new r8({typeName:U.ZodNaN,...processCreateParams(i)});var r5=Symbol("zod_brand"),r4=class extends rm{_parse(i){let{ctx:s}=this._processInputParams(i),f=s.data;return this._def.type._parse({data:f,path:s.path,parent:s})}unwrap(){return this._def.type}},r9=class _ZodPipeline extends rm{_parse(i){let{status:s,ctx:f}=this._processInputParams(i);if(f.common.async){let handleAsync=async()=>{let i=await this._def.in._parseAsync({data:f.data,path:f.path,parent:f});return"aborted"===i.status?rg:"dirty"===i.status?(s.dirty(),DIRTY(i.value)):this._def.out._parseAsync({data:i.value,path:f.path,parent:f})};return handleAsync()}{let i=this._def.in._parseSync({data:f.data,path:f.path,parent:f});return"aborted"===i.status?rg:"dirty"===i.status?(s.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:f.path,parent:f})}}static create(i,s){return new _ZodPipeline({in:i,out:s,typeName:U.ZodPipeline})}},r7=class extends rm{_parse(i){let s=this._def.innerType._parse(i);return isValid(s)&&(s.value=Object.freeze(s.value)),s}};r7.create=(i,s)=>new r7({innerType:i,typeName:U.ZodReadonly,...processCreateParams(s)});var custom=(i,s={},f)=>i?rU.create().superRefine((p,g)=>{var m,_;if(!i(p)){let i="function"==typeof s?s(p):"string"==typeof s?{message:s}:s,w=null===(_=null!==(m=i.fatal)&&void 0!==m?m:f)||void 0===_||_,E="string"==typeof i?{message:i}:i;g.addIssue({code:"custom",...E,fatal:w})}}):rU.create(),nt={object:rN.lazycreate};(g=U||(U={})).ZodString="ZodString",g.ZodNumber="ZodNumber",g.ZodNaN="ZodNaN",g.ZodBigInt="ZodBigInt",g.ZodBoolean="ZodBoolean",g.ZodDate="ZodDate",g.ZodSymbol="ZodSymbol",g.ZodUndefined="ZodUndefined",g.ZodNull="ZodNull",g.ZodAny="ZodAny",g.ZodUnknown="ZodUnknown",g.ZodNever="ZodNever",g.ZodVoid="ZodVoid",g.ZodArray="ZodArray",g.ZodObject="ZodObject",g.ZodUnion="ZodUnion",g.ZodDiscriminatedUnion="ZodDiscriminatedUnion",g.ZodIntersection="ZodIntersection",g.ZodTuple="ZodTuple",g.ZodRecord="ZodRecord",g.ZodMap="ZodMap",g.ZodSet="ZodSet",g.ZodFunction="ZodFunction",g.ZodLazy="ZodLazy",g.ZodLiteral="ZodLiteral",g.ZodEnum="ZodEnum",g.ZodEffects="ZodEffects",g.ZodNativeEnum="ZodNativeEnum",g.ZodOptional="ZodOptional",g.ZodNullable="ZodNullable",g.ZodDefault="ZodDefault",g.ZodCatch="ZodCatch",g.ZodPromise="ZodPromise",g.ZodBranded="ZodBranded",g.ZodPipeline="ZodPipeline",g.ZodReadonly="ZodReadonly";var nr=rE.create,nn=rC.create,ni=r8.create,na=rx.create,ns=rI.create,no=rB.create,nu=rO.create,nc=rk.create,nl=rR.create,nf=rU.create,nh=rL.create,nd=rP.create,np=rj.create,ng=rM.create,ny=rN.create,nm=rN.strictCreate,nv=rF.create,nb=rD.create,n_=rZ.create,nw=r$.create,nT=rW.create,nS=rz.create,nA=rV.create,nE=rq.create,nC=rK.create,nx=rG.create,nI=rH.create,nB=rX.create,nO=rJ.create,nk=rY.create,nR=rQ.create,nU=r0.create,nL=rY.createWithPreprocess,nP=r9.create,nj=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH:[],addIssueToContext,ParseStatus:rp,INVALID:rg,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return I},get objectUtil(){return B},ZodParsedType:rl,getParsedType,ZodType:rm,ZodString:rE,ZodNumber:rC,ZodBigInt:rx,ZodBoolean:rI,ZodDate:rB,ZodSymbol:rO,ZodUndefined:rk,ZodNull:rR,ZodAny:rU,ZodUnknown:rL,ZodNever:rP,ZodVoid:rj,ZodArray:rM,ZodObject:rN,ZodUnion:rF,ZodDiscriminatedUnion:rD,ZodIntersection:rZ,ZodTuple:r$,ZodRecord:rW,ZodMap:rz,ZodSet:rV,ZodFunction:rq,ZodLazy:rK,ZodLiteral:rG,ZodEnum:rH,ZodNativeEnum:rX,ZodPromise:rJ,ZodEffects:rY,ZodTransformer:rY,ZodOptional:rQ,ZodNullable:r0,ZodDefault:r1,ZodCatch:r6,ZodNaN:r8,BRAND:r5,ZodBranded:r4,ZodPipeline:r9,ZodReadonly:r7,custom,Schema:rm,ZodSchema:rm,late:nt,get ZodFirstPartyTypeKind(){return U},coerce:{string:i=>rE.create({...i,coerce:!0}),number:i=>rC.create({...i,coerce:!0}),boolean:i=>rI.create({...i,coerce:!0}),bigint:i=>rx.create({...i,coerce:!0}),date:i=>rB.create({...i,coerce:!0})},any:nf,array:ng,bigint:na,boolean:ns,date:no,discriminatedUnion:nb,effect:nk,enum:nI,function:nE,instanceof:(i,s={message:`Input not instance of ${i.name}`})=>custom(s=>s instanceof i,s),intersection:n_,lazy:nC,literal:nx,map:nS,nan:ni,nativeEnum:nB,never:nd,null:nl,nullable:nU,number:nn,object:ny,oboolean:()=>ns().optional(),onumber:()=>nn().optional(),optional:nR,ostring:()=>nr().optional(),pipeline:nP,preprocess:nL,promise:nO,record:nT,set:nA,strictObject:nm,string:nr,symbol:nu,transformer:nk,tuple:nw,undefined:nc,union:nv,unknown:nh,void:np,NEVER:rg,ZodIssueCode:rf,quotelessJson:i=>{let s=JSON.stringify(i,null,2);return s.replace(/"([^"]+)":/g,"$1:")},ZodError:rh});function loadTransactionMetaWith({fetch:i,GRAPHQL_URL:s,logger:f}){let p=`
    query GetTransactions ($transactionIds: [ID!]!) {
      transactions(ids: $transactionIds) {
        edges {
          node {
            owner {
              address
            }
            tags {
              name
              value
            }
            block {
              id
              height
              timestamp
            }
          }
        }
      }
    }`,g=nj.object({data:nj.object({transactions:nj.object({edges:nj.array(nj.object({node:nj.record(nj.any())}))})})});return m=>of(m).chain(fromPromise(m=>i(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:p,variables:{transactionIds:[m]}})}).then(async i=>{if(i.ok)return i.json();throw f('Error Encountered when querying gateway for transaction "%s"',m),Error(`${i.status}: ${await i.text()}`)}).then(g.parse).then(ra(["data","transactions","edges","0","node"])))).toPromise()}var nM=__toESM(ed(),1),createLogger=(i="@permaweb/aoconnect")=>{let s=(0,nM.default)(i);return s.child=i=>createLogger(`${s.namespace}:${i}`),s.tap=(i,...f)=>rc((...p)=>s(i,...f,...p)),s},joinUrl=({url:i,path:s})=>s?s.startsWith("/")?joinUrl({url:i,path:s.slice(1)}):(i=new URL(i),i.pathname+=s,i.toString()):i;function parseTags(i){return pipe(t3([]),tF((i,s)=>pipe(ro([],s.name),t$(s.value),tV(s.name,tc,i))(i),{}),tB(i=>i.length>1?i:i[0]))(i)}function removeTagsByNameMaybeValue(i,s){return f=>tE(tD([rs(i,"name"),t5(tZ(s),rs(s,"value"),T_default)]),f)}function eqOrIncludes(i){return t1([[t7(String),tw(i)],[t7(Array),t4(i)],[T_default,F_default]])}function errFrom(i){let s;return t7(rh,i)?(s=Error(mapZodErr(i)),s.stack+=i.stack):s=t7(Error,i)?i:t8("message",i)?Error(i.message):t7(String,i)?Error(i):Error("An error occurred"),s}function mapZodErr(i){return pipe(i=>(function gatherZodIssues(i,s,f){return tF((i,p)=>pipe(t1([[tw(rf.invalid_arguments),()=>gatherZodIssues(p.argumentsError,422,"Invalid Arguments")],[tw(rf.invalid_return_type),()=>gatherZodIssues(p.returnTypeError,500,"Invalid Return")],[tw(rf.invalid_union),()=>tJ(i=>gatherZodIssues(i,400,"Invalid Union"),p.unionErrors)],[T_default,()=>[{...p,status:s,contextCode:f}]]]),t2(i))(p.code),[],i.issues)})(i,400,""),i=>tF((i,s)=>{let{message:f,path:p,contextCode:g}=s,m=p[1]||p[0],_=g?`${g} `:"";return i.push(`${_}'${m}': ${f}.`),i},[],i),rn(" | "))(i)}var nN=nj.object({id:nj.string().min(1,{message:"message is required to be a message id"}),processId:nj.string().min(1,{message:"process is required to be a process id"})});function verifyInputWith(){return i=>of(i).map(nN.parse).map(()=>i)}var nF=nj.object({name:nj.string(),value:nj.string()}),nD=nj.function().args(nj.object({Id:nj.string(),Target:nj.string(),Owner:nj.string(),Anchor:nj.string().optional(),Data:nj.any().default("1234"),Tags:nj.array(nj.object({name:nj.string(),value:nj.string()}))})).returns(nj.promise(nj.any())),nZ=nj.function().args(nj.object({id:nj.string().min(1,{message:"message id is required"}),processId:nj.string().min(1,{message:"process id is required"})})).returns(nj.promise(nj.any())),n$=nj.function().args(nj.object({process:nj.string().min(1,{message:"process id is required"}),from:nj.string().optional(),to:nj.string().optional(),sort:nj.enum(["ASC","DESC"]).default("ASC"),limit:nj.number().optional()})).returns(nj.promise(nj.object({edges:nj.array(nj.object({cursor:nj.string(),node:nj.object({Output:nj.any().optional(),Messages:nj.array(nj.any()).optional(),Spawns:nj.array(nj.any()).optional(),Error:nj.any().optional()})}))}))),nW=nj.function().args(nj.object({processId:nj.string(),data:nj.any(),tags:nj.array(nF),anchor:nj.string().optional(),signer:nj.any()})).returns(nj.promise(nj.object({messageId:nj.string()}).passthrough())),nz=nj.function().args(nj.object({data:nj.any(),tags:nj.array(nF),signer:nj.any()})).returns(nj.promise(nj.object({processId:nj.string()}).passthrough())),nV=nj.function().args(nj.object({process:nj.string(),message:nj.string(),baseLayer:nj.boolean().optional(),exclude:nj.array(nj.string()).optional()})).returns(nj.promise(nj.object({assignmentId:nj.string()}).passthrough()));nj.function().args(nj.object({suUrl:nj.string().url(),processId:nj.string()})).returns(nj.promise(nj.object({tags:nj.array(nF)}).passthrough())),nj.function().args(nj.string()).returns(nj.promise(nj.object({url:nj.string()})));var nq=nj.function().args(nj.string()).returns(nj.promise(nj.boolean())),nK=nj.function().args(nj.string()).returns(nj.promise(nj.object({tags:nj.array(nF)}).passthrough())),nG=nj.function().args(nj.object({data:nj.any(),tags:nj.array(nF),target:nj.string().optional(),anchor:nj.string().optional()})).returns(nj.promise(nj.object({id:nj.string(),raw:nj.any()})));function readWith({loadResult:i}){return i=fromPromise(nZ.implement(i)),s=>of({id:s.id,processId:s.processId}).chain(i)}function resultWith(i){let s=verifyInputWith(i),f=readWith(i);return({message:p,process:g})=>of({id:p,processId:g}).chain(s).chain(f).map(i.logger.tap('readResult result for message "%s": %O',p)).map(i=>i).bimap(errFrom,t0).toPromise()}var nH=nj.array(nj.object({name:nj.string(),value:nj.string()}));function buildTagsWith(){return i=>of(i.tags).map(t3([])).map(removeTagsByNameMaybeValue("Data-Protocol","ao")).map(removeTagsByNameMaybeValue("Variant")).map(removeTagsByNameMaybeValue("Type")).map(removeTagsByNameMaybeValue("SDK")).map(t2(tc,[{name:"Data-Protocol",value:"ao"},{name:"Variant",value:"ao.TN.1"},{name:"Type",value:"Message"},{name:"SDK",value:"aoconnect"}])).map(nH.parse).map(tV("tags",tc,i))}function buildDataWith({logger:i}){return s=>of(s).chain(t5(tZ(s.data),()=>Resolved(s),()=>Resolved(Math.random().toString().slice(-4)).map(tV("data",tc,s)).map(i=>pipe(tR("tags"),removeTagsByNameMaybeValue("Content-Type"),t$({name:"Content-Type",value:"text/plain"}),tV("tags",tc,i))(i)).map(i.tap('added pseudo-random string as message "data"'))))}function uploadMessageWith(i){let s=buildTagsWith(i),f=buildDataWith(i),p=nW.implement(i.deployMessage);return i=>of(i).chain(s).chain(f).chain(fromPromise(({id:i,data:s,tags:f,anchor:g,signer:m})=>p({processId:i,data:s,tags:f,anchor:g,signer:nG.implement(m)}))).map(s=>tV("messageId",s.messageId,i))}function messageWith(i){let s=uploadMessageWith(i);return({process:i,data:f,tags:p,anchor:g,signer:m})=>of({id:i,data:f,tags:p,anchor:g,signer:m}).chain(s).map(i=>i.messageId).bimap(errFrom,t0).toPromise()}var checkTag=(i,s,f)=>p=>s(p[i])?Resolved(p):Rejected(`Tag '${i}': ${f}`);function verifyModuleWith({loadTransactionMeta:i,logger:s}){return i=fromPromise(nK.implement(i)),f=>of(f).chain(i).map(tR("tags")).map(parseTags).chain(checkTag("Data-Protocol",eqOrIncludes("ao"),"value 'ao' was not found on module")).chain(checkTag("Type",eqOrIncludes("Module"),"value 'Module' was not found on module")).chain(checkTag("Module-Format",rr,"was not found on module")).chain(checkTag("Input-Encoding",rr,"was not found on module")).chain(checkTag("Output-Encoding",rr,"was not found on module")).bimap(s.tap("Verifying module source failed: %s"),s.tap("Verified module source"))}function verifySchedulerWith({logger:i,validateScheduler:s}){return s=fromPromise(nq.implement(s)),f=>of(f).chain(i=>s(i).chain(s=>s?Resolved(i):Rejected(`Valid Scheduler-Location owned by ${i} not found`))).bimap(i.tap("Verifying scheduler failed: %s"),i.tap("Verified scheduler"))}function verifySignerWith({logger:i}){return s=>of(s).map(i.tap("Checking for signer")).chain(i=>i?Resolved(i):Rejected("signer not found"))}function verifyInputsWith(i){let s=i.logger.child("verifyInput");i={...i,logger:s};let f=verifyModuleWith(i),p=verifySchedulerWith(i),g=verifySignerWith(i);return i=>of(i).chain(i=>f(i.module).map(()=>i)).chain(i=>p(i.scheduler)).map(()=>i).chain(i=>g(i.signer).map(()=>i)).bimap(s.tap("Error when verify input: %s"),s.tap("Successfully verified inputs"))}var nX=nj.array(nj.object({name:nj.string(),value:nj.string()}));function buildTagsWith2(){return i=>of(i).map(tR("tags")).map(t3([])).map(removeTagsByNameMaybeValue("Data-Protocol","ao")).map(removeTagsByNameMaybeValue("Variant")).map(removeTagsByNameMaybeValue("Type")).map(removeTagsByNameMaybeValue("Module")).map(removeTagsByNameMaybeValue("Scheduler")).map(removeTagsByNameMaybeValue("SDK")).map(t2(tc,[{name:"Data-Protocol",value:"ao"},{name:"Variant",value:"ao.TN.1"},{name:"Type",value:"Process"},{name:"Module",value:i.module},{name:"Scheduler",value:i.scheduler},{name:"SDK",value:"aoconnect"}])).map(nX.parse).map(tV("tags",tc,i))}function buildDataWith2({logger:i}){return s=>of(s).chain(t5(tZ(s.data),()=>Resolved(s),()=>Resolved(Math.random().toString().slice(-4)).map(tV("data",tc,s)).map(i=>pipe(tR("tags"),removeTagsByNameMaybeValue("Content-Type"),t$({name:"Content-Type",value:"text/plain"}),tV("tags",tc,i))(i)).map(i.tap('added pseudo-random string as process "data"'))))}function uploadProcessWith(i){let s=i.logger.child("uploadProcess");i={...i,logger:s};let f=buildTagsWith2(i),p=buildDataWith2(i),g=nz.implement(i.deployProcess);return i=>of(i).chain(f).chain(p).chain(fromPromise(({data:i,tags:s,signer:f})=>g({data:i,tags:s,signer:nG.implement(f)}))).map(s=>tV("processId",s.processId,i))}function spawnWith(i){let s=verifyInputsWith(i),f=uploadProcessWith(i);return({module:i,scheduler:p,signer:g,tags:m,data:_})=>of({module:i,scheduler:p,signer:g,tags:m,data:_}).chain(s).chain(f).map(i=>i.processId).bimap(errFrom,t0).toPromise()}function uploadMonitorWith(i){let s=nW.implement(i.deployMonitor);return i=>of(i).chain(fromPromise(({id:i,signer:f})=>s({processId:i,signer:nG.implement(f),data:Math.random().toString().slice(-4),tags:[]}))).map(s=>tV("monitorId",s.messageId,i))}function monitorWith(i){let s=uploadMonitorWith(i);return({process:i,signer:f})=>of({id:i,signer:f}).chain(s).map(i=>i.monitorId).bimap(errFrom,t0).toPromise()}function uploadUnmonitorWith(i){let s=nW.implement(i.deployUnmonitor);return i=>of(i).chain(fromPromise(({id:i,signer:f})=>s({processId:i,signer:nG.implement(f),data:Math.random().toString().slice(-4),tags:[]}))).map(s=>tV("monitorId",s.messageId,i))}function unmonitorWith(i){let s=uploadUnmonitorWith(i);return({process:i,signer:f})=>of({id:i,signer:f}).chain(s).map(i=>i.monitorId).bimap(errFrom,t0).toPromise()}var nJ=nj.object({process:nj.string().min(1,{message:"process identifier is required"}),from:nj.string().optional(),to:nj.string().optional(),sort:nj.enum(["ASC","DESC"]).default("ASC"),limit:nj.number().optional()});function verifyInputWith2(){return i=>of(i).map(nJ.parse).map(()=>i)}function queryWith({queryResults:i}){return i=fromPromise(n$.implement(i)),s=>of({process:s.process,from:s.from,to:s.to,sort:s.sort,limit:s.limit}).chain(i)}function resultsWith(i){let s=verifyInputWith2(i),f=queryWith(i);return({process:p,from:g,to:m,sort:_,limit:w})=>of({process:p,from:g,to:m,sort:_,limit:w}).chain(s).chain(f).map(i.logger.tap('readResults result for message "%s": %O',p)).map(i=>i).bimap(errFrom,t0).toPromise()}var nY=nj.object({Id:nj.string(),Target:nj.string(),Owner:nj.string(),Anchor:nj.string().optional(),Data:nj.any().default("1234"),Tags:nj.array(nj.object({name:nj.string(),value:nj.string()}))});function verifyInputWith3(){return i=>of(i).map(nY.parse).map(i=>(i.Tags=i.Tags.concat([{name:"Data-Protocol",value:"ao"},{name:"Type",value:"Message"},{name:"Variant",value:"ao.TN.1"}]),i))}function runWith({dryrunFetch:i}){return fromPromise(nD.implement(i))}function dryrunWith(i){let s=verifyInputWith3(i),f=runWith(i);return i=>of(i).map(convert).chain(s).chain(f).toPromise()}function convert({process:i,data:s,tags:f,anchor:p,...g}){return{Id:"1234",Owner:"1234",...g,Target:i,Data:s||"1234",Tags:f||[],Anchor:p||"0"}}function sendAssignWith(i){let s=nV.implement(i.deployAssign);return i=>of(i).chain(fromPromise(({process:i,message:f,baseLayer:p,exclude:g})=>s({process:i,message:f,baseLayer:p,exclude:g}))).map(s=>tV("assignmentId",s.assignmentId,i))}function assignWith(i){let s=sendAssignWith(i);return({process:i,message:f,baseLayer:p,exclude:g})=>of({process:i,message:f,baseLayer:p,exclude:g}).chain(s).map(i=>i.assignmentId).bimap(errFrom,t0).toPromise()}function connect({GRAPHQL_URL:i,GATEWAY_URL:s="https://arweave.net",MU_URL:f="https://mu.ao-testnet.xyz",CU_URL:p="https://cu.ao-testnet.xyz"}={}){let g=createLogger();i||(i=joinUrl({url:s,path:"/graphql"}));let{validate:m}=ye({cacheSize:100,GRAPHQL_URL:i}),_=createProcessMetaCache({MAX_SIZE:25}),w=g.child("result"),E=resultWith({loadResult:loadResultWith({fetch,CU_URL:p,logger:w}),logger:w}),I=g.child("message"),B=messageWith({loadProcessMeta:loadProcessMetaWith({fetch,cache:_,logger:I}),deployMessage:deployMessageWith({fetch,MU_URL:f,logger:I}),logger:I}),O=g.child("spawn"),R=spawnWith({loadTransactionMeta:loadTransactionMetaWith({fetch,GRAPHQL_URL:i,logger:O}),validateScheduler:m,deployProcess:deployProcessWith({fetch,MU_URL:f,logger:O}),logger:O}),U=g.child("monitor"),N=monitorWith({loadProcessMeta:loadProcessMetaWith({fetch,cache:_,logger:U}),deployMonitor:deployMonitorWith({fetch,MU_URL:f,logger:U}),logger:U}),F=g.child("unmonitor"),z=unmonitorWith({loadProcessMeta:loadProcessMetaWith({fetch,cache:_,logger:F}),deployUnmonitor:deployUnmonitorWith({fetch,MU_URL:f,logger:F}),logger:U}),V=g.child("results"),K=resultsWith({queryResults:queryResultsWith({fetch,CU_URL:p,logger:V}),logger:V}),Y=g.child("dryrun"),ee=dryrunWith({dryrunFetch:dryrunFetchWith({fetch,CU_URL:p,logger:Y}),logger:Y}),et=g.child("assign"),er=assignWith({deployAssign:deployAssignWith({fetch,MU_URL:f,logger:et}),logger:I});return{result:E,results:K,message:B,spawn:R,monitor:N,unmonitor:z,dryrun:ee,assign:er}}var nQ={};__export(nQ,{createDataItemSigner:()=>createDataItemSigner});var n0=__toESM(ey(),1),n2={};__export(n2,{AVSCTap:()=>i_,ArweaveSigner:()=>im,DataItem:()=>iE,MAX_TAG_BYTES:()=>iS,MIN_BINARY_SIZE:()=>iA,SIG_CONFIG:()=>iy,SignatureConfig:()=>F,Signer:()=>ic,createData:()=>ge2,default:()=>iI,deserializeTags:()=>Q2,indexToType:()=>iv,serializeTags:()=>dt2,tagsExceedLimit:()=>jr,warparbundles:()=>iB});var n1=Object.create,n3=Object.defineProperty,n6=Object.getOwnPropertyDescriptor,n8=Object.getOwnPropertyNames,n5=Object.getPrototypeOf,n4=Object.prototype.hasOwnProperty,T3=(i,s)=>()=>(s||i((s={exports:{}}).exports,s),s.exports),Tr=(i,s,f,p)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let g of n8(s))n4.call(i,g)||g===f||n3(i,g,{get:()=>s[g],enumerable:!(p=n6(s,g))||p.enumerable});return i},C2=(i,s,f)=>(f=null!=i?n1(n5(i)):{},Tr(!s&&i&&i.__esModule?f:n3(f,"default",{value:i,enumerable:!0}),i)),n9=T3(i=>{function Ir(i){var s=i.length,f=s%4;if(!f)return i;var p=s,g=4-f,m=s+g,_=V.alloc(m);for(_.write(i);g--;)_.write("=",p++);return _.toString()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=Ir}),n7=T3(i=>{Object.defineProperty(i,"__esModule",{value:!0});var s=n9();function Ct2(i,s){return void 0===s&&(s="utf8"),V.isBuffer(i)?at2(i.toString("base64")):at2(V.from(i,s).toString("base64"))}function Ur(i,s){return void 0===s&&(s="utf8"),V.from(ut2(i),"base64").toString(s)}function ut2(i){return i=i.toString(),s.default(i).replace(/\-/g,"+").replace(/_/g,"/")}function at2(i){return i.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fr(i){return V.from(ut2(i),"base64")}var f=Ct2;f.encode=Ct2,f.decode=Ur,f.toBase64=ut2,f.fromBase64=at2,f.toBuffer=Fr,i.default=f}),ie=T3((i,s)=>{s.exports=n7().default,s.exports.default=s.exports}),it=T3(i=>{i.byteLength=_r,i.toByteArray=Cr,i.fromByteArray=Nr;var s,f,p=[],g=[],m="u">typeof Uint8Array?Uint8Array:Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,f=_.length;s<f;++s)p[s]=_[s],g[_.charCodeAt(s)]=s;function Nt2(i){var s=i.length;if(s%4>0)throw Error("Invalid string. Length must be a multiple of 4");var f=i.indexOf("=");-1===f&&(f=s);var p=f===s?0:4-f%4;return[f,p]}function _r(i){var s=Nt2(i),f=s[0],p=s[1];return(f+p)*3/4-p}function Rr(i,s,f){return(s+f)*3/4-f}function Cr(i){var s,f,p=Nt2(i),_=p[0],w=p[1],E=new m(Rr(i,_,w)),I=0,B=w>0?_-4:_;for(f=0;f<B;f+=4)s=g[i.charCodeAt(f)]<<18|g[i.charCodeAt(f+1)]<<12|g[i.charCodeAt(f+2)]<<6|g[i.charCodeAt(f+3)],E[I++]=s>>16&255,E[I++]=s>>8&255,E[I++]=255&s;return 2===w&&(s=g[i.charCodeAt(f)]<<2|g[i.charCodeAt(f+1)]>>4,E[I++]=255&s),1===w&&(s=g[i.charCodeAt(f)]<<10|g[i.charCodeAt(f+1)]<<4|g[i.charCodeAt(f+2)]>>2,E[I++]=s>>8&255,E[I++]=255&s),E}function Dr(i){return p[i>>18&63]+p[i>>12&63]+p[i>>6&63]+p[63&i]}function Pr(i,s,f){for(var p=[],g=s;g<f;g+=3)p.push(Dr((i[g]<<16&16711680)+(i[g+1]<<8&65280)+(255&i[g+2])));return p.join("")}function Nr(i){for(var s,f=i.length,g=f%3,m=[],_=0,w=f-g;_<w;_+=16383)m.push(Pr(i,_,_+16383>w?w:_+16383));return 1===g?m.push(p[(s=i[f-1])>>2]+p[s<<4&63]+"=="):2===g&&m.push(p[(s=(i[f-2]<<8)+i[f-1])>>10]+p[s>>4&63]+p[s<<2&63]+"="),m.join("")}g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63}),ir=T3(i=>{Object.defineProperty(i,"__esModule",{value:!0}),i.b64UrlDecode=i.b64UrlEncode=i.bufferTob64Url=i.bufferTob64=i.b64UrlToBuffer=i.stringToB64Url=i.stringToBuffer=i.bufferToString=i.b64UrlToString=i.concatBuffers=void 0;var s=it();function kr(i){let s=0;for(let f=0;f<i.length;f++)s+=i[f].byteLength;let f=new Uint8Array(s),p=0;f.set(new Uint8Array(i[0]),p),p+=i[0].byteLength;for(let s=1;s<i.length;s++)f.set(new Uint8Array(i[s]),p),p+=i[s].byteLength;return f}function Mr(i){return Mt2($t2(i))}function Mt2(i){return new TextDecoder("utf-8",{fatal:!0}).decode(i)}function Ot2(i){return new TextEncoder().encode(i)}function Or(i){return Ht2(Ot2(i))}function $t2(i){return new Uint8Array(s.toByteArray(qt2(i)))}function Kt2(i){return s.fromByteArray(new Uint8Array(i))}function Ht2(i){return jt2(Kt2(i))}function jt2(i){return i.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function qt2(i){let s;return s=(i=i.replace(/\-/g,"+").replace(/\_/g,"/")).length%4==0?0:4-i.length%4,i.concat("=".repeat(s))}i.concatBuffers=kr,i.b64UrlToString=Mr,i.bufferToString=Mt2,i.stringToBuffer=Ot2,i.stringToB64Url=Or,i.b64UrlToBuffer=$t2,i.bufferTob64=Kt2,i.bufferTob64Url=Ht2,i.b64UrlEncode=jt2,i.b64UrlDecode=qt2}),ii=T3(i=>{Object.defineProperty(i,"__esModule",{value:!0});var s=ir(),f=class{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let i=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),s=await this.driver.exportKey("jwk",i.privateKey);return{kty:s.kty,e:s.e,n:s.n,d:s.d,p:s.p,q:s.q,dp:s.dp,dq:s.dq,qi:s.qi}}async sign(i,s,{saltLength:f}={}){let p=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(i),s);return new Uint8Array(p)}async hash(i,s="SHA-256"){let f=await this.driver.digest(s,i);return new Uint8Array(f)}async verify(i,s,f){let p=await this.jwkToPublicCryptoKey({kty:"RSA",e:"AQAB",n:i}),g=await this.driver.digest("SHA-256",s),m=await this.driver.verify({name:"RSA-PSS",saltLength:0},p,f,s),_=await this.driver.verify({name:"RSA-PSS",saltLength:32},p,f,s),w=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((p.algorithm.modulusLength-1)/8)-g.byteLength-2},p,f,s);return m||_||w}async jwkToCryptoKey(i){return this.driver.importKey("jwk",i,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(i){return this.driver.importKey("jwk",i,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;let i=crypto?.subtle;return void 0!==i&&["generateKey","importKey","exportKey","digest","sign"].every(s=>"function"==typeof i[s])}async encrypt(i,f,p){let g=await this.driver.importKey("raw","string"==typeof f?s.stringToBuffer(f):f,{name:"PBKDF2",length:32},!1,["deriveKey"]),m=await this.driver.deriveKey({name:"PBKDF2",salt:p?s.stringToBuffer(p):s.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},g,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),_=new Uint8Array(16);crypto.getRandomValues(_);let w=await this.driver.encrypt({name:"AES-CBC",iv:_},m,i);return s.concatBuffers([_,w])}async decrypt(i,f,p){let g=await this.driver.importKey("raw","string"==typeof f?s.stringToBuffer(f):f,{name:"PBKDF2",length:32},!1,["deriveKey"]),m=await this.driver.deriveKey({name:"PBKDF2",salt:p?s.stringToBuffer(p):s.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},g,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),_=i.slice(0,16),w=await this.driver.decrypt({name:"AES-CBC",iv:_},m,i.slice(16));return s.concatBuffers([w])}};i.default=f}),ia=T3(i=>{i.read=function(i,s,f,p,g){var m,_,w=8*g-p-1,E=(1<<w)-1,I=E>>1,B=-7,O=f?g-1:0,R=f?-1:1,U=i[s+O];for(O+=R,m=U&(1<<-B)-1,U>>=-B,B+=w;B>0;m=256*m+i[s+O],O+=R,B-=8);for(_=m&(1<<-B)-1,m>>=-B,B+=p;B>0;_=256*_+i[s+O],O+=R,B-=8);if(0===m)m=1-I;else{if(m===E)return _?NaN:(U?-1:1)*(1/0);_+=Math.pow(2,p),m-=I}return(U?-1:1)*_*Math.pow(2,m-p)},i.write=function(i,s,f,p,g,m){var _,w,E,I=8*m-g-1,B=(1<<I)-1,O=B>>1,R=23===g?5960464477539062e-23:0,U=p?0:m-1,N=p?1:-1,F=s<0||0===s&&1/s<0?1:0;for(isNaN(s=Math.abs(s))||s===1/0?(w=isNaN(s)?1:0,_=B):(_=Math.floor(Math.log(s)/Math.LN2),s*(E=Math.pow(2,-_))<1&&(_--,E*=2),_+O>=1?s+=R/E:s+=R*Math.pow(2,1-O),s*E>=2&&(_++,E/=2),_+O>=B?(w=0,_=B):_+O>=1?(w=(s*E-1)*Math.pow(2,g),_+=O):(w=s*Math.pow(2,O-1)*Math.pow(2,g),_=0));g>=8;i[f+U]=255&w,U+=N,w/=256,g-=8);for(_=_<<g|w,I+=g;I>0;i[f+U]=255&_,U+=N,_/=256,I-=8);i[f+U-N]|=128*F}}),is=T3(i=>{var s=it(),f=ia(),p="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function qr(){try{let i=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(i,s),42===i.foo()}catch{return!1}}function S(i){if(i>2147483647)throw RangeError('The value "'+i+'" is invalid for option "size"');let s=new Uint8Array(i);return Object.setPrototypeOf(s,a.prototype),s}function a(i,s,f){if("number"==typeof i){if("string"==typeof s)throw TypeError('The "string" argument must be of type string. Received type number');return Tt2(i)}return tr2(i,s,f)}function tr2(i,s,f){if("string"==typeof i)return Yr(i,s);if(ArrayBuffer.isView(i))return vr(i);if(null==i)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(A(i,ArrayBuffer)||i&&A(i.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(A(i,SharedArrayBuffer)||i&&A(i.buffer,SharedArrayBuffer)))return bt2(i,s,f);if("number"==typeof i)throw TypeError('The "value" argument must not be of type number. Received type number');let p=i.valueOf&&i.valueOf();if(null!=p&&p!==i)return a.from(p,s,f);let g=Wr(i);if(g)return g;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof i[Symbol.toPrimitive])return a.from(i[Symbol.toPrimitive]("string"),s,f);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}function rr2(i){if("number"!=typeof i)throw TypeError('"size" argument must be of type number');if(i<0)throw RangeError('The value "'+i+'" is invalid for option "size"')}function Gr(i,s,f){return rr2(i),i<=0?S(i):void 0!==s?"string"==typeof f?S(i).fill(s,f):S(i).fill(s):S(i)}function Tt2(i){return rr2(i),S(i<0?0:0|It2(i))}function Yr(i,s){if(("string"!=typeof s||""===s)&&(s="utf8"),!a.isEncoding(s))throw TypeError("Unknown encoding: "+s);let f=0|er2(i,s),p=S(f),g=p.write(i,s);return g!==f&&(p=p.slice(0,g)),p}function Et2(i){let s=i.length<0?0:0|It2(i.length),f=S(s);for(let p=0;p<s;p+=1)f[p]=255&i[p];return f}function vr(i){if(A(i,Uint8Array)){let s=new Uint8Array(i);return bt2(s.buffer,s.byteOffset,s.byteLength)}return Et2(i)}function bt2(i,s,f){let p;if(s<0||i.byteLength<s)throw RangeError('"offset" is outside of buffer bounds');if(i.byteLength<s+(f||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(p=void 0===s&&void 0===f?new Uint8Array(i):void 0===f?new Uint8Array(i,s):new Uint8Array(i,s,f),a.prototype),p}function Wr(i){var s;if(a.isBuffer(i)){let s=0|It2(i.length),f=S(s);return 0===f.length||i.copy(f,0,0,s),f}return void 0!==i.length?"number"!=typeof i.length||(s=i.length)!=s?S(0):Et2(i):"Buffer"===i.type&&Array.isArray(i.data)?Et2(i.data):void 0}function It2(i){if(i>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|i}function Vr(i){return+i!=i&&(i=0),a.alloc(+i)}function er2(i,s){if(a.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||A(i,ArrayBuffer))return i.byteLength;if("string"!=typeof i)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let f=i.length,p=arguments.length>2&&!0===arguments[2];if(!p&&0===f)return 0;let g=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return At2(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*f;case"hex":return f>>>1;case"base64":return cr2(i).length;default:if(g)return p?-1:At2(i).length;s=(""+s).toLowerCase(),g=!0}}function zr(i,s,f){let p=!1;if((void 0===s||s<0)&&(s=0),s>this.length||((void 0===f||f>this.length)&&(f=this.length),f<=0)||(f>>>=0)<=(s>>>=0))return"";for(i||(i="utf8");;)switch(i){case"hex":return oe2(this,s,f);case"utf8":case"utf-8":return ir2(this,s,f);case"ascii":return ne2(this,s,f);case"latin1":case"binary":return ie2(this,s,f);case"base64":return re2(this,s,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se2(this,s,f);default:if(p)throw TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),p=!0}}function k2(i,s,f){let p=i[s];i[s]=i[f],i[f]=p}function nr2(i,s,f,p,g){var m;if(0===i.length)return -1;if("string"==typeof f?(p=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),(m=f=+f)!=m&&(f=g?0:i.length-1),f<0&&(f=i.length+f),f>=i.length){if(g)return -1;f=i.length-1}else if(f<0){if(!g)return -1;f=0}if("string"==typeof s&&(s=a.from(s,p)),a.isBuffer(s))return 0===s.length?-1:Xt2(i,s,f,p,g);if("number"==typeof s)return s&=255,"function"==typeof Uint8Array.prototype.indexOf?g?Uint8Array.prototype.indexOf.call(i,s,f):Uint8Array.prototype.lastIndexOf.call(i,s,f):Xt2(i,[s],f,p,g);throw TypeError("val must be string, number or Buffer")}function Xt2(i,s,f,p,g){let m,_=1,w=i.length,E=s.length;if(void 0!==p&&("ucs2"===(p=String(p).toLowerCase())||"ucs-2"===p||"utf16le"===p||"utf-16le"===p)){if(i.length<2||s.length<2)return -1;_=2,w/=2,E/=2,f/=2}function h2(i,s){return 1===_?i[s]:i.readUInt16BE(s*_)}if(g){let p=-1;for(m=f;m<w;m++)if(h2(i,m)===h2(s,-1===p?0:m-p)){if(-1===p&&(p=m),m-p+1===E)return p*_}else -1!==p&&(m-=m-p),p=-1}else for(f+E>w&&(f=w-E),m=f;m>=0;m--){let f=!0;for(let p=0;p<E;p++)if(h2(i,m+p)!==h2(s,p)){f=!1;break}if(f)return m}return -1}function Jr(i,s,f,p){let g;f=Number(f)||0;let m=i.length-f;p?(p=Number(p))>m&&(p=m):p=m;let _=s.length;for(p>_/2&&(p=_/2),g=0;g<p;++g){let p=parseInt(s.substr(2*g,2),16);if(p!=p)break;i[f+g]=p}return g}function Xr(i,s,f,p){return et2(At2(s,i.length-f),i,f,p)}function Zr(i,s,f,p){return et2(fe2(s),i,f,p)}function Qr(i,s,f,p){return et2(cr2(s),i,f,p)}function te2(i,s,f,p){return et2(ce2(s,i.length-f),i,f,p)}function re2(i,f,p){return 0===f&&p===i.length?s.fromByteArray(i):s.fromByteArray(i.slice(f,p))}function ir2(i,s,f){f=Math.min(i.length,f);let p=[],g=s;for(;g<f;){let s=i[g],m=null,_=s>239?4:s>223?3:s>191?2:1;if(g+_<=f){let f,p,w,E;switch(_){case 1:s<128&&(m=s);break;case 2:(192&(f=i[g+1]))==128&&(E=(31&s)<<6|63&f)>127&&(m=E);break;case 3:f=i[g+1],p=i[g+2],(192&f)==128&&(192&p)==128&&(E=(15&s)<<12|(63&f)<<6|63&p)>2047&&(E<55296||E>57343)&&(m=E);break;case 4:f=i[g+1],p=i[g+2],w=i[g+3],(192&f)==128&&(192&p)==128&&(192&w)==128&&(E=(15&s)<<18|(63&f)<<12|(63&p)<<6|63&w)>65535&&E<1114112&&(m=E)}}null===m?(m=65533,_=1):m>65535&&(m-=65536,p.push(m>>>10&1023|55296),m=56320|1023&m),p.push(m),g+=_}return ee2(p)}function ee2(i){let s=i.length;if(s<=4096)return String.fromCharCode.apply(String,i);let f="",p=0;for(;p<s;)f+=String.fromCharCode.apply(String,i.slice(p,p+=4096));return f}function ne2(i,s,f){let p="";f=Math.min(i.length,f);for(let g=s;g<f;++g)p+=String.fromCharCode(127&i[g]);return p}function ie2(i,s,f){let p="";f=Math.min(i.length,f);for(let g=s;g<f;++g)p+=String.fromCharCode(i[g]);return p}function oe2(i,s,f){let p=i.length;(!s||s<0)&&(s=0),(!f||f<0||f>p)&&(f=p);let g="";for(let p=s;p<f;++p)g+=_[i[p]];return g}function se2(i,s,f){let p=i.slice(s,f),g="";for(let i=0;i<p.length-1;i+=2)g+=String.fromCharCode(p[i]+256*p[i+1]);return g}function y(i,s,f){if(i%1!=0||i<0)throw RangeError("offset is not uint");if(i+s>f)throw RangeError("Trying to access beyond buffer length")}function d(i,s,f,p,g,m){if(!a.isBuffer(i))throw TypeError('"buffer" argument must be a Buffer instance');if(s>g||s<m)throw RangeError('"value" argument is out of bounds');if(f+p>i.length)throw RangeError("Index out of range")}function or2(i,s,f,p,g){fr(s,p,g,i,f,7);let m=Number(s&BigInt(4294967295));i[f++]=m,m>>=8,i[f++]=m,m>>=8,i[f++]=m,m>>=8,i[f++]=m;let _=Number(s>>BigInt(32)&BigInt(4294967295));return i[f++]=_,_>>=8,i[f++]=_,_>>=8,i[f++]=_,_>>=8,i[f++]=_,f}function sr2(i,s,f,p,g){fr(s,p,g,i,f,7);let m=Number(s&BigInt(4294967295));i[f+7]=m,m>>=8,i[f+6]=m,m>>=8,i[f+5]=m,m>>=8,i[f+4]=m;let _=Number(s>>BigInt(32)&BigInt(4294967295));return i[f+3]=_,_>>=8,i[f+2]=_,_>>=8,i[f+1]=_,_>>=8,i[f]=_,f+8}function ar(i,s,f,p,g,m){if(f+p>i.length||f<0)throw RangeError("Index out of range")}function ur(i,s,p,g,m){return s=+s,p>>>=0,m||ar(i,s,p,4,34028234663852886e22,-34028234663852886e22),f.write(i,s,p,g,23,4),p+4}function hr2(i,s,p,g,m){return s=+s,p>>>=0,m||ar(i,s,p,8,17976931348623157e292,-17976931348623157e292),f.write(i,s,p,g,52,8),p+8}i.Buffer=a,i.SlowBuffer=Vr,i.INSPECT_MAX_BYTES=50,i.kMaxLength=2147483647,a.TYPED_ARRAY_SUPPORT=qr(),!a.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(i,s,f){return tr2(i,s,f)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(i,s,f){return Gr(i,s,f)},a.allocUnsafe=function(i){return Tt2(i)},a.allocUnsafeSlow=function(i){return Tt2(i)},a.isBuffer=function(i){return null!=i&&!0===i._isBuffer&&i!==a.prototype},a.compare=function(i,s){if(A(i,Uint8Array)&&(i=a.from(i,i.offset,i.byteLength)),A(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),!a.isBuffer(i)||!a.isBuffer(s))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===s)return 0;let f=i.length,p=s.length;for(let g=0,m=Math.min(f,p);g<m;++g)if(i[g]!==s[g]){f=i[g],p=s[g];break}return f<p?-1:p<f?1:0},a.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(i,s){let f;if(!Array.isArray(i))throw TypeError('"list" argument must be an Array of Buffers');if(0===i.length)return a.alloc(0);if(void 0===s)for(s=0,f=0;f<i.length;++f)s+=i[f].length;let p=a.allocUnsafe(s),g=0;for(f=0;f<i.length;++f){let s=i[f];if(A(s,Uint8Array))g+s.length>p.length?(a.isBuffer(s)||(s=a.from(s)),s.copy(p,g)):Uint8Array.prototype.set.call(p,s,g);else if(a.isBuffer(s))s.copy(p,g);else throw TypeError('"list" argument must be an Array of Buffers');g+=s.length}return p},a.byteLength=er2,a.prototype._isBuffer=!0,a.prototype.swap16=function(){let i=this.length;if(i%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<i;s+=2)k2(this,s,s+1);return this},a.prototype.swap32=function(){let i=this.length;if(i%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<i;s+=4)k2(this,s,s+3),k2(this,s+1,s+2);return this},a.prototype.swap64=function(){let i=this.length;if(i%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<i;s+=8)k2(this,s,s+7),k2(this,s+1,s+6),k2(this,s+2,s+5),k2(this,s+3,s+4);return this},a.prototype.toString=function(){let i=this.length;return 0===i?"":0==arguments.length?ir2(this,0,i):zr.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(i){if(!a.isBuffer(i))throw TypeError("Argument must be a Buffer");return this===i||0===a.compare(this,i)},a.prototype.inspect=function(){let s="",f=i.INSPECT_MAX_BYTES;return s=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(s+=" ... "),"<Buffer "+s+">"},p&&(a.prototype[p]=a.prototype.inspect),a.prototype.compare=function(i,s,f,p,g){if(A(i,Uint8Array)&&(i=a.from(i,i.offset,i.byteLength)),!a.isBuffer(i))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(void 0===s&&(s=0),void 0===f&&(f=i?i.length:0),void 0===p&&(p=0),void 0===g&&(g=this.length),s<0||f>i.length||p<0||g>this.length)throw RangeError("out of range index");if(p>=g&&s>=f)return 0;if(p>=g)return -1;if(s>=f)return 1;if(s>>>=0,f>>>=0,p>>>=0,g>>>=0,this===i)return 0;let m=g-p,_=f-s,w=Math.min(m,_),E=this.slice(p,g),I=i.slice(s,f);for(let i=0;i<w;++i)if(E[i]!==I[i]){m=E[i],_=I[i];break}return m<_?-1:_<m?1:0},a.prototype.includes=function(i,s,f){return -1!==this.indexOf(i,s,f)},a.prototype.indexOf=function(i,s,f){return nr2(this,i,s,f,!0)},a.prototype.lastIndexOf=function(i,s,f){return nr2(this,i,s,f,!1)},a.prototype.write=function(i,s,f,p){if(void 0===s)p="utf8",f=this.length,s=0;else if(void 0===f&&"string"==typeof s)p=s,f=this.length,s=0;else if(isFinite(s))s>>>=0,isFinite(f)?(f>>>=0,void 0===p&&(p="utf8")):(p=f,f=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let g=this.length-s;if((void 0===f||f>g)&&(f=g),i.length>0&&(f<0||s<0)||s>this.length)throw RangeError("Attempt to write outside buffer bounds");p||(p="utf8");let m=!1;for(;;)switch(p){case"hex":return Jr(this,i,s,f);case"utf8":case"utf-8":return Xr(this,i,s,f);case"ascii":case"latin1":case"binary":return Zr(this,i,s,f);case"base64":return Qr(this,i,s,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te2(this,i,s,f);default:if(m)throw TypeError("Unknown encoding: "+p);p=(""+p).toLowerCase(),m=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(i,s){let f=this.length;i=~~i,s=void 0===s?f:~~s,i<0?(i+=f)<0&&(i=0):i>f&&(i=f),s<0?(s+=f)<0&&(s=0):s>f&&(s=f),s<i&&(s=i);let p=this.subarray(i,s);return Object.setPrototypeOf(p,a.prototype),p},a.prototype.readUintLE=a.prototype.readUIntLE=function(i,s,f){i>>>=0,s>>>=0,f||y(i,s,this.length);let p=this[i],g=1,m=0;for(;++m<s&&(g*=256);)p+=this[i+m]*g;return p},a.prototype.readUintBE=a.prototype.readUIntBE=function(i,s,f){i>>>=0,s>>>=0,f||y(i,s,this.length);let p=this[i+--s],g=1;for(;s>0&&(g*=256);)p+=this[i+--s]*g;return p},a.prototype.readUint8=a.prototype.readUInt8=function(i,s){return i>>>=0,s||y(i,1,this.length),this[i]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(i,s){return i>>>=0,s||y(i,2,this.length),this[i]|this[i+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(i,s){return i>>>=0,s||y(i,2,this.length),this[i]<<8|this[i+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(i,s){return i>>>=0,s||y(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+16777216*this[i+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(i,s){return i>>>=0,s||y(i,4,this.length),16777216*this[i]+(this[i+1]<<16|this[i+2]<<8|this[i+3])},a.prototype.readBigUInt64LE=L(function(i){j2(i>>>=0,"offset");let s=this[i],f=this[i+7];(void 0===s||void 0===f)&&W(i,this.length-8);let p=s+256*this[++i]+65536*this[++i]+16777216*this[++i],g=this[++i]+256*this[++i]+65536*this[++i]+16777216*f;return BigInt(p)+(BigInt(g)<<BigInt(32))}),a.prototype.readBigUInt64BE=L(function(i){j2(i>>>=0,"offset");let s=this[i],f=this[i+7];(void 0===s||void 0===f)&&W(i,this.length-8);let p=16777216*s+65536*this[++i]+256*this[++i]+this[++i],g=16777216*this[++i]+65536*this[++i]+256*this[++i]+f;return(BigInt(p)<<BigInt(32))+BigInt(g)}),a.prototype.readIntLE=function(i,s,f){i>>>=0,s>>>=0,f||y(i,s,this.length);let p=this[i],g=1,m=0;for(;++m<s&&(g*=256);)p+=this[i+m]*g;return p>=(g*=128)&&(p-=Math.pow(2,8*s)),p},a.prototype.readIntBE=function(i,s,f){i>>>=0,s>>>=0,f||y(i,s,this.length);let p=s,g=1,m=this[i+--p];for(;p>0&&(g*=256);)m+=this[i+--p]*g;return m>=(g*=128)&&(m-=Math.pow(2,8*s)),m},a.prototype.readInt8=function(i,s){return i>>>=0,s||y(i,1,this.length),128&this[i]?-((255-this[i]+1)*1):this[i]},a.prototype.readInt16LE=function(i,s){i>>>=0,s||y(i,2,this.length);let f=this[i]|this[i+1]<<8;return 32768&f?4294901760|f:f},a.prototype.readInt16BE=function(i,s){i>>>=0,s||y(i,2,this.length);let f=this[i+1]|this[i]<<8;return 32768&f?4294901760|f:f},a.prototype.readInt32LE=function(i,s){return i>>>=0,s||y(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},a.prototype.readInt32BE=function(i,s){return i>>>=0,s||y(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},a.prototype.readBigInt64LE=L(function(i){j2(i>>>=0,"offset");let s=this[i],f=this[i+7];return(void 0===s||void 0===f)&&W(i,this.length-8),(BigInt(this[i+4]+256*this[i+5]+65536*this[i+6]+(f<<24))<<BigInt(32))+BigInt(s+256*this[++i]+65536*this[++i]+16777216*this[++i])}),a.prototype.readBigInt64BE=L(function(i){j2(i>>>=0,"offset");let s=this[i],f=this[i+7];return(void 0===s||void 0===f)&&W(i,this.length-8),(BigInt((s<<24)+65536*this[++i]+256*this[++i]+this[++i])<<BigInt(32))+BigInt(16777216*this[++i]+65536*this[++i]+256*this[++i]+f)}),a.prototype.readFloatLE=function(i,s){return i>>>=0,s||y(i,4,this.length),f.read(this,i,!0,23,4)},a.prototype.readFloatBE=function(i,s){return i>>>=0,s||y(i,4,this.length),f.read(this,i,!1,23,4)},a.prototype.readDoubleLE=function(i,s){return i>>>=0,s||y(i,8,this.length),f.read(this,i,!0,52,8)},a.prototype.readDoubleBE=function(i,s){return i>>>=0,s||y(i,8,this.length),f.read(this,i,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(i,s,f,p){if(i=+i,s>>>=0,f>>>=0,!p){let p=Math.pow(2,8*f)-1;d(this,i,s,f,p,0)}let g=1,m=0;for(this[s]=255&i;++m<f&&(g*=256);)this[s+m]=i/g&255;return s+f},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(i,s,f,p){if(i=+i,s>>>=0,f>>>=0,!p){let p=Math.pow(2,8*f)-1;d(this,i,s,f,p,0)}let g=f-1,m=1;for(this[s+g]=255&i;--g>=0&&(m*=256);)this[s+g]=i/m&255;return s+f},a.prototype.writeUint8=a.prototype.writeUInt8=function(i,s,f){return i=+i,s>>>=0,f||d(this,i,s,1,255,0),this[s]=255&i,s+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(i,s,f){return i=+i,s>>>=0,f||d(this,i,s,2,65535,0),this[s]=255&i,this[s+1]=i>>>8,s+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(i,s,f){return i=+i,s>>>=0,f||d(this,i,s,2,65535,0),this[s]=i>>>8,this[s+1]=255&i,s+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(i,s,f){return i=+i,s>>>=0,f||d(this,i,s,4,4294967295,0),this[s+3]=i>>>24,this[s+2]=i>>>16,this[s+1]=i>>>8,this[s]=255&i,s+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(i,s,f){return i=+i,s>>>=0,f||d(this,i,s,4,4294967295,0),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=255&i,s+4},a.prototype.writeBigUInt64LE=L(function(i,s=0){return or2(this,i,s,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=L(function(i,s=0){return sr2(this,i,s,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(i,s,f,p){if(i=+i,s>>>=0,!p){let p=Math.pow(2,8*f-1);d(this,i,s,f,p-1,-p)}let g=0,m=1,_=0;for(this[s]=255&i;++g<f&&(m*=256);)i<0&&0===_&&0!==this[s+g-1]&&(_=1),this[s+g]=(i/m>>0)-_&255;return s+f},a.prototype.writeIntBE=function(i,s,f,p){if(i=+i,s>>>=0,!p){let p=Math.pow(2,8*f-1);d(this,i,s,f,p-1,-p)}let g=f-1,m=1,_=0;for(this[s+g]=255&i;--g>=0&&(m*=256);)i<0&&0===_&&0!==this[s+g+1]&&(_=1),this[s+g]=(i/m>>0)-_&255;return s+f},a.prototype.writeInt8=function(i,s,f){return i=+i,s>>>=0,f||d(this,i,s,1,127,-128),i<0&&(i=255+i+1),this[s]=255&i,s+1},a.prototype.writeInt16LE=function(i,s,f){return i=+i,s>>>=0,f||d(this,i,s,2,32767,-32768),this[s]=255&i,this[s+1]=i>>>8,s+2},a.prototype.writeInt16BE=function(i,s,f){return i=+i,s>>>=0,f||d(this,i,s,2,32767,-32768),this[s]=i>>>8,this[s+1]=255&i,s+2},a.prototype.writeInt32LE=function(i,s,f){return i=+i,s>>>=0,f||d(this,i,s,4,2147483647,-2147483648),this[s]=255&i,this[s+1]=i>>>8,this[s+2]=i>>>16,this[s+3]=i>>>24,s+4},a.prototype.writeInt32BE=function(i,s,f){return i=+i,s>>>=0,f||d(this,i,s,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[s]=i>>>24,this[s+1]=i>>>16,this[s+2]=i>>>8,this[s+3]=255&i,s+4},a.prototype.writeBigInt64LE=L(function(i,s=0){return or2(this,i,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=L(function(i,s=0){return sr2(this,i,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeFloatLE=function(i,s,f){return ur(this,i,s,!0,f)},a.prototype.writeFloatBE=function(i,s,f){return ur(this,i,s,!1,f)},a.prototype.writeDoubleLE=function(i,s,f){return hr2(this,i,s,!0,f)},a.prototype.writeDoubleBE=function(i,s,f){return hr2(this,i,s,!1,f)},a.prototype.copy=function(i,s,f,p){if(!a.isBuffer(i))throw TypeError("argument should be a Buffer");if(f||(f=0),p||0===p||(p=this.length),s>=i.length&&(s=i.length),s||(s=0),p>0&&p<f&&(p=f),p===f||0===i.length||0===this.length)return 0;if(s<0)throw RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw RangeError("Index out of range");if(p<0)throw RangeError("sourceEnd out of bounds");p>this.length&&(p=this.length),i.length-s<p-f&&(p=i.length-s+f);let g=p-f;return this===i&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(s,f,p):Uint8Array.prototype.set.call(i,this.subarray(f,p),s),g},a.prototype.fill=function(i,s,f,p){let g;if("string"==typeof i){if("string"==typeof s?(p=s,s=0,f=this.length):"string"==typeof f&&(p=f,f=this.length),void 0!==p&&"string"!=typeof p)throw TypeError("encoding must be a string");if("string"==typeof p&&!a.isEncoding(p))throw TypeError("Unknown encoding: "+p);if(1===i.length){let s=i.charCodeAt(0);("utf8"===p&&s<128||"latin1"===p)&&(i=s)}}else"number"==typeof i?i&=255:"boolean"==typeof i&&(i=Number(i));if(s<0||this.length<s||this.length<f)throw RangeError("Out of range index");if(f<=s)return this;if(s>>>=0,f=void 0===f?this.length:f>>>0,i||(i=0),"number"==typeof i)for(g=s;g<f;++g)this[g]=i;else{let m=a.isBuffer(i)?i:a.from(i,p),_=m.length;if(0===_)throw TypeError('The value "'+i+'" is invalid for argument "value"');for(g=0;g<f-s;++g)this[g+s]=m[g%_]}return this};var g={};function St2(i,s,f){g[i]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}function Qt2(i){let s="",f=i.length,p="-"===i[0]?1:0;for(;f>=p+4;f-=3)s=`_${i.slice(f-3,f)}${s}`;return`${i.slice(0,f)}${s}`}function ae2(i,s,f){j2(s,"offset"),(void 0===i[s]||void 0===i[s+f])&&W(s,i.length-(f+1))}function fr(i,s,f,p,m,_){if(i>f||i<s){let p="bigint"==typeof s?"n":"",m;throw m=_>3?0===s||s===BigInt(0)?`>= 0${p} and < 2${p} ** ${(_+1)*8}${p}`:`>= -(2${p} ** ${(_+1)*8-1}${p}) and < 2 ** ${(_+1)*8-1}${p}`:`>= ${s}${p} and <= ${f}${p}`,new g.ERR_OUT_OF_RANGE("value",m,i)}ae2(p,m,_)}function j2(i,s){if("number"!=typeof i)throw new g.ERR_INVALID_ARG_TYPE(s,"number",i)}function W(i,s,f){throw Math.floor(i)!==i?(j2(i,f),new g.ERR_OUT_OF_RANGE(f||"offset","an integer",i)):s<0?new g.ERR_BUFFER_OUT_OF_BOUNDS:new g.ERR_OUT_OF_RANGE(f||"offset",`>= ${f?1:0} and <= ${s}`,i)}St2("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),St2("ERR_INVALID_ARG_TYPE",function(i,s){return`The "${i}" argument must be of type number. Received type ${typeof s}`},TypeError),St2("ERR_OUT_OF_RANGE",function(i,s,f){let p=`The value of "${i}" is out of range.`,g=f;return Number.isInteger(f)&&Math.abs(f)>4294967296?g=Qt2(String(f)):"bigint"==typeof f&&(g=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(g=Qt2(g)),g+="n"),p+=` It must be ${s}. Received ${g}`},RangeError);var m=/[^+/0-9A-Za-z-_]/g;function he2(i){if((i=(i=i.split("=")[0]).trim().replace(m,"")).length<2)return"";for(;i.length%4!=0;)i+="=";return i}function At2(i,s){s=s||1/0;let f,p=i.length,g=null,m=[];for(let _=0;_<p;++_){if((f=i.charCodeAt(_))>55295&&f<57344){if(!g){if(f>56319||_+1===p){(s-=3)>-1&&m.push(239,191,189);continue}g=f;continue}if(f<56320){(s-=3)>-1&&m.push(239,191,189),g=f;continue}f=(g-55296<<10|f-56320)+65536}else g&&(s-=3)>-1&&m.push(239,191,189);if(g=null,f<128){if((s-=1)<0)break;m.push(f)}else if(f<2048){if((s-=2)<0)break;m.push(f>>6|192,63&f|128)}else if(f<65536){if((s-=3)<0)break;m.push(f>>12|224,f>>6&63|128,63&f|128)}else if(f<1114112){if((s-=4)<0)break;m.push(f>>18|240,f>>12&63|128,f>>6&63|128,63&f|128)}else throw Error("Invalid code point")}return m}function fe2(i){let s=[];for(let f=0;f<i.length;++f)s.push(255&i.charCodeAt(f));return s}function ce2(i,s){let f,p,g=[];for(let m=0;m<i.length&&!((s-=2)<0);++m)p=(f=i.charCodeAt(m))>>8,g.push(f%256),g.push(p);return g}function cr2(i){return s.toByteArray(he2(i))}function et2(i,s,f,p){let g;for(g=0;g<p&&!(g+f>=s.length||g>=i.length);++g)s[g+f]=i[g];return g}function A(i,s){return i instanceof s||null!=i&&null!=i.constructor&&null!=i.constructor.name&&i.constructor.name===s.name}var _=function(){let i="0123456789abcdef",s=Array(256);for(let f=0;f<16;++f){let p=16*f;for(let g=0;g<16;++g)s[p+g]=i[f]+i[g]}return s}();function L(i){return typeof BigInt>"u"?le2:i}function le2(){throw Error("BigInt not supported")}}),io=T3((i,s)=>{"u">typeof window?(window.global=window,global.fetch=window.fetch,s.exports={Buffer:is().Buffer,Crypto:window.crypto}):s.exports={Buffer:is().Buffer,Crypto:crypto}}),iu={};((i,s)=>{for(var f in s)n3(i,f,{get:s[f],enumerable:!0})})(iu,{AVSCTap:()=>i_,ArweaveSigner:()=>im,DataItem:()=>iE,MAX_TAG_BYTES:()=>iS,MIN_BINARY_SIZE:()=>iA,SIG_CONFIG:()=>iy,SignatureConfig:()=>F,Signer:()=>ic,createData:()=>ge2,deserializeTags:()=>Q2,indexToType:()=>iv,serializeTags:()=>dt2,tagsExceedLimit:()=>jr});var ic=class{signer;publicKey;signatureType;signatureLength;ownerLength;pem;static verify(i,s,f,p){throw Error("You must implement verify method on child")}},il=C2(ie(),1),ih=C2(ir(),1);async function X2(i){if(Array.isArray(i)){let s=(0,ih.concatBuffers)([(0,ih.stringToBuffer)("list"),(0,ih.stringToBuffer)(i.length.toString())]);return await Gt2(i,await x().hash(s,"SHA-384"))}let s=(0,ih.concatBuffers)([(0,ih.stringToBuffer)("blob"),(0,ih.stringToBuffer)(i.byteLength.toString())]),f=(0,ih.concatBuffers)([await x().hash(s,"SHA-384"),await x().hash(i,"SHA-384")]);return await x().hash(f,"SHA-384")}async function Gt2(i,s){if(i.length<1)return s;let f=(0,ih.concatBuffers)([s,await X2(i[0])]),p=await x().hash(f,"SHA-384");return await Gt2(i.slice(1),p)}var id=C2(ii(),1),ip=id.default.default?id.default.default:id.default,ig=class extends ip{getPublicKey(i){throw Error("Unimplemented")}};function x(){return N??=new ig}(m=F||(F={}))[m.ARWEAVE=1]="ARWEAVE",m[m.ED25519=2]="ED25519",m[m.ETHEREUM=3]="ETHEREUM",m[m.SOLANA=4]="SOLANA",m[m.INJECTEDAPTOS=5]="INJECTEDAPTOS",m[m.MULTIAPTOS=6]="MULTIAPTOS",m[m.TYPEDETHEREUM=7]="TYPEDETHEREUM";var iy={[F.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[F.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[F.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[F.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"},[F.INJECTEDAPTOS]:{sigLength:64,pubLength:32,sigName:"injectedAptos"},[F.MULTIAPTOS]:{sigLength:2052,pubLength:1025,sigName:"multiAptos"},[F.TYPEDETHEREUM]:{sigLength:65,pubLength:42,sigName:"typedEthereum"}},im=class{signatureType=1;ownerLength=iy[1].pubLength;signatureLength=iy[1].sigLength;jwk;pk;constructor(i){this.pk=i.n,this.jwk=i}get publicKey(){return il.default.toBuffer(this.pk)}sign(i){return x().sign(this.jwk,i)}static async verify(i,s,f){return await x().verify(i,s,f)}},iv={1:im},ib=C2(ie(),1);async function v(i){return X2([(0,ih.stringToBuffer)("dataitem"),(0,ih.stringToBuffer)("1"),(0,ih.stringToBuffer)(i.signatureType.toString()),i.rawOwner,i.rawTarget,i.rawAnchor,i.rawTags,i.rawData])}async function Hr(i,s){let f=await v(i),p=await s.sign(f),g=await x().hash(p);return{signature:V.from(p),id:V.from(g)}}async function Wt2(i,s){let{signature:f,id:p}=await Hr(i,s);return i.getRaw().set(f,2),p}var i_=class{buf;pos;constructor(i=V.alloc(iS),s=0){this.buf=i,this.pos=s}writeTags(i){if(!Array.isArray(i))throw Error("input must be array");let s=i.length,f;if(s)for(this.writeLong(s),f=0;f<s;f++){let s=i[f];if(s?.name===void 0||s?.value===void 0)throw Error(`Invalid tag format for ${s}, expected {name:string, value: string}`);this.writeString(s.name),this.writeString(s.value)}this.writeLong(0)}toBuffer(){let i=V.alloc(this.pos);if(this.pos>this.buf.length)throw Error(`Too many tag bytes (${this.pos} > ${this.buf.length})`);return this.buf.copy(i,0,0,this.pos),i}tagsExceedLimit(){return this.pos>this.buf.length}writeLong(i){let s=this.buf,f,p;if(i>=-1073741824&&i<1073741824){p=i>=0?i<<1:~i<<1|1;do s[this.pos]=127&p,p>>=7;while(p&&(s[this.pos++]|=128))}else{f=i>=0?2*i:-(2*i)-1;do s[this.pos]=127&f,f/=128;while(f>=1&&(s[this.pos++]|=128))}this.pos++,this.buf=s}writeString(i){let s=V.byteLength(i),f=this.buf;this.writeLong(s);let p=this.pos;if(this.pos+=s,!(this.pos>f.length)){if(s>64)this.buf.write(i,this.pos-s,s,"utf8");else{let g,m,_;for(g=0;g<s;g++)(m=i.charCodeAt(g))<128?f[p++]=m:(m<2048?f[p++]=m>>6|192:((64512&m)==55296&&(64512&(_=i.charCodeAt(g+1)))==56320?(m=65536+((1023&m)<<10)+(1023&_),g++,f[p++]=m>>18|240,f[p++]=m>>12&63|128):f[p++]=m>>12|224,f[p++]=m>>6&63|128),f[p++]=63&m|128)}this.buf=f}}readLong(){let i=0,s=0,f=this.buf,p,g,m,_;do g=128&(p=f[this.pos++]),i|=(127&p)<<s,s+=7;while(g&&s<28);if(g){m=i,_=268435456;do m+=(127&(p=f[this.pos++]))*_,_*=128;while(128&p);return(m%2?-(m+1):m)/2}return i>>1^-(1&i)}skipLong(){let i=this.buf;for(;128&i[this.pos++];);}readTags(){let i=[],s;for(;s=this.readLong();)for(s<0&&(s=-s,this.skipLong());s--;){let s=this.readString(),f=this.readString();i.push({name:s,value:f})}return i}readString(){let i=this.readLong(),s=this.pos,f=this.buf;if(this.pos+=i,!(this.pos>f.length))return this.buf.slice(s,s+i).toString()}};function dt2(i){let s=new i_;return s.writeTags(i),s.toBuffer()}function jr(i){let s=new i_;return s.writeTags(i),s.tagsExceedLimit()}function Q2(i){return new i_(i).readTags()}function I2(i){let s=0;for(let f=i.length-1;f>=0;f--)s=256*s+i[f];return s}function Vt2(i){if(i>29)throw Error("Short too long");let s=[0,0];for(let f=0;f<s.length;f++){let p=255&i;s[f]=p,i=(i-p)/256}return Uint8Array.from(s)}function xt2(i){let s=[0,0,0,0,0,0,0,0];for(let f=0;f<s.length;f++){let p=255&i;s[f]=p,i=(i-p)/256}return Uint8Array.from(s)}var iw=C2(io(),1),iT=C2(is(),1),iS=4096,iA=80,iE=class{binary;_id;constructor(i){this.binary=i}static isDataItem(i){return void 0!==i.binary}get signatureType(){let i=I2(this.binary.subarray(0,2));if(F?.[i]!==void 0)return i;throw Error("Unknown signature type: "+i)}async isValid(){return iE.verify(this.binary)}get id(){return(async()=>ib.default.encode(await this.rawId))()}set id(i){this._id=ib.default.toBuffer(i)}get rawId(){return(async()=>iT.Buffer.from(await iw.Crypto.subtle.digest("SHA-256",this.rawSignature)))()}set rawId(i){this._id=i}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return ib.default.encode(this.rawSignature)}set rawOwner(i){if(i.byteLength!=this.ownerLength)throw Error(`Expected raw owner (pubkey) to be ${this.ownerLength} bytes, got ${i.byteLength} bytes.`);this.binary.set(i,2+this.signatureLength)}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get signatureLength(){return iy[this.signatureType].sigLength}get owner(){return ib.default.encode(this.rawOwner)}get ownerLength(){return iy[this.signatureType].pubLength}get rawTarget(){let i=this.getTargetStart();return 1==this.binary[i]?this.binary.subarray(i+1,i+33):iT.Buffer.alloc(0)}get target(){return ib.default.encode(this.rawTarget)}get rawAnchor(){let i=this.getAnchorStart();return 1==this.binary[i]?this.binary.subarray(i+1,i+33):iT.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){let i=this.getTagsStart(),s=I2(this.binary.subarray(i+8,i+16));return this.binary.subarray(i+16,i+16+s)}get tags(){let i=this.getTagsStart();if(0==I2(this.binary.subarray(i,i+8)))return[];let s=I2(this.binary.subarray(i+8,i+16));return Q2(iT.Buffer.from(this.binary.subarray(i+16,i+16+s)))}get tagsB64Url(){return this.tags.map(i=>({name:ib.default.encode(i.name),value:ib.default.encode(i.value)}))}getStartOfData(){let i=this.getTagsStart(),s=I2(this.binary.subarray(i+8,i+16));return i+16+s}get rawData(){let i=this.getTagsStart(),s=I2(this.binary.subarray(i+8,i+16)),f=i+16+s;return this.binary.subarray(f,this.binary.length)}get data(){return ib.default.encode(this.rawData)}getRaw(){return this.binary}async sign(i){return this._id=await Wt2(this,i),this.rawId}async setSignature(i){this.binary.set(i,2),this._id=iT.Buffer.from(await x().hash(i))}isSigned(){return(this._id?.length??0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(i=>({name:ib.default.encode(i.name),value:ib.default.encode(i.value)})),data:this.data}}static async verify(i){if(i.byteLength<iA)return!1;let s=new iE(i),f=s.signatureType,p=s.getTagsStart(),g=I2(i.subarray(p,p+8)),m=I2(i.subarray(p+8,p+16));if(m>iS)return!1;if(g>0)try{if(Q2(iT.Buffer.from(i.subarray(p+16,p+16+m))).length!==g)return!1}catch{return!1}let _=iv[f],w=await v(s);return await _.verify(s.rawOwner,w,s.rawSignature)}async getSignatureData(){return v(this)}getTagsStart(){let i=this.getTargetStart(),s=1==this.binary[i],f=i+(s?33:1),p=1==this.binary[f];return f+(p?33:1)}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){return this.getTargetStart()+1+(1==this.binary[this.getTargetStart()]?32:0)}},iC=C2(ie(),1);function ge2(i,s,f){let p=s.publicKey,g=f?.target?iC.default.toBuffer(f.target):null,m=1+(g?.byteLength??0),_=f?.anchor?V.from(f.anchor):null,w=1+(_?.byteLength??0),E=(f?.tags?.length??0)>0?dt2(f.tags):null,I=16+(E?E.byteLength:0),B=V.from(i),O=B.byteLength,R=2+s.signatureLength+s.ownerLength+m+w+I+O,U=V.alloc(R);if(U.set(Vt2(s.signatureType),0),U.set(new Uint8Array(s.signatureLength).fill(0),2),p.byteLength!==s.ownerLength)throw Error(`Owner must be ${s.ownerLength} bytes, but was incorrectly ${p.byteLength}`);U.set(p,2+s.signatureLength);let N=2+s.signatureLength+s.ownerLength;if(U[N]=g?1:0,g){if(32!==g.byteLength)throw Error(`Target must be 32 bytes but was incorrectly ${g.byteLength}`);U.set(g,N+1)}let F=N+m,z=F+1;if(U[F]=_?1:0,_){if(z+=_.byteLength,32!==_.byteLength)throw Error("Anchor must be 32 bytes");U.set(_,F+1)}U.set(xt2(f?.tags?.length??0),z);let K=xt2(E?.byteLength??0);U.set(K,z+8),E&&U.set(E,z+16);let Y=z+I;return U.set(B,Y),new iE(U)}var ix={...iu};globalThis.arbundles??=ix;var iI=ix,iB=ix;globalThis.Buffer||(globalThis.Buffer=n0.Buffer);var{DataItem:iO}=n2;function createDataItemSigner(i){let signer=async({data:s,tags:f,target:p,anchor:g,createDataItem:m=i=>new iO(i)})=>{let _=await i.signDataItem({data:s,tags:f,target:p,anchor:g}),w=m(n0.Buffer.from(_));return{id:await w.id,raw:await w.getRaw()}};return signer}var{result:ik,results:iR,message:iU,spawn:iL,monitor:iP,unmonitor:ij,dryrun:iM,assign:iN}=connect({GATEWAY_URL:globalThis.GATEWAY_URL||void 0,MU_URL:globalThis.MU_URL||void 0,CU_URL:globalThis.CU_URL||void 0,GRAPHQL_URL:globalThis.GRAPHQL_URL||void 0}),iF=nQ.createDataItemSigner;/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

warp-arbundles/build/web/esm/bundle.js:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/}}]);